<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 15.0.4"/>
    <title>redlines.redlines API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note{color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.tip{color:#0a3622;background-color:#d1e7dd;border-color:#a3cfbb;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%230a3622%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%206a6%206%200%201%201%2010.174%204.31c-.203.196-.359.4-.453.619l-.762%201.769A.5.5%200%200%201%2010.5%2013a.5.5%200%200%201%200%201%20.5.5%200%200%201%200%201l-.224.447a1%201%200%200%201-.894.553H6.618a1%201%200%200%201-.894-.553L5.5%2015a.5.5%200%200%201%200-1%20.5.5%200%200%201%200-1%20.5.5%200%200%201-.46-.302l-.761-1.77a2%202%200%200%200-.453-.618A5.98%205.98%200%200%201%202%206m6-5a5%205%200%200%200-3.479%208.592c.263.254.514.564.676.941L5.83%2012h4.342l.632-1.467c.162-.377.413-.687.676-.941A5%205%200%200%200%208%201%22/%3E%3C/svg%3E");}.pdoc .alert.important{color:#055160;background-color:#cff4fc;border-color:#9eeaf9;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23055160%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%200a2%202%200%200%200-2%202v12a2%202%200%200%200%202%202h12a2%202%200%200%200%202-2V2a2%202%200%200%200-2-2zm6%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.caution{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M11.46.146A.5.5%200%200%200%2011.107%200H4.893a.5.5%200%200%200-.353.146L.146%204.54A.5.5%200%200%200%200%204.893v6.214a.5.5%200%200%200%20.146.353l4.394%204.394a.5.5%200%200%200%20.353.146h6.214a.5.5%200%200%200%20.353-.146l4.394-4.394a.5.5%200%200%200%20.146-.353V4.893a.5.5%200%200%200-.146-.353zM8%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .decorator-deprecated{color:#842029;}.pdoc .decorator-deprecated ~ span{filter:grayscale(1) opacity(0.8);}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../redlines.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;redlines</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#Redlines">Redlines</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Redlines.__init__">Redlines</a>
                        </li>
                        <li>
                                <a class="variable" href="#Redlines.source">source</a>
                        </li>
                        <li>
                                <a class="variable" href="#Redlines.test">test</a>
                        </li>
                        <li>
                                <a class="variable" href="#Redlines.redlines">redlines</a>
                        </li>
                        <li>
                                <a class="variable" href="#Redlines.processor">processor</a>
                        </li>
                        <li>
                                <a class="variable" href="#Redlines.options">options</a>
                        </li>
                        <li>
                                <a class="variable" href="#Redlines.opcodes">opcodes</a>
                        </li>
                        <li>
                                <a class="variable" href="#Redlines.changes">changes</a>
                        </li>
                        <li>
                                <a class="function" href="#Redlines.get_changes">get_changes</a>
                        </li>
                        <li>
                                <a class="function" href="#Redlines.stats">stats</a>
                        </li>
                        <li>
                                <a class="variable" href="#Redlines.output_markdown">output_markdown</a>
                        </li>
                        <li>
                                <a class="variable" href="#Redlines.output_rich">output_rich</a>
                        </li>
                        <li>
                                <a class="function" href="#Redlines.compare">compare</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#RedlinesOptions">RedlinesOptions</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#RedlinesOptions.markdown_style">markdown_style</a>
                        </li>
                        <li>
                                <a class="variable" href="#RedlinesOptions.ins_class">ins_class</a>
                        </li>
                        <li>
                                <a class="variable" href="#RedlinesOptions.del_class">del_class</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../redlines.html">redlines</a><wbr>.redlines    </h1>

                
                        <input id="mod-redlines-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-redlines-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">  1</span></a><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">  2</span></a>
</span><span id="L-3"><a href="#L-3"><span class="linenos">  3</span></a><span class="kn">import</span> <span class="nn">re</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">  4</span></a><span class="kn">import</span> <span class="nn">typing</span> <span class="k">as</span> <span class="nn">t</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">  5</span></a>
</span><span id="L-6"><a href="#L-6"><span class="linenos">  6</span></a><span class="kn">from</span> <span class="nn">rich.text</span> <span class="kn">import</span> <span class="n">Text</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">  7</span></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Unpack</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">  8</span></a>
</span><span id="L-9"><a href="#L-9"><span class="linenos">  9</span></a><span class="kn">from</span> <span class="nn">.document</span> <span class="kn">import</span> <span class="n">Document</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos"> 10</span></a><span class="kn">from</span> <span class="nn">.enums</span> <span class="kn">import</span> <span class="n">MarkdownStyle</span><span class="p">,</span> <span class="n">OutputType</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos"> 11</span></a><span class="kn">from</span> <span class="nn">.processor</span> <span class="kn">import</span> <span class="n">DiffOperation</span><span class="p">,</span> <span class="n">Redline</span><span class="p">,</span> <span class="n">Stats</span><span class="p">,</span> <span class="n">WholeDocumentProcessor</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos"> 12</span></a>
</span><span id="L-13"><a href="#L-13"><span class="linenos"> 13</span></a><span class="n">__all__</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos"> 14</span></a>    <span class="s2">&quot;Redlines&quot;</span><span class="p">,</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos"> 15</span></a>    <span class="s2">&quot;RedlinesOptions&quot;</span><span class="p">,</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos"> 16</span></a><span class="p">)</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos"> 17</span></a>
</span><span id="L-18"><a href="#L-18"><span class="linenos"> 18</span></a><span class="c1"># Workaround for enum + literal support in type hints</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos"> 19</span></a><span class="c1"># See: https://github.com/python/typing/issues/781</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos"> 20</span></a><span class="n">OutputTypeLike</span> <span class="o">=</span> <span class="n">OutputType</span> <span class="o">|</span> <span class="n">t</span><span class="o">.</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;markdown&quot;</span><span class="p">,</span> <span class="s2">&quot;rich&quot;</span><span class="p">]</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos"> 21</span></a>
</span><span id="L-22"><a href="#L-22"><span class="linenos"> 22</span></a>
</span><span id="L-23"><a href="#L-23"><span class="linenos"> 23</span></a><span class="k">class</span> <span class="nc">RedlinesOptions</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">TypedDict</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos"> 24</span></a>    <span class="n">markdown_style</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">MarkdownStyle</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos"> 25</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The style to use for markdown output. See `Redlines.output_markdown` for more information.&quot;&quot;&quot;</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos"> 26</span></a>    <span class="n">ins_class</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos"> 27</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The CSS class to use for insertions when `markdown_style` is set to `custom_css`. Defaults to &#39;redline-inserted&#39;.&quot;&quot;&quot;</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos"> 28</span></a>    <span class="n">del_class</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos"> 29</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The CSS class to use for deletions when `markdown_style` is set to `custom_css`. Defaults to &#39;redline-deleted&#39;.&quot;&quot;&quot;</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos"> 30</span></a>
</span><span id="L-31"><a href="#L-31"><span class="linenos"> 31</span></a>
</span><span id="L-32"><a href="#L-32"><span class="linenos"> 32</span></a><span class="k">class</span> <span class="nc">Redlines</span><span class="p">:</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos"> 33</span></a>    <span class="n">_source</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos"> 34</span></a>    <span class="n">_test</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos"> 35</span></a>    <span class="n">_seq1</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos"> 36</span></a>    <span class="n">_seq2</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos"> 37</span></a>    <span class="n">_diff_operations</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">DiffOperation</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos"> 38</span></a>
</span><span id="L-39"><a href="#L-39"><span class="linenos"> 39</span></a>    <span class="nd">@property</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos"> 40</span></a>    <span class="k">def</span> <span class="nf">source</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos"> 41</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos"> 42</span></a><span class="sd">        Get the source text to be used as a basis for comparison.</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos"> 43</span></a>
</span><span id="L-44"><a href="#L-44"><span class="linenos"> 44</span></a><span class="sd">        :return: The source text to be used as a basis for comparison.</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos"> 45</span></a><span class="sd">        :rtype: str</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos"> 46</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos"> 47</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_source</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos"> 48</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No source string was provided.&quot;</span><span class="p">)</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos"> 49</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_source</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos"> 50</span></a>
</span><span id="L-51"><a href="#L-51"><span class="linenos"> 51</span></a>    <span class="nd">@source</span><span class="o">.</span><span class="n">setter</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos"> 52</span></a>    <span class="k">def</span> <span class="nf">source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Document</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos"> 53</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_source</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">text</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Document</span><span class="p">)</span> <span class="k">else</span> <span class="n">value</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos"> 54</span></a>
</span><span id="L-55"><a href="#L-55"><span class="linenos"> 55</span></a>        <span class="c1"># If test is already set, process the new source against it</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos"> 56</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos"> 57</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_diff_operations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processor</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_source</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test</span><span class="p">)</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos"> 58</span></a>
</span><span id="L-59"><a href="#L-59"><span class="linenos"> 59</span></a>    <span class="nd">@property</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos"> 60</span></a>    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos"> 61</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos"> 62</span></a><span class="sd">        Get the text to be compared with the source.</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos"> 63</span></a>
</span><span id="L-64"><a href="#L-64"><span class="linenos"> 64</span></a><span class="sd">        :return: The text to be compared with the source.</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos"> 65</span></a><span class="sd">        :rtype: str</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos"> 66</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos"> 67</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos"> 68</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No test string was provided.&quot;</span><span class="p">)</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos"> 69</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos"> 70</span></a>
</span><span id="L-71"><a href="#L-71"><span class="linenos"> 71</span></a>    <span class="nd">@test</span><span class="o">.</span><span class="n">setter</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos"> 72</span></a>    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Document</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos"> 73</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_test</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">text</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Document</span><span class="p">)</span> <span class="k">else</span> <span class="n">value</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos"> 74</span></a>
</span><span id="L-75"><a href="#L-75"><span class="linenos"> 75</span></a>        <span class="c1"># Process the text against the source</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos"> 76</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_source</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos"> 77</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_diff_operations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processor</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_source</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test</span><span class="p">)</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos"> 78</span></a>
</span><span id="L-79"><a href="#L-79"><span class="linenos"> 79</span></a>    <span class="nd">@property</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos"> 80</span></a>    <span class="k">def</span> <span class="nf">_diff_ops</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">DiffOperation</span><span class="p">]:</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos"> 81</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos"> 82</span></a><span class="sd">        Internal property: Return the list of DiffOperation objects (includes &#39;equal&#39; operations).</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos"> 83</span></a><span class="sd">        For internal rendering code.</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos"> 84</span></a>
</span><span id="L-85"><a href="#L-85"><span class="linenos"> 85</span></a><span class="sd">        :return: List of DiffOperation objects</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos"> 86</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos"> 87</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_diff_operations</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos"> 88</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos"> 89</span></a>                <span class="s2">&quot;No test string was provided when the function was called, or during initialisation.&quot;</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos"> 90</span></a>            <span class="p">)</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos"> 91</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_diff_operations</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos"> 92</span></a>
</span><span id="L-93"><a href="#L-93"><span class="linenos"> 93</span></a>    <span class="nd">@property</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos"> 94</span></a>    <span class="k">def</span> <span class="nf">redlines</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Redline</span><span class="p">]:</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos"> 95</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos"> 96</span></a><span class="sd">        Return the list of Redline objects representing actual changes between source and test.</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos"> 97</span></a>
</span><span id="L-98"><a href="#L-98"><span class="linenos"> 98</span></a><span class="sd">        This is an alias for the `changes` property and provides the same functionality.</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos"> 99</span></a><span class="sd">        Only actual changes are returned (equal operations are excluded).</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos">100</span></a>
</span><span id="L-101"><a href="#L-101"><span class="linenos">101</span></a><span class="sd">        :return: List of Redline objects</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos">102</span></a><span class="sd">        :rtype: list[Redline]</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos">103</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos">104</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">changes</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos">105</span></a>
</span><span id="L-106"><a href="#L-106"><span class="linenos">106</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos">107</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos">108</span></a>        <span class="n">source</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Document</span><span class="p">,</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos">109</span></a>        <span class="n">test</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Document</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos">110</span></a>        <span class="o">**</span><span class="n">options</span><span class="p">:</span> <span class="n">Unpack</span><span class="p">[</span><span class="n">RedlinesOptions</span><span class="p">],</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos">111</span></a>    <span class="p">):</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos">112</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos">113</span></a><span class="sd">        Redline is a class used to compare text, and producing human-readable differences or deltas</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos">114</span></a><span class="sd">        which look like track changes in Microsoft Word.</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos">115</span></a>
</span><span id="L-116"><a href="#L-116"><span class="linenos">116</span></a><span class="sd">        ```python</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos">117</span></a><span class="sd">        # import the class</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos">118</span></a><span class="sd">        from redlines import Redlines</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos">119</span></a>
</span><span id="L-120"><a href="#L-120"><span class="linenos">120</span></a><span class="sd">        # Create a Redlines object using the two strings to compare</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos">121</span></a><span class="sd">        test = Redlines(</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos">122</span></a><span class="sd">            &quot;The quick brown fox jumps over the lazy dog.&quot;,</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos">123</span></a><span class="sd">            &quot;The quick brown fox walks past the lazy dog.&quot;,</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos">124</span></a><span class="sd">        )</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos">125</span></a>
</span><span id="L-126"><a href="#L-126"><span class="linenos">126</span></a><span class="sd">        # This produces an output in Markdown format</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos">127</span></a><span class="sd">        test.output_markdown</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos">128</span></a><span class="sd">        ```</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos">129</span></a>
</span><span id="L-130"><a href="#L-130"><span class="linenos">130</span></a><span class="sd">        Besides strings, Redlines can also receive an input in another format if it is supported by the Document class</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos">131</span></a>
</span><span id="L-132"><a href="#L-132"><span class="linenos">132</span></a><span class="sd">        ```python</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos">133</span></a><span class="sd">        from redlines import PlainTextFile</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos">134</span></a>
</span><span id="L-135"><a href="#L-135"><span class="linenos">135</span></a><span class="sd">        source = PlainTextFile(&quot;tests/documents/PlainTextFile/source.txt&quot;)</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos">136</span></a><span class="sd">        test = PlainTextFile(&quot;tests/documents/PlainTextFile/test.txt&quot;)</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos">137</span></a>
</span><span id="L-138"><a href="#L-138"><span class="linenos">138</span></a><span class="sd">        redline = Redlines(source, test)</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos">139</span></a><span class="sd">        assert (</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos">140</span></a><span class="sd">            redline.output_markdown</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos">141</span></a><span class="sd">            == &quot;The quick brown fox &lt;span style=&#39;color:red;font-weight:700;text-decoration:line-through;&#39;&gt;jumps over &lt;/span&gt;&lt;span style=&#39;color:green;font-weight:700;&#39;&gt;walks past &lt;/span&gt;the lazy dog.&quot;</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos">142</span></a><span class="sd">        )</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos">143</span></a>
</span><span id="L-144"><a href="#L-144"><span class="linenos">144</span></a><span class="sd">        ```</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos">145</span></a>
</span><span id="L-146"><a href="#L-146"><span class="linenos">146</span></a><span class="sd">        :param source: The source text to be used as a basis for comparison.</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos">147</span></a><span class="sd">        :type source: str | Document</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos">148</span></a><span class="sd">        :param test: Optional test text to compare with the source.</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos">149</span></a><span class="sd">        :type test: str | Document | None</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos">150</span></a><span class="sd">        :param options: Additional options for comparison and output formatting.</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos">151</span></a><span class="sd">        :type options: RedlinesOptions</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos">152</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos">153</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">processor</span> <span class="o">=</span> <span class="n">WholeDocumentProcessor</span><span class="p">()</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos">154</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">text</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">Document</span><span class="p">)</span> <span class="k">else</span> <span class="n">source</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos">155</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="n">options</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos">156</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_diff_operations</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos">157</span></a>        <span class="k">if</span> <span class="n">test</span><span class="p">:</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos">158</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">test</span> <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="n">text</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">Document</span><span class="p">)</span> <span class="k">else</span> <span class="n">test</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos">159</span></a>            <span class="c1"># self.compare()</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos">160</span></a>
</span><span id="L-161"><a href="#L-161"><span class="linenos">161</span></a>    <span class="nd">@property</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos">162</span></a>    <span class="k">def</span> <span class="nf">opcodes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]:</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos">163</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos">164</span></a><span class="sd">        Return list of 5-tuples describing how to turn `source` into `test`.</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos">165</span></a><span class="sd">        Similar to [`SequenceMatcher.get_opcodes`](https://docs.python.org/3/library/difflib.html#difflib.SequenceMatcher.get_opcodes).</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos">166</span></a>
</span><span id="L-167"><a href="#L-167"><span class="linenos">167</span></a><span class="sd">        ```pycon</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos">168</span></a><span class="sd">        &gt;&gt;&gt; test_string_1 = &#39;The quick brown fox jumps over the lazy dog.&#39;</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos">169</span></a><span class="sd">        ... test_string_2 = &#39;The quick brown fox walks past the lazy dog.&#39;</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos">170</span></a><span class="sd">        ... s = Redlines(test_string_1, test_string_2)</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos">171</span></a><span class="sd">        ... s.opcodes</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos">172</span></a><span class="sd">        [(&#39;equal&#39;, 0, 4, 0, 4), (&#39;replace&#39;, 4, 6, 4, 6), (&#39;equal&#39;, 6, 9, 6, 9)]</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos">173</span></a><span class="sd">        ```</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos">174</span></a>
</span><span id="L-175"><a href="#L-175"><span class="linenos">175</span></a><span class="sd">        :return: List of 5-tuples describing how to turn `source` into `test`.</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos">176</span></a><span class="sd">        :rtype: list[tuple[str, int, int, int, int]]</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos">177</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos">178</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">diff_op</span><span class="o">.</span><span class="n">opcodes</span> <span class="k">for</span> <span class="n">diff_op</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_diff_ops</span><span class="p">]</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos">179</span></a>
</span><span id="L-180"><a href="#L-180"><span class="linenos">180</span></a>    <span class="nd">@property</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos">181</span></a>    <span class="k">def</span> <span class="nf">changes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Redline</span><span class="p">]:</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos">182</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos">183</span></a><span class="sd">        Return list of Redline objects representing the differences between source and test.</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos">184</span></a>
</span><span id="L-185"><a href="#L-185"><span class="linenos">185</span></a><span class="sd">        This provides a user-friendly interface for programmatically accessing changes,</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos">186</span></a><span class="sd">        with direct access to the changed text and position information. Only actual</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos">187</span></a><span class="sd">        changes are returned (equal operations are excluded).</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos">188</span></a>
</span><span id="L-189"><a href="#L-189"><span class="linenos">189</span></a><span class="sd">        ```python</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos">190</span></a><span class="sd">        from redlines import Redlines</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos">191</span></a>
</span><span id="L-192"><a href="#L-192"><span class="linenos">192</span></a><span class="sd">        test = Redlines(</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos">193</span></a><span class="sd">            &quot;The quick brown fox jumps over the lazy dog.&quot;,</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos">194</span></a><span class="sd">            &quot;The quick brown fox walks past the lazy dog.&quot;</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos">195</span></a><span class="sd">        )</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos">196</span></a>
</span><span id="L-197"><a href="#L-197"><span class="linenos">197</span></a><span class="sd">        for redline in test.changes:</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos">198</span></a><span class="sd">            print(f&quot;{redline.operation}: {redline.source_text} -&gt; {redline.test_text}&quot;)</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos">199</span></a><span class="sd">        # Output: replace: jumps over  -&gt; walks past</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos">200</span></a><span class="sd">        ```</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos">201</span></a>
</span><span id="L-202"><a href="#L-202"><span class="linenos">202</span></a><span class="sd">        :return: List of Redline objects (only actual changes, no &#39;equal&#39; operations)</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos">203</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos">204</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos">205</span></a>        <span class="k">for</span> <span class="n">diff_op</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_diff_ops</span><span class="p">:</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos">206</span></a>            <span class="n">tag</span><span class="p">,</span> <span class="n">i1</span><span class="p">,</span> <span class="n">i2</span><span class="p">,</span> <span class="n">j1</span><span class="p">,</span> <span class="n">j2</span> <span class="o">=</span> <span class="n">diff_op</span><span class="o">.</span><span class="n">opcodes</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos">207</span></a>
</span><span id="L-208"><a href="#L-208"><span class="linenos">208</span></a>            <span class="c1"># Skip equal operations - only return actual changes</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos">209</span></a>            <span class="k">if</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;equal&quot;</span><span class="p">:</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos">210</span></a>                <span class="k">continue</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos">211</span></a>
</span><span id="L-212"><a href="#L-212"><span class="linenos">212</span></a>            <span class="n">source_tokens</span> <span class="o">=</span> <span class="n">diff_op</span><span class="o">.</span><span class="n">source_chunk</span><span class="o">.</span><span class="n">text</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos">213</span></a>            <span class="n">test_tokens</span> <span class="o">=</span> <span class="n">diff_op</span><span class="o">.</span><span class="n">test_chunk</span><span class="o">.</span><span class="n">text</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos">214</span></a>
</span><span id="L-215"><a href="#L-215"><span class="linenos">215</span></a>            <span class="c1"># Extract text and positions based on operation type</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos">216</span></a>            <span class="k">if</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;delete&quot;</span><span class="p">:</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos">217</span></a>                <span class="n">redline</span> <span class="o">=</span> <span class="n">Redline</span><span class="p">(</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos">218</span></a>                    <span class="n">operation</span><span class="o">=</span><span class="s2">&quot;delete&quot;</span><span class="p">,</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos">219</span></a>                    <span class="n">source_text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">source_tokens</span><span class="p">[</span><span class="n">i1</span><span class="p">:</span><span class="n">i2</span><span class="p">]),</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos">220</span></a>                    <span class="n">test_text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos">221</span></a>                    <span class="n">source_position</span><span class="o">=</span><span class="p">(</span><span class="n">i1</span><span class="p">,</span> <span class="n">i2</span><span class="p">),</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos">222</span></a>                    <span class="n">test_position</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos">223</span></a>                <span class="p">)</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos">224</span></a>            <span class="k">elif</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;insert&quot;</span><span class="p">:</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos">225</span></a>                <span class="n">redline</span> <span class="o">=</span> <span class="n">Redline</span><span class="p">(</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos">226</span></a>                    <span class="n">operation</span><span class="o">=</span><span class="s2">&quot;insert&quot;</span><span class="p">,</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos">227</span></a>                    <span class="n">source_text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos">228</span></a>                    <span class="n">test_text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">test_tokens</span><span class="p">[</span><span class="n">j1</span><span class="p">:</span><span class="n">j2</span><span class="p">]),</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos">229</span></a>                    <span class="n">source_position</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos">230</span></a>                    <span class="n">test_position</span><span class="o">=</span><span class="p">(</span><span class="n">j1</span><span class="p">,</span> <span class="n">j2</span><span class="p">),</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos">231</span></a>                <span class="p">)</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos">232</span></a>            <span class="k">elif</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;replace&quot;</span><span class="p">:</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos">233</span></a>                <span class="n">redline</span> <span class="o">=</span> <span class="n">Redline</span><span class="p">(</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos">234</span></a>                    <span class="n">operation</span><span class="o">=</span><span class="s2">&quot;replace&quot;</span><span class="p">,</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos">235</span></a>                    <span class="n">source_text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">source_tokens</span><span class="p">[</span><span class="n">i1</span><span class="p">:</span><span class="n">i2</span><span class="p">]),</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos">236</span></a>                    <span class="n">test_text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">test_tokens</span><span class="p">[</span><span class="n">j1</span><span class="p">:</span><span class="n">j2</span><span class="p">]),</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos">237</span></a>                    <span class="n">source_position</span><span class="o">=</span><span class="p">(</span><span class="n">i1</span><span class="p">,</span> <span class="n">i2</span><span class="p">),</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos">238</span></a>                    <span class="n">test_position</span><span class="o">=</span><span class="p">(</span><span class="n">j1</span><span class="p">,</span> <span class="n">j2</span><span class="p">),</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos">239</span></a>                <span class="p">)</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos">240</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos">241</span></a>                <span class="k">continue</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos">242</span></a>
</span><span id="L-243"><a href="#L-243"><span class="linenos">243</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">redline</span><span class="p">)</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos">244</span></a>
</span><span id="L-245"><a href="#L-245"><span class="linenos">245</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos">246</span></a>
</span><span id="L-247"><a href="#L-247"><span class="linenos">247</span></a>    <span class="k">def</span> <span class="nf">get_changes</span><span class="p">(</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos">248</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">operation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos">249</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Redline</span><span class="p">]:</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos">250</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos">251</span></a><span class="sd">        Get changes (redlines), optionally filtered by operation type.</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos">252</span></a>
</span><span id="L-253"><a href="#L-253"><span class="linenos">253</span></a><span class="sd">        ```python</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos">254</span></a><span class="sd">        from redlines import Redlines</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos">255</span></a>
</span><span id="L-256"><a href="#L-256"><span class="linenos">256</span></a><span class="sd">        test = Redlines(</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos">257</span></a><span class="sd">            &quot;The quick brown fox jumps over the lazy dog.&quot;,</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos">258</span></a><span class="sd">            &quot;The quick brown fox walks past the lazy dog.&quot;</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos">259</span></a><span class="sd">        )</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos">260</span></a>
</span><span id="L-261"><a href="#L-261"><span class="linenos">261</span></a><span class="sd">        # Get all changes</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos">262</span></a><span class="sd">        all_changes = test.get_changes()</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos">263</span></a>
</span><span id="L-264"><a href="#L-264"><span class="linenos">264</span></a><span class="sd">        # Get only replacements</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos">265</span></a><span class="sd">        replacements = test.get_changes(operation=&quot;replace&quot;)</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos">266</span></a>
</span><span id="L-267"><a href="#L-267"><span class="linenos">267</span></a><span class="sd">        # Get deletions</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos">268</span></a><span class="sd">        deletions = test.get_changes(operation=&quot;delete&quot;)</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos">269</span></a>
</span><span id="L-270"><a href="#L-270"><span class="linenos">270</span></a><span class="sd">        # Get insertions</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos">271</span></a><span class="sd">        insertions = test.get_changes(operation=&quot;insert&quot;)</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos">272</span></a><span class="sd">        ```</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos">273</span></a>
</span><span id="L-274"><a href="#L-274"><span class="linenos">274</span></a><span class="sd">        :param operation: Filter by operation type: &quot;delete&quot;, &quot;insert&quot;, or &quot;replace&quot;. If None, returns all changes.</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos">275</span></a><span class="sd">        :return: List of Redline objects matching the filter</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos">276</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos">277</span></a>        <span class="n">changes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">changes</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos">278</span></a>
</span><span id="L-279"><a href="#L-279"><span class="linenos">279</span></a>        <span class="k">if</span> <span class="n">operation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos">280</span></a>            <span class="k">return</span> <span class="n">changes</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos">281</span></a>
</span><span id="L-282"><a href="#L-282"><span class="linenos">282</span></a>        <span class="k">if</span> <span class="n">operation</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;delete&quot;</span><span class="p">,</span> <span class="s2">&quot;insert&quot;</span><span class="p">,</span> <span class="s2">&quot;replace&quot;</span><span class="p">):</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos">283</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos">284</span></a>                <span class="sa">f</span><span class="s2">&quot;Invalid operation &#39;</span><span class="si">{</span><span class="n">operation</span><span class="si">}</span><span class="s2">&#39;. Must be &#39;delete&#39;, &#39;insert&#39;, or &#39;replace&#39;.&quot;</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos">285</span></a>            <span class="p">)</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos">286</span></a>
</span><span id="L-287"><a href="#L-287"><span class="linenos">287</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">r</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">changes</span> <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">operation</span> <span class="o">==</span> <span class="n">operation</span><span class="p">]</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos">288</span></a>
</span><span id="L-289"><a href="#L-289"><span class="linenos">289</span></a>    <span class="k">def</span> <span class="nf">stats</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Stats</span><span class="p">:</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos">290</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos">291</span></a><span class="sd">        Get statistics about the changes between source and test.</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos">292</span></a>
</span><span id="L-293"><a href="#L-293"><span class="linenos">293</span></a><span class="sd">        ```python</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos">294</span></a><span class="sd">        from redlines import Redlines</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos">295</span></a>
</span><span id="L-296"><a href="#L-296"><span class="linenos">296</span></a><span class="sd">        test = Redlines(</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos">297</span></a><span class="sd">            &quot;The quick brown fox jumps over the lazy dog.&quot;,</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos">298</span></a><span class="sd">            &quot;The quick brown fox walks past the lazy dog.&quot;</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos">299</span></a><span class="sd">        )</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos">300</span></a>
</span><span id="L-301"><a href="#L-301"><span class="linenos">301</span></a><span class="sd">        stats = test.stats()</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos">302</span></a><span class="sd">        print(f&quot;Total changes: {stats.total_changes}&quot;)</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos">303</span></a><span class="sd">        print(f&quot;Deletions: {stats.deletions}&quot;)</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos">304</span></a><span class="sd">        print(f&quot;Insertions: {stats.insertions}&quot;)</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos">305</span></a><span class="sd">        print(f&quot;Replacements: {stats.replacements}&quot;)</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos">306</span></a><span class="sd">        ```</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos">307</span></a>
</span><span id="L-308"><a href="#L-308"><span class="linenos">308</span></a><span class="sd">        :return: Stats object with change counts</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos">309</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos">310</span></a>        <span class="n">changes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">changes</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos">311</span></a>
</span><span id="L-312"><a href="#L-312"><span class="linenos">312</span></a>        <span class="n">deletions</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">changes</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">operation</span> <span class="o">==</span> <span class="s2">&quot;delete&quot;</span><span class="p">)</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos">313</span></a>        <span class="n">insertions</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">changes</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">operation</span> <span class="o">==</span> <span class="s2">&quot;insert&quot;</span><span class="p">)</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos">314</span></a>        <span class="n">replacements</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">changes</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">operation</span> <span class="o">==</span> <span class="s2">&quot;replace&quot;</span><span class="p">)</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos">315</span></a>
</span><span id="L-316"><a href="#L-316"><span class="linenos">316</span></a>        <span class="k">return</span> <span class="n">Stats</span><span class="p">(</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos">317</span></a>            <span class="n">total_changes</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">changes</span><span class="p">),</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos">318</span></a>            <span class="n">deletions</span><span class="o">=</span><span class="n">deletions</span><span class="p">,</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos">319</span></a>            <span class="n">insertions</span><span class="o">=</span><span class="n">insertions</span><span class="p">,</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos">320</span></a>            <span class="n">replacements</span><span class="o">=</span><span class="n">replacements</span><span class="p">,</span>
</span><span id="L-321"><a href="#L-321"><span class="linenos">321</span></a>        <span class="p">)</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos">322</span></a>
</span><span id="L-323"><a href="#L-323"><span class="linenos">323</span></a>    <span class="nd">@property</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos">324</span></a>    <span class="k">def</span> <span class="nf">output_markdown</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos">325</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos">326</span></a><span class="sd">        Returns the delta in Markdown format.</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos">327</span></a>
</span><span id="L-328"><a href="#L-328"><span class="linenos">328</span></a><span class="sd">        ## Styling Markdown</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos">329</span></a><span class="sd">        To output markdown in a particular manner, you must pass a `markdown_style` option when the `Redlines` object</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos">330</span></a><span class="sd">        is created or when `Redlines.compare` is called.</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos">331</span></a>
</span><span id="L-332"><a href="#L-332"><span class="linenos">332</span></a><span class="sd">        ```python</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos">333</span></a><span class="sd">        from redlines import Redlines</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos">334</span></a>
</span><span id="L-335"><a href="#L-335"><span class="linenos">335</span></a><span class="sd">        test = Redlines(</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos">336</span></a><span class="sd">            &quot;The quick brown fox jumps over the lazy dog.&quot;,</span>
</span><span id="L-337"><a href="#L-337"><span class="linenos">337</span></a><span class="sd">            &quot;The quick brown fox walks past the lazy dog.&quot;,</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos">338</span></a><span class="sd">            markdown_style=&quot;red&quot;  # This option specifies the style as red</span>
</span><span id="L-339"><a href="#L-339"><span class="linenos">339</span></a><span class="sd">        )</span>
</span><span id="L-340"><a href="#L-340"><span class="linenos">340</span></a>
</span><span id="L-341"><a href="#L-341"><span class="linenos">341</span></a><span class="sd">        test.compare(markdown_style=&quot;none&quot;) # This option specifies the style as none</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos">342</span></a><span class="sd">        ```</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos">343</span></a>
</span><span id="L-344"><a href="#L-344"><span class="linenos">344</span></a><span class="sd">        ### Available styles</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos">345</span></a>
</span><span id="L-346"><a href="#L-346"><span class="linenos">346</span></a><span class="sd">        | Style | Preview |</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos">347</span></a><span class="sd">        |-------| -------|</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos">348</span></a><span class="sd">        |red-green (**default**) | &quot;The quick brown fox &lt;span style=&#39;color:red;font-weight:700;text-decoration:line-through;&#39;&gt;jumps over &lt;/span&gt;&lt;span style=&#39;color:green;font-weight:700;&#39;&gt;walks past &lt;/span&gt;the lazy dog.&quot;|</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos">349</span></a><span class="sd">        |none | &#39;The quick brown fox &lt;del&gt;jumps over &lt;/del&gt;&lt;ins&gt;walks past &lt;/ins&gt;the lazy dog.&#39;|</span>
</span><span id="L-350"><a href="#L-350"><span class="linenos">350</span></a><span class="sd">        |red | &quot;The quick brown fox &lt;span style=&#39;color:red;font-weight:700;text-decoration:line-through;&#39;&gt;jumps over &lt;/span&gt;&lt;span style=&#39;color:red;font-weight:700;&#39;&gt;walks past &lt;/span&gt;the lazy dog.&quot;|</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos">351</span></a><span class="sd">        |ghfm (GitHub Flavored Markdown)| &#39;The quick brown fox ~~jumps over ~~**walks past **the lazy dog.&#39; |</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos">352</span></a><span class="sd">        |bbcode (BBCode) | &#39;The quick brown fox [s][color=red]jumps over [/color][/s][b][color=green]walks past [/color][/b]the lazy dog.&#39; |</span>
</span><span id="L-353"><a href="#L-353"><span class="linenos">353</span></a><span class="sd">        |streamlit | &#39;The quick brown fox ~~:red[jumps over ]~~ **:green[walks past ]** the lazy dog.&#39; |</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos">354</span></a>
</span><span id="L-355"><a href="#L-355"><span class="linenos">355</span></a><span class="sd">        ### Custom styling</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos">356</span></a>
</span><span id="L-357"><a href="#L-357"><span class="linenos">357</span></a><span class="sd">        You can also use css classes to provide custom styling by setting `markdown_style` as &quot;custom_css&quot;.</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos">358</span></a><span class="sd">        Insertions and deletions are now styled using the &quot;redline-inserted&quot; and &quot;redline-deleted&quot; CSS classes.</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos">359</span></a><span class="sd">        You can also set your own CSS classes by specifying the name of the CSS class in the options `ins_class`</span>
</span><span id="L-360"><a href="#L-360"><span class="linenos">360</span></a><span class="sd">        and `del_class` respectively in the constructor or compare function.</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos">361</span></a>
</span><span id="L-362"><a href="#L-362"><span class="linenos">362</span></a><span class="sd">        ## Markdown output in specific environments</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos">363</span></a>
</span><span id="L-364"><a href="#L-364"><span class="linenos">364</span></a><span class="sd">        Users have reported that the output doesn&#39;t display correctly in their environments.</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos">365</span></a><span class="sd">        This is because styling may not appear in markdown environments which disallow HTML.</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos">366</span></a><span class="sd">        There is no consistent support for strikethroughs and colors in the markdown standard,</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos">367</span></a><span class="sd">        and styling is largely accomplished through raw HTML. If you are using GitHub or Streamlit, you may not get</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos">368</span></a><span class="sd">        the formatting you expect or see any change at all.</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos">369</span></a>
</span><span id="L-370"><a href="#L-370"><span class="linenos">370</span></a><span class="sd">        If you are facing this kind of difficulty, here are some recommendations. If your experience doesn&#39;t match</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos">371</span></a><span class="sd">        the hints or description below, or you continue to face problems, please raise an issue.</span>
</span><span id="L-372"><a href="#L-372"><span class="linenos">372</span></a>
</span><span id="L-373"><a href="#L-373"><span class="linenos">373</span></a><span class="sd">        ### Jupyter Notebooks</span>
</span><span id="L-374"><a href="#L-374"><span class="linenos">374</span></a><span class="sd">        This library was first written for the Jupyter notebook environment, so all the available styles, including</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos">375</span></a><span class="sd">        the default (`red-green`), `red` and `none` work.</span>
</span><span id="L-376"><a href="#L-376"><span class="linenos">376</span></a>
</span><span id="L-377"><a href="#L-377"><span class="linenos">377</span></a><span class="sd">        ### Streamlit</span>
</span><span id="L-378"><a href="#L-378"><span class="linenos">378</span></a>
</span><span id="L-379"><a href="#L-379"><span class="linenos">379</span></a><span class="sd">        Try this:</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos">380</span></a>
</span><span id="L-381"><a href="#L-381"><span class="linenos">381</span></a><span class="sd">        * If streamlit version is &gt;= 1.16.0, consider the markdown style &quot;streamlit&quot;</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos">382</span></a><span class="sd">        * If streamlit version is &lt; 1.16.0, consider the markdown style `ghfm`</span>
</span><span id="L-383"><a href="#L-383"><span class="linenos">383</span></a><span class="sd">        * Enable parsing of HTML. In Streamlit, you need to set the `unsafe_allow_html` argument in `st.write` or</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos">384</span></a><span class="sd">        `st.markdown` to `True`.</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos">385</span></a>
</span><span id="L-386"><a href="#L-386"><span class="linenos">386</span></a><span class="sd">        ### Colab</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos">387</span></a>
</span><span id="L-388"><a href="#L-388"><span class="linenos">388</span></a><span class="sd">        Try this:</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos">389</span></a><span class="sd">        * Use the markdown style `none` or `ghfm`</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos">390</span></a><span class="sd">        * `Redlines.output_rich` has been reported to work in Colab</span>
</span><span id="L-391"><a href="#L-391"><span class="linenos">391</span></a>
</span><span id="L-392"><a href="#L-392"><span class="linenos">392</span></a><span class="sd">        :return: The delta in Markdown format.</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos">393</span></a><span class="sd">        :rtype: str</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos">394</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-395"><a href="#L-395"><span class="linenos">395</span></a>        <span class="n">result</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos">396</span></a>
</span><span id="L-397"><a href="#L-397"><span class="linenos">397</span></a>        <span class="c1"># default_style = &quot;red_green&quot;</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos">398</span></a>
</span><span id="L-399"><a href="#L-399"><span class="linenos">399</span></a>        <span class="n">md_styles</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-400"><a href="#L-400"><span class="linenos">400</span></a>            <span class="s2">&quot;ins&quot;</span><span class="p">:</span> <span class="p">(</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos">401</span></a>                <span class="sa">f</span><span class="s2">&quot;&lt;span style=&#39;color:green;font-weight:700;&#39;&gt;&quot;</span><span class="p">,</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos">402</span></a>                <span class="s2">&quot;&lt;/span&gt;&quot;</span><span class="p">,</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos">403</span></a>            <span class="p">),</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos">404</span></a>            <span class="s2">&quot;del&quot;</span><span class="p">:</span> <span class="p">(</span>
</span><span id="L-405"><a href="#L-405"><span class="linenos">405</span></a>                <span class="sa">f</span><span class="s2">&quot;&lt;span style=&#39;color:red;font-weight:700;text-decoration:line-through;&#39;&gt;&quot;</span><span class="p">,</span>
</span><span id="L-406"><a href="#L-406"><span class="linenos">406</span></a>                <span class="s2">&quot;&lt;/span&gt;&quot;</span><span class="p">,</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos">407</span></a>            <span class="p">),</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos">408</span></a>        <span class="p">}</span>
</span><span id="L-409"><a href="#L-409"><span class="linenos">409</span></a>
</span><span id="L-410"><a href="#L-410"><span class="linenos">410</span></a>        <span class="k">if</span> <span class="s2">&quot;markdown_style&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos">411</span></a>            <span class="n">style</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s2">&quot;markdown_style&quot;</span><span class="p">]</span>
</span><span id="L-412"><a href="#L-412"><span class="linenos">412</span></a>
</span><span id="L-413"><a href="#L-413"><span class="linenos">413</span></a>            <span class="k">if</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;none&quot;</span> <span class="ow">or</span> <span class="n">style</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos">414</span></a>                <span class="n">md_styles</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;ins&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;&lt;ins&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/ins&gt;&quot;</span><span class="p">),</span> <span class="s2">&quot;del&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;&lt;del&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/del&gt;&quot;</span><span class="p">)}</span>
</span><span id="L-415"><a href="#L-415"><span class="linenos">415</span></a>            <span class="k">elif</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;red&quot;</span><span class="p">:</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos">416</span></a>                <span class="n">md_styles</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos">417</span></a>                    <span class="s2">&quot;ins&quot;</span><span class="p">:</span> <span class="p">(</span>
</span><span id="L-418"><a href="#L-418"><span class="linenos">418</span></a>                        <span class="sa">f</span><span class="s2">&quot;&lt;span style=&#39;color:red;font-weight:700;&#39;&gt;&quot;</span><span class="p">,</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos">419</span></a>                        <span class="s2">&quot;&lt;/span&gt;&quot;</span><span class="p">,</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos">420</span></a>                    <span class="p">),</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos">421</span></a>                    <span class="s2">&quot;del&quot;</span><span class="p">:</span> <span class="p">(</span>
</span><span id="L-422"><a href="#L-422"><span class="linenos">422</span></a>                        <span class="sa">f</span><span class="s2">&quot;&lt;span style=&#39;color:red;font-weight:700;text-decoration:line-through;&#39;&gt;&quot;</span><span class="p">,</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos">423</span></a>                        <span class="s2">&quot;&lt;/span&gt;&quot;</span><span class="p">,</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos">424</span></a>                    <span class="p">),</span>
</span><span id="L-425"><a href="#L-425"><span class="linenos">425</span></a>                <span class="p">}</span>
</span><span id="L-426"><a href="#L-426"><span class="linenos">426</span></a>            <span class="k">elif</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;custom_css&quot;</span><span class="p">:</span>
</span><span id="L-427"><a href="#L-427"><span class="linenos">427</span></a>                <span class="n">ins_class</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos">428</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s2">&quot;ins_class&quot;</span><span class="p">]</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos">429</span></a>                    <span class="k">if</span> <span class="s2">&quot;ins_class&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span>
</span><span id="L-430"><a href="#L-430"><span class="linenos">430</span></a>                    <span class="k">else</span> <span class="s2">&quot;redline-inserted&quot;</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos">431</span></a>                <span class="p">)</span>
</span><span id="L-432"><a href="#L-432"><span class="linenos">432</span></a>                <span class="n">del_class</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-433"><a href="#L-433"><span class="linenos">433</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s2">&quot;del_class&quot;</span><span class="p">]</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos">434</span></a>                    <span class="k">if</span> <span class="s2">&quot;del_class&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span>
</span><span id="L-435"><a href="#L-435"><span class="linenos">435</span></a>                    <span class="k">else</span> <span class="s2">&quot;redline-deleted&quot;</span>
</span><span id="L-436"><a href="#L-436"><span class="linenos">436</span></a>                <span class="p">)</span>
</span><span id="L-437"><a href="#L-437"><span class="linenos">437</span></a>
</span><span id="L-438"><a href="#L-438"><span class="linenos">438</span></a>                <span class="n">elem_attributes</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-439"><a href="#L-439"><span class="linenos">439</span></a>                    <span class="s2">&quot;ins&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;class=&#39;</span><span class="si">{</span><span class="n">ins_class</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos">440</span></a>                    <span class="s2">&quot;del&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;class=&#39;</span><span class="si">{</span><span class="n">del_class</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos">441</span></a>                <span class="p">}</span>
</span><span id="L-442"><a href="#L-442"><span class="linenos">442</span></a>
</span><span id="L-443"><a href="#L-443"><span class="linenos">443</span></a>                <span class="n">md_styles</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-444"><a href="#L-444"><span class="linenos">444</span></a>                    <span class="s2">&quot;ins&quot;</span><span class="p">:</span> <span class="p">(</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos">445</span></a>                        <span class="sa">f</span><span class="s2">&quot;&lt;span </span><span class="si">{</span><span class="n">elem_attributes</span><span class="p">[</span><span class="s1">&#39;ins&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&gt;&quot;</span><span class="p">,</span>
</span><span id="L-446"><a href="#L-446"><span class="linenos">446</span></a>                        <span class="s2">&quot;&lt;/span&gt;&quot;</span><span class="p">,</span>
</span><span id="L-447"><a href="#L-447"><span class="linenos">447</span></a>                    <span class="p">),</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos">448</span></a>                    <span class="s2">&quot;del&quot;</span><span class="p">:</span> <span class="p">(</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos">449</span></a>                        <span class="sa">f</span><span class="s2">&quot;&lt;span </span><span class="si">{</span><span class="n">elem_attributes</span><span class="p">[</span><span class="s1">&#39;del&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&gt;&quot;</span><span class="p">,</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos">450</span></a>                        <span class="s2">&quot;&lt;/span&gt;&quot;</span><span class="p">,</span>
</span><span id="L-451"><a href="#L-451"><span class="linenos">451</span></a>                    <span class="p">),</span>
</span><span id="L-452"><a href="#L-452"><span class="linenos">452</span></a>                <span class="p">}</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos">453</span></a>            <span class="k">elif</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;ghfm&quot;</span><span class="p">:</span>
</span><span id="L-454"><a href="#L-454"><span class="linenos">454</span></a>                <span class="n">md_styles</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;ins&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;**&quot;</span><span class="p">,</span> <span class="s2">&quot;**&quot;</span><span class="p">),</span> <span class="s2">&quot;del&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;~~&quot;</span><span class="p">,</span> <span class="s2">&quot;~~&quot;</span><span class="p">)}</span>
</span><span id="L-455"><a href="#L-455"><span class="linenos">455</span></a>            <span class="k">elif</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;bbcode&quot;</span><span class="p">:</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos">456</span></a>                <span class="n">md_styles</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos">457</span></a>                    <span class="s2">&quot;ins&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;[b][color=green]&quot;</span><span class="p">,</span> <span class="s2">&quot;[/color][/b]&quot;</span><span class="p">),</span>
</span><span id="L-458"><a href="#L-458"><span class="linenos">458</span></a>                    <span class="s2">&quot;del&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;[s][color=red]&quot;</span><span class="p">,</span> <span class="s2">&quot;[/color][/s]&quot;</span><span class="p">),</span>
</span><span id="L-459"><a href="#L-459"><span class="linenos">459</span></a>                <span class="p">}</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos">460</span></a>            <span class="k">elif</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;streamlit&quot;</span><span class="p">:</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos">461</span></a>                <span class="n">md_styles</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;ins&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;**:green[&quot;</span><span class="p">,</span> <span class="s2">&quot;]** &quot;</span><span class="p">),</span> <span class="s2">&quot;del&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;~~:red[&quot;</span><span class="p">,</span> <span class="s2">&quot;]~~ &quot;</span><span class="p">)}</span>
</span><span id="L-462"><a href="#L-462"><span class="linenos">462</span></a>
</span><span id="L-463"><a href="#L-463"><span class="linenos">463</span></a>        <span class="k">for</span> <span class="n">diff_op</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_diff_ops</span><span class="p">:</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos">464</span></a>            <span class="n">tag</span><span class="p">,</span> <span class="n">i1</span><span class="p">,</span> <span class="n">i2</span><span class="p">,</span> <span class="n">j1</span><span class="p">,</span> <span class="n">j2</span> <span class="o">=</span> <span class="n">diff_op</span><span class="o">.</span><span class="n">opcodes</span>
</span><span id="L-465"><a href="#L-465"><span class="linenos">465</span></a>            <span class="n">source_tokens</span> <span class="o">=</span> <span class="n">diff_op</span><span class="o">.</span><span class="n">source_chunk</span><span class="o">.</span><span class="n">text</span>
</span><span id="L-466"><a href="#L-466"><span class="linenos">466</span></a>            <span class="n">test_tokens</span> <span class="o">=</span> <span class="n">diff_op</span><span class="o">.</span><span class="n">test_chunk</span><span class="o">.</span><span class="n">text</span>
</span><span id="L-467"><a href="#L-467"><span class="linenos">467</span></a>
</span><span id="L-468"><a href="#L-468"><span class="linenos">468</span></a>            <span class="k">if</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;equal&quot;</span><span class="p">:</span>
</span><span id="L-469"><a href="#L-469"><span class="linenos">469</span></a>                <span class="n">temp_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">source_tokens</span><span class="p">[</span><span class="n">i1</span><span class="p">:</span><span class="n">i2</span><span class="p">])</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos">470</span></a>                <span class="n">temp_str</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;¶ &quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">temp_str</span><span class="p">)</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos">471</span></a>                <span class="c1"># here we use &#39;¶ &#39; instead of &#39; ¶ &#39;, because the leading space will be included in the previous token,</span>
</span><span id="L-472"><a href="#L-472"><span class="linenos">472</span></a>                <span class="c1"># according to tokenizer = re.compile(r&quot;((?:[^()\s]+|[().?!-])\s*)&quot;)</span>
</span><span id="L-473"><a href="#L-473"><span class="linenos">473</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp_str</span><span class="p">)</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos">474</span></a>            <span class="k">elif</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;insert&quot;</span><span class="p">:</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos">475</span></a>                <span class="n">temp_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">test_tokens</span><span class="p">[</span><span class="n">j1</span><span class="p">:</span><span class="n">j2</span><span class="p">])</span>
</span><span id="L-476"><a href="#L-476"><span class="linenos">476</span></a>                <span class="n">splits</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;¶ &quot;</span><span class="p">,</span> <span class="n">temp_str</span><span class="p">)</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos">477</span></a>                <span class="k">for</span> <span class="n">split</span> <span class="ow">in</span> <span class="n">splits</span><span class="p">:</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos">478</span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">md_styles</span><span class="p">[</span><span class="s1">&#39;ins&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}{</span><span class="n">split</span><span class="si">}{</span><span class="n">md_styles</span><span class="p">[</span><span class="s1">&#39;ins&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-479"><a href="#L-479"><span class="linenos">479</span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos">480</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">splits</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos">481</span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span id="L-482"><a href="#L-482"><span class="linenos">482</span></a>            <span class="k">elif</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;delete&quot;</span><span class="p">:</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos">483</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-484"><a href="#L-484"><span class="linenos">484</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">md_styles</span><span class="p">[</span><span class="s1">&#39;del&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}{</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">source_tokens</span><span class="p">[</span><span class="n">i1</span><span class="p">:</span><span class="n">i2</span><span class="p">])</span><span class="si">}{</span><span class="n">md_styles</span><span class="p">[</span><span class="s1">&#39;del&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos">485</span></a>                <span class="p">)</span>
</span><span id="L-486"><a href="#L-486"><span class="linenos">486</span></a>                <span class="c1"># for &#39;delete&#39;, we make no change, because otherwise there will be two times &#39;\n\n&#39; than the original</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos">487</span></a>                <span class="c1"># text.</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos">488</span></a>            <span class="k">elif</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;replace&quot;</span><span class="p">:</span>
</span><span id="L-489"><a href="#L-489"><span class="linenos">489</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos">490</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">md_styles</span><span class="p">[</span><span class="s1">&#39;del&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}{</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">source_tokens</span><span class="p">[</span><span class="n">i1</span><span class="p">:</span><span class="n">i2</span><span class="p">])</span><span class="si">}{</span><span class="n">md_styles</span><span class="p">[</span><span class="s1">&#39;del&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-491"><a href="#L-491"><span class="linenos">491</span></a>                <span class="p">)</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos">492</span></a>                <span class="n">temp_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">test_tokens</span><span class="p">[</span><span class="n">j1</span><span class="p">:</span><span class="n">j2</span><span class="p">])</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos">493</span></a>                <span class="n">splits</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;¶ &quot;</span><span class="p">,</span> <span class="n">temp_str</span><span class="p">)</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos">494</span></a>                <span class="k">for</span> <span class="n">split</span> <span class="ow">in</span> <span class="n">splits</span><span class="p">:</span>
</span><span id="L-495"><a href="#L-495"><span class="linenos">495</span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">md_styles</span><span class="p">[</span><span class="s1">&#39;ins&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}{</span><span class="n">split</span><span class="si">}{</span><span class="n">md_styles</span><span class="p">[</span><span class="s1">&#39;ins&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-496"><a href="#L-496"><span class="linenos">496</span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos">497</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">splits</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-498"><a href="#L-498"><span class="linenos">498</span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos">499</span></a>
</span><span id="L-500"><a href="#L-500"><span class="linenos">500</span></a>        <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span><span id="L-501"><a href="#L-501"><span class="linenos">501</span></a>
</span><span id="L-502"><a href="#L-502"><span class="linenos">502</span></a>    <span class="nd">@property</span>
</span><span id="L-503"><a href="#L-503"><span class="linenos">503</span></a>    <span class="k">def</span> <span class="nf">output_rich</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Text</span><span class="p">:</span>
</span><span id="L-504"><a href="#L-504"><span class="linenos">504</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos">505</span></a><span class="sd">        Returns the delta in text with colors/style for the console.</span>
</span><span id="L-506"><a href="#L-506"><span class="linenos">506</span></a>
</span><span id="L-507"><a href="#L-507"><span class="linenos">507</span></a><span class="sd">        :return: The delta in text with colors/style for the console.</span>
</span><span id="L-508"><a href="#L-508"><span class="linenos">508</span></a><span class="sd">        :rtype: Text</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos">509</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-510"><a href="#L-510"><span class="linenos">510</span></a>        <span class="n">console_text</span> <span class="o">=</span> <span class="n">Text</span><span class="p">()</span>
</span><span id="L-511"><a href="#L-511"><span class="linenos">511</span></a>
</span><span id="L-512"><a href="#L-512"><span class="linenos">512</span></a>        <span class="k">for</span> <span class="n">diff_op</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_diff_ops</span><span class="p">:</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos">513</span></a>            <span class="n">tag</span><span class="p">,</span> <span class="n">i1</span><span class="p">,</span> <span class="n">i2</span><span class="p">,</span> <span class="n">j1</span><span class="p">,</span> <span class="n">j2</span> <span class="o">=</span> <span class="n">diff_op</span><span class="o">.</span><span class="n">opcodes</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos">514</span></a>            <span class="n">source_tokens</span> <span class="o">=</span> <span class="n">diff_op</span><span class="o">.</span><span class="n">source_chunk</span><span class="o">.</span><span class="n">text</span>
</span><span id="L-515"><a href="#L-515"><span class="linenos">515</span></a>            <span class="n">test_tokens</span> <span class="o">=</span> <span class="n">diff_op</span><span class="o">.</span><span class="n">test_chunk</span><span class="o">.</span><span class="n">text</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos">516</span></a>
</span><span id="L-517"><a href="#L-517"><span class="linenos">517</span></a>            <span class="k">if</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;equal&quot;</span><span class="p">:</span>
</span><span id="L-518"><a href="#L-518"><span class="linenos">518</span></a>                <span class="n">temp_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">source_tokens</span><span class="p">[</span><span class="n">i1</span><span class="p">:</span><span class="n">i2</span><span class="p">])</span>
</span><span id="L-519"><a href="#L-519"><span class="linenos">519</span></a>                <span class="n">temp_str</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;¶ &quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">temp_str</span><span class="p">)</span>
</span><span id="L-520"><a href="#L-520"><span class="linenos">520</span></a>                <span class="n">console_text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp_str</span><span class="p">)</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos">521</span></a>            <span class="k">elif</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;insert&quot;</span><span class="p">:</span>
</span><span id="L-522"><a href="#L-522"><span class="linenos">522</span></a>                <span class="n">temp_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">test_tokens</span><span class="p">[</span><span class="n">j1</span><span class="p">:</span><span class="n">j2</span><span class="p">])</span>
</span><span id="L-523"><a href="#L-523"><span class="linenos">523</span></a>                <span class="n">splits</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;¶ &quot;</span><span class="p">,</span> <span class="n">temp_str</span><span class="p">)</span>
</span><span id="L-524"><a href="#L-524"><span class="linenos">524</span></a>                <span class="k">for</span> <span class="n">split</span> <span class="ow">in</span> <span class="n">splits</span><span class="p">:</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos">525</span></a>                    <span class="n">console_text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">split</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">)</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos">526</span></a>            <span class="k">elif</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;delete&quot;</span><span class="p">:</span>
</span><span id="L-527"><a href="#L-527"><span class="linenos">527</span></a>                <span class="n">console_text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">source_tokens</span><span class="p">[</span><span class="n">i1</span><span class="p">:</span><span class="n">i2</span><span class="p">]),</span> <span class="s2">&quot;strike red&quot;</span><span class="p">)</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos">528</span></a>            <span class="k">elif</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;replace&quot;</span><span class="p">:</span>
</span><span id="L-529"><a href="#L-529"><span class="linenos">529</span></a>                <span class="n">console_text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">source_tokens</span><span class="p">[</span><span class="n">i1</span><span class="p">:</span><span class="n">i2</span><span class="p">]),</span> <span class="s2">&quot;strike red&quot;</span><span class="p">)</span>
</span><span id="L-530"><a href="#L-530"><span class="linenos">530</span></a>                <span class="n">temp_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">test_tokens</span><span class="p">[</span><span class="n">j1</span><span class="p">:</span><span class="n">j2</span><span class="p">])</span>
</span><span id="L-531"><a href="#L-531"><span class="linenos">531</span></a>                <span class="n">splits</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;¶ &quot;</span><span class="p">,</span> <span class="n">temp_str</span><span class="p">)</span>
</span><span id="L-532"><a href="#L-532"><span class="linenos">532</span></a>                <span class="k">for</span> <span class="n">split</span> <span class="ow">in</span> <span class="n">splits</span><span class="p">:</span>
</span><span id="L-533"><a href="#L-533"><span class="linenos">533</span></a>                    <span class="n">console_text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">split</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">)</span>
</span><span id="L-534"><a href="#L-534"><span class="linenos">534</span></a>
</span><span id="L-535"><a href="#L-535"><span class="linenos">535</span></a>        <span class="k">return</span> <span class="n">console_text</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos">536</span></a>
</span><span id="L-537"><a href="#L-537"><span class="linenos">537</span></a>    <span class="k">def</span> <span class="nf">compare</span><span class="p">(</span>
</span><span id="L-538"><a href="#L-538"><span class="linenos">538</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-539"><a href="#L-539"><span class="linenos">539</span></a>        <span class="n">test</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-540"><a href="#L-540"><span class="linenos">540</span></a>        <span class="n">output</span><span class="p">:</span> <span class="n">OutputTypeLike</span> <span class="o">=</span> <span class="n">OutputType</span><span class="o">.</span><span class="n">MARKDOWN</span><span class="p">,</span>
</span><span id="L-541"><a href="#L-541"><span class="linenos">541</span></a>        <span class="o">**</span><span class="n">options</span><span class="p">:</span> <span class="n">Unpack</span><span class="p">[</span><span class="n">RedlinesOptions</span><span class="p">],</span>
</span><span id="L-542"><a href="#L-542"><span class="linenos">542</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Text</span> <span class="o">|</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-543"><a href="#L-543"><span class="linenos">543</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-544"><a href="#L-544"><span class="linenos">544</span></a><span class="sd">        Compare `test` with `source`, and produce a delta in a format specified by `output`.</span>
</span><span id="L-545"><a href="#L-545"><span class="linenos">545</span></a>
</span><span id="L-546"><a href="#L-546"><span class="linenos">546</span></a><span class="sd">        :param test: Optional test string to compare. If None, uses the test string provided during initialisation.</span>
</span><span id="L-547"><a href="#L-547"><span class="linenos">547</span></a><span class="sd">        :type test: str | None</span>
</span><span id="L-548"><a href="#L-548"><span class="linenos">548</span></a><span class="sd">        :param output: The format which the delta should be produced. Currently, &quot;markdown&quot; and &quot;rich&quot; are supported. Defaults to &quot;markdown&quot;.</span>
</span><span id="L-549"><a href="#L-549"><span class="linenos">549</span></a><span class="sd">        :type output: OutputTypeLike</span>
</span><span id="L-550"><a href="#L-550"><span class="linenos">550</span></a><span class="sd">        :param options: Additional options for comparison and output formatting.</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos">551</span></a><span class="sd">        :type options: RedlinesOptions</span>
</span><span id="L-552"><a href="#L-552"><span class="linenos">552</span></a><span class="sd">        :return: The delta in the format specified by `output`.</span>
</span><span id="L-553"><a href="#L-553"><span class="linenos">553</span></a><span class="sd">        :rtype: Text | str</span>
</span><span id="L-554"><a href="#L-554"><span class="linenos">554</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos">555</span></a>        <span class="k">if</span> <span class="n">options</span><span class="p">:</span>
</span><span id="L-556"><a href="#L-556"><span class="linenos">556</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="n">options</span>
</span><span id="L-557"><a href="#L-557"><span class="linenos">557</span></a>
</span><span id="L-558"><a href="#L-558"><span class="linenos">558</span></a>        <span class="k">if</span> <span class="n">test</span><span class="p">:</span>
</span><span id="L-559"><a href="#L-559"><span class="linenos">559</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test</span> <span class="ow">and</span> <span class="n">test</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test</span><span class="p">:</span>
</span><span id="L-560"><a href="#L-560"><span class="linenos">560</span></a>                <span class="c1"># If we&#39;ve already processed this test string, no need to reprocess</span>
</span><span id="L-561"><a href="#L-561"><span class="linenos">561</span></a>                <span class="k">pass</span>
</span><span id="L-562"><a href="#L-562"><span class="linenos">562</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-563"><a href="#L-563"><span class="linenos">563</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">test</span> <span class="o">=</span> <span class="n">test</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos">564</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-565"><a href="#L-565"><span class="linenos">565</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-566"><a href="#L-566"><span class="linenos">566</span></a>                <span class="s2">&quot;No test string was provided when the function was called, or during initialisation.&quot;</span>
</span><span id="L-567"><a href="#L-567"><span class="linenos">567</span></a>            <span class="p">)</span>
</span><span id="L-568"><a href="#L-568"><span class="linenos">568</span></a>
</span><span id="L-569"><a href="#L-569"><span class="linenos">569</span></a>        <span class="k">if</span> <span class="n">output</span> <span class="o">==</span> <span class="n">OutputType</span><span class="o">.</span><span class="n">MARKDOWN</span><span class="p">:</span>
</span><span id="L-570"><a href="#L-570"><span class="linenos">570</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_markdown</span>
</span><span id="L-571"><a href="#L-571"><span class="linenos">571</span></a>        <span class="k">elif</span> <span class="n">output</span> <span class="o">==</span> <span class="n">OutputType</span><span class="o">.</span><span class="n">RICH</span><span class="p">:</span>
</span><span id="L-572"><a href="#L-572"><span class="linenos">572</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_rich</span>
</span><span id="L-573"><a href="#L-573"><span class="linenos">573</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_markdown</span>
</span></pre></div>


            </section>
                <section id="Redlines">
                            <input id="Redlines-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Redlines</span>:

                <label class="view-source-button" for="Redlines-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Redlines"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Redlines-33"><a href="#Redlines-33"><span class="linenos"> 33</span></a><span class="k">class</span> <span class="nc">Redlines</span><span class="p">:</span>
</span><span id="Redlines-34"><a href="#Redlines-34"><span class="linenos"> 34</span></a>    <span class="n">_source</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Redlines-35"><a href="#Redlines-35"><span class="linenos"> 35</span></a>    <span class="n">_test</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Redlines-36"><a href="#Redlines-36"><span class="linenos"> 36</span></a>    <span class="n">_seq1</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Redlines-37"><a href="#Redlines-37"><span class="linenos"> 37</span></a>    <span class="n">_seq2</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Redlines-38"><a href="#Redlines-38"><span class="linenos"> 38</span></a>    <span class="n">_diff_operations</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">DiffOperation</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Redlines-39"><a href="#Redlines-39"><span class="linenos"> 39</span></a>
</span><span id="Redlines-40"><a href="#Redlines-40"><span class="linenos"> 40</span></a>    <span class="nd">@property</span>
</span><span id="Redlines-41"><a href="#Redlines-41"><span class="linenos"> 41</span></a>    <span class="k">def</span> <span class="nf">source</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Redlines-42"><a href="#Redlines-42"><span class="linenos"> 42</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Redlines-43"><a href="#Redlines-43"><span class="linenos"> 43</span></a><span class="sd">        Get the source text to be used as a basis for comparison.</span>
</span><span id="Redlines-44"><a href="#Redlines-44"><span class="linenos"> 44</span></a>
</span><span id="Redlines-45"><a href="#Redlines-45"><span class="linenos"> 45</span></a><span class="sd">        :return: The source text to be used as a basis for comparison.</span>
</span><span id="Redlines-46"><a href="#Redlines-46"><span class="linenos"> 46</span></a><span class="sd">        :rtype: str</span>
</span><span id="Redlines-47"><a href="#Redlines-47"><span class="linenos"> 47</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Redlines-48"><a href="#Redlines-48"><span class="linenos"> 48</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_source</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Redlines-49"><a href="#Redlines-49"><span class="linenos"> 49</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No source string was provided.&quot;</span><span class="p">)</span>
</span><span id="Redlines-50"><a href="#Redlines-50"><span class="linenos"> 50</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_source</span>
</span><span id="Redlines-51"><a href="#Redlines-51"><span class="linenos"> 51</span></a>
</span><span id="Redlines-52"><a href="#Redlines-52"><span class="linenos"> 52</span></a>    <span class="nd">@source</span><span class="o">.</span><span class="n">setter</span>
</span><span id="Redlines-53"><a href="#Redlines-53"><span class="linenos"> 53</span></a>    <span class="k">def</span> <span class="nf">source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Document</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Redlines-54"><a href="#Redlines-54"><span class="linenos"> 54</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_source</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">text</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Document</span><span class="p">)</span> <span class="k">else</span> <span class="n">value</span>
</span><span id="Redlines-55"><a href="#Redlines-55"><span class="linenos"> 55</span></a>
</span><span id="Redlines-56"><a href="#Redlines-56"><span class="linenos"> 56</span></a>        <span class="c1"># If test is already set, process the new source against it</span>
</span><span id="Redlines-57"><a href="#Redlines-57"><span class="linenos"> 57</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Redlines-58"><a href="#Redlines-58"><span class="linenos"> 58</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_diff_operations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processor</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_source</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test</span><span class="p">)</span>
</span><span id="Redlines-59"><a href="#Redlines-59"><span class="linenos"> 59</span></a>
</span><span id="Redlines-60"><a href="#Redlines-60"><span class="linenos"> 60</span></a>    <span class="nd">@property</span>
</span><span id="Redlines-61"><a href="#Redlines-61"><span class="linenos"> 61</span></a>    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Redlines-62"><a href="#Redlines-62"><span class="linenos"> 62</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Redlines-63"><a href="#Redlines-63"><span class="linenos"> 63</span></a><span class="sd">        Get the text to be compared with the source.</span>
</span><span id="Redlines-64"><a href="#Redlines-64"><span class="linenos"> 64</span></a>
</span><span id="Redlines-65"><a href="#Redlines-65"><span class="linenos"> 65</span></a><span class="sd">        :return: The text to be compared with the source.</span>
</span><span id="Redlines-66"><a href="#Redlines-66"><span class="linenos"> 66</span></a><span class="sd">        :rtype: str</span>
</span><span id="Redlines-67"><a href="#Redlines-67"><span class="linenos"> 67</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Redlines-68"><a href="#Redlines-68"><span class="linenos"> 68</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Redlines-69"><a href="#Redlines-69"><span class="linenos"> 69</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No test string was provided.&quot;</span><span class="p">)</span>
</span><span id="Redlines-70"><a href="#Redlines-70"><span class="linenos"> 70</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test</span>
</span><span id="Redlines-71"><a href="#Redlines-71"><span class="linenos"> 71</span></a>
</span><span id="Redlines-72"><a href="#Redlines-72"><span class="linenos"> 72</span></a>    <span class="nd">@test</span><span class="o">.</span><span class="n">setter</span>
</span><span id="Redlines-73"><a href="#Redlines-73"><span class="linenos"> 73</span></a>    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Document</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Redlines-74"><a href="#Redlines-74"><span class="linenos"> 74</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_test</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">text</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Document</span><span class="p">)</span> <span class="k">else</span> <span class="n">value</span>
</span><span id="Redlines-75"><a href="#Redlines-75"><span class="linenos"> 75</span></a>
</span><span id="Redlines-76"><a href="#Redlines-76"><span class="linenos"> 76</span></a>        <span class="c1"># Process the text against the source</span>
</span><span id="Redlines-77"><a href="#Redlines-77"><span class="linenos"> 77</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_source</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Redlines-78"><a href="#Redlines-78"><span class="linenos"> 78</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_diff_operations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processor</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_source</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test</span><span class="p">)</span>
</span><span id="Redlines-79"><a href="#Redlines-79"><span class="linenos"> 79</span></a>
</span><span id="Redlines-80"><a href="#Redlines-80"><span class="linenos"> 80</span></a>    <span class="nd">@property</span>
</span><span id="Redlines-81"><a href="#Redlines-81"><span class="linenos"> 81</span></a>    <span class="k">def</span> <span class="nf">_diff_ops</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">DiffOperation</span><span class="p">]:</span>
</span><span id="Redlines-82"><a href="#Redlines-82"><span class="linenos"> 82</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Redlines-83"><a href="#Redlines-83"><span class="linenos"> 83</span></a><span class="sd">        Internal property: Return the list of DiffOperation objects (includes &#39;equal&#39; operations).</span>
</span><span id="Redlines-84"><a href="#Redlines-84"><span class="linenos"> 84</span></a><span class="sd">        For internal rendering code.</span>
</span><span id="Redlines-85"><a href="#Redlines-85"><span class="linenos"> 85</span></a>
</span><span id="Redlines-86"><a href="#Redlines-86"><span class="linenos"> 86</span></a><span class="sd">        :return: List of DiffOperation objects</span>
</span><span id="Redlines-87"><a href="#Redlines-87"><span class="linenos"> 87</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Redlines-88"><a href="#Redlines-88"><span class="linenos"> 88</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_diff_operations</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Redlines-89"><a href="#Redlines-89"><span class="linenos"> 89</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="Redlines-90"><a href="#Redlines-90"><span class="linenos"> 90</span></a>                <span class="s2">&quot;No test string was provided when the function was called, or during initialisation.&quot;</span>
</span><span id="Redlines-91"><a href="#Redlines-91"><span class="linenos"> 91</span></a>            <span class="p">)</span>
</span><span id="Redlines-92"><a href="#Redlines-92"><span class="linenos"> 92</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_diff_operations</span>
</span><span id="Redlines-93"><a href="#Redlines-93"><span class="linenos"> 93</span></a>
</span><span id="Redlines-94"><a href="#Redlines-94"><span class="linenos"> 94</span></a>    <span class="nd">@property</span>
</span><span id="Redlines-95"><a href="#Redlines-95"><span class="linenos"> 95</span></a>    <span class="k">def</span> <span class="nf">redlines</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Redline</span><span class="p">]:</span>
</span><span id="Redlines-96"><a href="#Redlines-96"><span class="linenos"> 96</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Redlines-97"><a href="#Redlines-97"><span class="linenos"> 97</span></a><span class="sd">        Return the list of Redline objects representing actual changes between source and test.</span>
</span><span id="Redlines-98"><a href="#Redlines-98"><span class="linenos"> 98</span></a>
</span><span id="Redlines-99"><a href="#Redlines-99"><span class="linenos"> 99</span></a><span class="sd">        This is an alias for the `changes` property and provides the same functionality.</span>
</span><span id="Redlines-100"><a href="#Redlines-100"><span class="linenos">100</span></a><span class="sd">        Only actual changes are returned (equal operations are excluded).</span>
</span><span id="Redlines-101"><a href="#Redlines-101"><span class="linenos">101</span></a>
</span><span id="Redlines-102"><a href="#Redlines-102"><span class="linenos">102</span></a><span class="sd">        :return: List of Redline objects</span>
</span><span id="Redlines-103"><a href="#Redlines-103"><span class="linenos">103</span></a><span class="sd">        :rtype: list[Redline]</span>
</span><span id="Redlines-104"><a href="#Redlines-104"><span class="linenos">104</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Redlines-105"><a href="#Redlines-105"><span class="linenos">105</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">changes</span>
</span><span id="Redlines-106"><a href="#Redlines-106"><span class="linenos">106</span></a>
</span><span id="Redlines-107"><a href="#Redlines-107"><span class="linenos">107</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="Redlines-108"><a href="#Redlines-108"><span class="linenos">108</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Redlines-109"><a href="#Redlines-109"><span class="linenos">109</span></a>        <span class="n">source</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Document</span><span class="p">,</span>
</span><span id="Redlines-110"><a href="#Redlines-110"><span class="linenos">110</span></a>        <span class="n">test</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Document</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Redlines-111"><a href="#Redlines-111"><span class="linenos">111</span></a>        <span class="o">**</span><span class="n">options</span><span class="p">:</span> <span class="n">Unpack</span><span class="p">[</span><span class="n">RedlinesOptions</span><span class="p">],</span>
</span><span id="Redlines-112"><a href="#Redlines-112"><span class="linenos">112</span></a>    <span class="p">):</span>
</span><span id="Redlines-113"><a href="#Redlines-113"><span class="linenos">113</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Redlines-114"><a href="#Redlines-114"><span class="linenos">114</span></a><span class="sd">        Redline is a class used to compare text, and producing human-readable differences or deltas</span>
</span><span id="Redlines-115"><a href="#Redlines-115"><span class="linenos">115</span></a><span class="sd">        which look like track changes in Microsoft Word.</span>
</span><span id="Redlines-116"><a href="#Redlines-116"><span class="linenos">116</span></a>
</span><span id="Redlines-117"><a href="#Redlines-117"><span class="linenos">117</span></a><span class="sd">        ```python</span>
</span><span id="Redlines-118"><a href="#Redlines-118"><span class="linenos">118</span></a><span class="sd">        # import the class</span>
</span><span id="Redlines-119"><a href="#Redlines-119"><span class="linenos">119</span></a><span class="sd">        from redlines import Redlines</span>
</span><span id="Redlines-120"><a href="#Redlines-120"><span class="linenos">120</span></a>
</span><span id="Redlines-121"><a href="#Redlines-121"><span class="linenos">121</span></a><span class="sd">        # Create a Redlines object using the two strings to compare</span>
</span><span id="Redlines-122"><a href="#Redlines-122"><span class="linenos">122</span></a><span class="sd">        test = Redlines(</span>
</span><span id="Redlines-123"><a href="#Redlines-123"><span class="linenos">123</span></a><span class="sd">            &quot;The quick brown fox jumps over the lazy dog.&quot;,</span>
</span><span id="Redlines-124"><a href="#Redlines-124"><span class="linenos">124</span></a><span class="sd">            &quot;The quick brown fox walks past the lazy dog.&quot;,</span>
</span><span id="Redlines-125"><a href="#Redlines-125"><span class="linenos">125</span></a><span class="sd">        )</span>
</span><span id="Redlines-126"><a href="#Redlines-126"><span class="linenos">126</span></a>
</span><span id="Redlines-127"><a href="#Redlines-127"><span class="linenos">127</span></a><span class="sd">        # This produces an output in Markdown format</span>
</span><span id="Redlines-128"><a href="#Redlines-128"><span class="linenos">128</span></a><span class="sd">        test.output_markdown</span>
</span><span id="Redlines-129"><a href="#Redlines-129"><span class="linenos">129</span></a><span class="sd">        ```</span>
</span><span id="Redlines-130"><a href="#Redlines-130"><span class="linenos">130</span></a>
</span><span id="Redlines-131"><a href="#Redlines-131"><span class="linenos">131</span></a><span class="sd">        Besides strings, Redlines can also receive an input in another format if it is supported by the Document class</span>
</span><span id="Redlines-132"><a href="#Redlines-132"><span class="linenos">132</span></a>
</span><span id="Redlines-133"><a href="#Redlines-133"><span class="linenos">133</span></a><span class="sd">        ```python</span>
</span><span id="Redlines-134"><a href="#Redlines-134"><span class="linenos">134</span></a><span class="sd">        from redlines import PlainTextFile</span>
</span><span id="Redlines-135"><a href="#Redlines-135"><span class="linenos">135</span></a>
</span><span id="Redlines-136"><a href="#Redlines-136"><span class="linenos">136</span></a><span class="sd">        source = PlainTextFile(&quot;tests/documents/PlainTextFile/source.txt&quot;)</span>
</span><span id="Redlines-137"><a href="#Redlines-137"><span class="linenos">137</span></a><span class="sd">        test = PlainTextFile(&quot;tests/documents/PlainTextFile/test.txt&quot;)</span>
</span><span id="Redlines-138"><a href="#Redlines-138"><span class="linenos">138</span></a>
</span><span id="Redlines-139"><a href="#Redlines-139"><span class="linenos">139</span></a><span class="sd">        redline = Redlines(source, test)</span>
</span><span id="Redlines-140"><a href="#Redlines-140"><span class="linenos">140</span></a><span class="sd">        assert (</span>
</span><span id="Redlines-141"><a href="#Redlines-141"><span class="linenos">141</span></a><span class="sd">            redline.output_markdown</span>
</span><span id="Redlines-142"><a href="#Redlines-142"><span class="linenos">142</span></a><span class="sd">            == &quot;The quick brown fox &lt;span style=&#39;color:red;font-weight:700;text-decoration:line-through;&#39;&gt;jumps over &lt;/span&gt;&lt;span style=&#39;color:green;font-weight:700;&#39;&gt;walks past &lt;/span&gt;the lazy dog.&quot;</span>
</span><span id="Redlines-143"><a href="#Redlines-143"><span class="linenos">143</span></a><span class="sd">        )</span>
</span><span id="Redlines-144"><a href="#Redlines-144"><span class="linenos">144</span></a>
</span><span id="Redlines-145"><a href="#Redlines-145"><span class="linenos">145</span></a><span class="sd">        ```</span>
</span><span id="Redlines-146"><a href="#Redlines-146"><span class="linenos">146</span></a>
</span><span id="Redlines-147"><a href="#Redlines-147"><span class="linenos">147</span></a><span class="sd">        :param source: The source text to be used as a basis for comparison.</span>
</span><span id="Redlines-148"><a href="#Redlines-148"><span class="linenos">148</span></a><span class="sd">        :type source: str | Document</span>
</span><span id="Redlines-149"><a href="#Redlines-149"><span class="linenos">149</span></a><span class="sd">        :param test: Optional test text to compare with the source.</span>
</span><span id="Redlines-150"><a href="#Redlines-150"><span class="linenos">150</span></a><span class="sd">        :type test: str | Document | None</span>
</span><span id="Redlines-151"><a href="#Redlines-151"><span class="linenos">151</span></a><span class="sd">        :param options: Additional options for comparison and output formatting.</span>
</span><span id="Redlines-152"><a href="#Redlines-152"><span class="linenos">152</span></a><span class="sd">        :type options: RedlinesOptions</span>
</span><span id="Redlines-153"><a href="#Redlines-153"><span class="linenos">153</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Redlines-154"><a href="#Redlines-154"><span class="linenos">154</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">processor</span> <span class="o">=</span> <span class="n">WholeDocumentProcessor</span><span class="p">()</span>
</span><span id="Redlines-155"><a href="#Redlines-155"><span class="linenos">155</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">text</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">Document</span><span class="p">)</span> <span class="k">else</span> <span class="n">source</span>
</span><span id="Redlines-156"><a href="#Redlines-156"><span class="linenos">156</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="n">options</span>
</span><span id="Redlines-157"><a href="#Redlines-157"><span class="linenos">157</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_diff_operations</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Redlines-158"><a href="#Redlines-158"><span class="linenos">158</span></a>        <span class="k">if</span> <span class="n">test</span><span class="p">:</span>
</span><span id="Redlines-159"><a href="#Redlines-159"><span class="linenos">159</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">test</span> <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="n">text</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">Document</span><span class="p">)</span> <span class="k">else</span> <span class="n">test</span>
</span><span id="Redlines-160"><a href="#Redlines-160"><span class="linenos">160</span></a>            <span class="c1"># self.compare()</span>
</span><span id="Redlines-161"><a href="#Redlines-161"><span class="linenos">161</span></a>
</span><span id="Redlines-162"><a href="#Redlines-162"><span class="linenos">162</span></a>    <span class="nd">@property</span>
</span><span id="Redlines-163"><a href="#Redlines-163"><span class="linenos">163</span></a>    <span class="k">def</span> <span class="nf">opcodes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]:</span>
</span><span id="Redlines-164"><a href="#Redlines-164"><span class="linenos">164</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Redlines-165"><a href="#Redlines-165"><span class="linenos">165</span></a><span class="sd">        Return list of 5-tuples describing how to turn `source` into `test`.</span>
</span><span id="Redlines-166"><a href="#Redlines-166"><span class="linenos">166</span></a><span class="sd">        Similar to [`SequenceMatcher.get_opcodes`](https://docs.python.org/3/library/difflib.html#difflib.SequenceMatcher.get_opcodes).</span>
</span><span id="Redlines-167"><a href="#Redlines-167"><span class="linenos">167</span></a>
</span><span id="Redlines-168"><a href="#Redlines-168"><span class="linenos">168</span></a><span class="sd">        ```pycon</span>
</span><span id="Redlines-169"><a href="#Redlines-169"><span class="linenos">169</span></a><span class="sd">        &gt;&gt;&gt; test_string_1 = &#39;The quick brown fox jumps over the lazy dog.&#39;</span>
</span><span id="Redlines-170"><a href="#Redlines-170"><span class="linenos">170</span></a><span class="sd">        ... test_string_2 = &#39;The quick brown fox walks past the lazy dog.&#39;</span>
</span><span id="Redlines-171"><a href="#Redlines-171"><span class="linenos">171</span></a><span class="sd">        ... s = Redlines(test_string_1, test_string_2)</span>
</span><span id="Redlines-172"><a href="#Redlines-172"><span class="linenos">172</span></a><span class="sd">        ... s.opcodes</span>
</span><span id="Redlines-173"><a href="#Redlines-173"><span class="linenos">173</span></a><span class="sd">        [(&#39;equal&#39;, 0, 4, 0, 4), (&#39;replace&#39;, 4, 6, 4, 6), (&#39;equal&#39;, 6, 9, 6, 9)]</span>
</span><span id="Redlines-174"><a href="#Redlines-174"><span class="linenos">174</span></a><span class="sd">        ```</span>
</span><span id="Redlines-175"><a href="#Redlines-175"><span class="linenos">175</span></a>
</span><span id="Redlines-176"><a href="#Redlines-176"><span class="linenos">176</span></a><span class="sd">        :return: List of 5-tuples describing how to turn `source` into `test`.</span>
</span><span id="Redlines-177"><a href="#Redlines-177"><span class="linenos">177</span></a><span class="sd">        :rtype: list[tuple[str, int, int, int, int]]</span>
</span><span id="Redlines-178"><a href="#Redlines-178"><span class="linenos">178</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Redlines-179"><a href="#Redlines-179"><span class="linenos">179</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">diff_op</span><span class="o">.</span><span class="n">opcodes</span> <span class="k">for</span> <span class="n">diff_op</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_diff_ops</span><span class="p">]</span>
</span><span id="Redlines-180"><a href="#Redlines-180"><span class="linenos">180</span></a>
</span><span id="Redlines-181"><a href="#Redlines-181"><span class="linenos">181</span></a>    <span class="nd">@property</span>
</span><span id="Redlines-182"><a href="#Redlines-182"><span class="linenos">182</span></a>    <span class="k">def</span> <span class="nf">changes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Redline</span><span class="p">]:</span>
</span><span id="Redlines-183"><a href="#Redlines-183"><span class="linenos">183</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Redlines-184"><a href="#Redlines-184"><span class="linenos">184</span></a><span class="sd">        Return list of Redline objects representing the differences between source and test.</span>
</span><span id="Redlines-185"><a href="#Redlines-185"><span class="linenos">185</span></a>
</span><span id="Redlines-186"><a href="#Redlines-186"><span class="linenos">186</span></a><span class="sd">        This provides a user-friendly interface for programmatically accessing changes,</span>
</span><span id="Redlines-187"><a href="#Redlines-187"><span class="linenos">187</span></a><span class="sd">        with direct access to the changed text and position information. Only actual</span>
</span><span id="Redlines-188"><a href="#Redlines-188"><span class="linenos">188</span></a><span class="sd">        changes are returned (equal operations are excluded).</span>
</span><span id="Redlines-189"><a href="#Redlines-189"><span class="linenos">189</span></a>
</span><span id="Redlines-190"><a href="#Redlines-190"><span class="linenos">190</span></a><span class="sd">        ```python</span>
</span><span id="Redlines-191"><a href="#Redlines-191"><span class="linenos">191</span></a><span class="sd">        from redlines import Redlines</span>
</span><span id="Redlines-192"><a href="#Redlines-192"><span class="linenos">192</span></a>
</span><span id="Redlines-193"><a href="#Redlines-193"><span class="linenos">193</span></a><span class="sd">        test = Redlines(</span>
</span><span id="Redlines-194"><a href="#Redlines-194"><span class="linenos">194</span></a><span class="sd">            &quot;The quick brown fox jumps over the lazy dog.&quot;,</span>
</span><span id="Redlines-195"><a href="#Redlines-195"><span class="linenos">195</span></a><span class="sd">            &quot;The quick brown fox walks past the lazy dog.&quot;</span>
</span><span id="Redlines-196"><a href="#Redlines-196"><span class="linenos">196</span></a><span class="sd">        )</span>
</span><span id="Redlines-197"><a href="#Redlines-197"><span class="linenos">197</span></a>
</span><span id="Redlines-198"><a href="#Redlines-198"><span class="linenos">198</span></a><span class="sd">        for redline in test.changes:</span>
</span><span id="Redlines-199"><a href="#Redlines-199"><span class="linenos">199</span></a><span class="sd">            print(f&quot;{redline.operation}: {redline.source_text} -&gt; {redline.test_text}&quot;)</span>
</span><span id="Redlines-200"><a href="#Redlines-200"><span class="linenos">200</span></a><span class="sd">        # Output: replace: jumps over  -&gt; walks past</span>
</span><span id="Redlines-201"><a href="#Redlines-201"><span class="linenos">201</span></a><span class="sd">        ```</span>
</span><span id="Redlines-202"><a href="#Redlines-202"><span class="linenos">202</span></a>
</span><span id="Redlines-203"><a href="#Redlines-203"><span class="linenos">203</span></a><span class="sd">        :return: List of Redline objects (only actual changes, no &#39;equal&#39; operations)</span>
</span><span id="Redlines-204"><a href="#Redlines-204"><span class="linenos">204</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Redlines-205"><a href="#Redlines-205"><span class="linenos">205</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Redlines-206"><a href="#Redlines-206"><span class="linenos">206</span></a>        <span class="k">for</span> <span class="n">diff_op</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_diff_ops</span><span class="p">:</span>
</span><span id="Redlines-207"><a href="#Redlines-207"><span class="linenos">207</span></a>            <span class="n">tag</span><span class="p">,</span> <span class="n">i1</span><span class="p">,</span> <span class="n">i2</span><span class="p">,</span> <span class="n">j1</span><span class="p">,</span> <span class="n">j2</span> <span class="o">=</span> <span class="n">diff_op</span><span class="o">.</span><span class="n">opcodes</span>
</span><span id="Redlines-208"><a href="#Redlines-208"><span class="linenos">208</span></a>
</span><span id="Redlines-209"><a href="#Redlines-209"><span class="linenos">209</span></a>            <span class="c1"># Skip equal operations - only return actual changes</span>
</span><span id="Redlines-210"><a href="#Redlines-210"><span class="linenos">210</span></a>            <span class="k">if</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;equal&quot;</span><span class="p">:</span>
</span><span id="Redlines-211"><a href="#Redlines-211"><span class="linenos">211</span></a>                <span class="k">continue</span>
</span><span id="Redlines-212"><a href="#Redlines-212"><span class="linenos">212</span></a>
</span><span id="Redlines-213"><a href="#Redlines-213"><span class="linenos">213</span></a>            <span class="n">source_tokens</span> <span class="o">=</span> <span class="n">diff_op</span><span class="o">.</span><span class="n">source_chunk</span><span class="o">.</span><span class="n">text</span>
</span><span id="Redlines-214"><a href="#Redlines-214"><span class="linenos">214</span></a>            <span class="n">test_tokens</span> <span class="o">=</span> <span class="n">diff_op</span><span class="o">.</span><span class="n">test_chunk</span><span class="o">.</span><span class="n">text</span>
</span><span id="Redlines-215"><a href="#Redlines-215"><span class="linenos">215</span></a>
</span><span id="Redlines-216"><a href="#Redlines-216"><span class="linenos">216</span></a>            <span class="c1"># Extract text and positions based on operation type</span>
</span><span id="Redlines-217"><a href="#Redlines-217"><span class="linenos">217</span></a>            <span class="k">if</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;delete&quot;</span><span class="p">:</span>
</span><span id="Redlines-218"><a href="#Redlines-218"><span class="linenos">218</span></a>                <span class="n">redline</span> <span class="o">=</span> <span class="n">Redline</span><span class="p">(</span>
</span><span id="Redlines-219"><a href="#Redlines-219"><span class="linenos">219</span></a>                    <span class="n">operation</span><span class="o">=</span><span class="s2">&quot;delete&quot;</span><span class="p">,</span>
</span><span id="Redlines-220"><a href="#Redlines-220"><span class="linenos">220</span></a>                    <span class="n">source_text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">source_tokens</span><span class="p">[</span><span class="n">i1</span><span class="p">:</span><span class="n">i2</span><span class="p">]),</span>
</span><span id="Redlines-221"><a href="#Redlines-221"><span class="linenos">221</span></a>                    <span class="n">test_text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="Redlines-222"><a href="#Redlines-222"><span class="linenos">222</span></a>                    <span class="n">source_position</span><span class="o">=</span><span class="p">(</span><span class="n">i1</span><span class="p">,</span> <span class="n">i2</span><span class="p">),</span>
</span><span id="Redlines-223"><a href="#Redlines-223"><span class="linenos">223</span></a>                    <span class="n">test_position</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="Redlines-224"><a href="#Redlines-224"><span class="linenos">224</span></a>                <span class="p">)</span>
</span><span id="Redlines-225"><a href="#Redlines-225"><span class="linenos">225</span></a>            <span class="k">elif</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;insert&quot;</span><span class="p">:</span>
</span><span id="Redlines-226"><a href="#Redlines-226"><span class="linenos">226</span></a>                <span class="n">redline</span> <span class="o">=</span> <span class="n">Redline</span><span class="p">(</span>
</span><span id="Redlines-227"><a href="#Redlines-227"><span class="linenos">227</span></a>                    <span class="n">operation</span><span class="o">=</span><span class="s2">&quot;insert&quot;</span><span class="p">,</span>
</span><span id="Redlines-228"><a href="#Redlines-228"><span class="linenos">228</span></a>                    <span class="n">source_text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="Redlines-229"><a href="#Redlines-229"><span class="linenos">229</span></a>                    <span class="n">test_text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">test_tokens</span><span class="p">[</span><span class="n">j1</span><span class="p">:</span><span class="n">j2</span><span class="p">]),</span>
</span><span id="Redlines-230"><a href="#Redlines-230"><span class="linenos">230</span></a>                    <span class="n">source_position</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="Redlines-231"><a href="#Redlines-231"><span class="linenos">231</span></a>                    <span class="n">test_position</span><span class="o">=</span><span class="p">(</span><span class="n">j1</span><span class="p">,</span> <span class="n">j2</span><span class="p">),</span>
</span><span id="Redlines-232"><a href="#Redlines-232"><span class="linenos">232</span></a>                <span class="p">)</span>
</span><span id="Redlines-233"><a href="#Redlines-233"><span class="linenos">233</span></a>            <span class="k">elif</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;replace&quot;</span><span class="p">:</span>
</span><span id="Redlines-234"><a href="#Redlines-234"><span class="linenos">234</span></a>                <span class="n">redline</span> <span class="o">=</span> <span class="n">Redline</span><span class="p">(</span>
</span><span id="Redlines-235"><a href="#Redlines-235"><span class="linenos">235</span></a>                    <span class="n">operation</span><span class="o">=</span><span class="s2">&quot;replace&quot;</span><span class="p">,</span>
</span><span id="Redlines-236"><a href="#Redlines-236"><span class="linenos">236</span></a>                    <span class="n">source_text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">source_tokens</span><span class="p">[</span><span class="n">i1</span><span class="p">:</span><span class="n">i2</span><span class="p">]),</span>
</span><span id="Redlines-237"><a href="#Redlines-237"><span class="linenos">237</span></a>                    <span class="n">test_text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">test_tokens</span><span class="p">[</span><span class="n">j1</span><span class="p">:</span><span class="n">j2</span><span class="p">]),</span>
</span><span id="Redlines-238"><a href="#Redlines-238"><span class="linenos">238</span></a>                    <span class="n">source_position</span><span class="o">=</span><span class="p">(</span><span class="n">i1</span><span class="p">,</span> <span class="n">i2</span><span class="p">),</span>
</span><span id="Redlines-239"><a href="#Redlines-239"><span class="linenos">239</span></a>                    <span class="n">test_position</span><span class="o">=</span><span class="p">(</span><span class="n">j1</span><span class="p">,</span> <span class="n">j2</span><span class="p">),</span>
</span><span id="Redlines-240"><a href="#Redlines-240"><span class="linenos">240</span></a>                <span class="p">)</span>
</span><span id="Redlines-241"><a href="#Redlines-241"><span class="linenos">241</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Redlines-242"><a href="#Redlines-242"><span class="linenos">242</span></a>                <span class="k">continue</span>
</span><span id="Redlines-243"><a href="#Redlines-243"><span class="linenos">243</span></a>
</span><span id="Redlines-244"><a href="#Redlines-244"><span class="linenos">244</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">redline</span><span class="p">)</span>
</span><span id="Redlines-245"><a href="#Redlines-245"><span class="linenos">245</span></a>
</span><span id="Redlines-246"><a href="#Redlines-246"><span class="linenos">246</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="Redlines-247"><a href="#Redlines-247"><span class="linenos">247</span></a>
</span><span id="Redlines-248"><a href="#Redlines-248"><span class="linenos">248</span></a>    <span class="k">def</span> <span class="nf">get_changes</span><span class="p">(</span>
</span><span id="Redlines-249"><a href="#Redlines-249"><span class="linenos">249</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">operation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Redlines-250"><a href="#Redlines-250"><span class="linenos">250</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Redline</span><span class="p">]:</span>
</span><span id="Redlines-251"><a href="#Redlines-251"><span class="linenos">251</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Redlines-252"><a href="#Redlines-252"><span class="linenos">252</span></a><span class="sd">        Get changes (redlines), optionally filtered by operation type.</span>
</span><span id="Redlines-253"><a href="#Redlines-253"><span class="linenos">253</span></a>
</span><span id="Redlines-254"><a href="#Redlines-254"><span class="linenos">254</span></a><span class="sd">        ```python</span>
</span><span id="Redlines-255"><a href="#Redlines-255"><span class="linenos">255</span></a><span class="sd">        from redlines import Redlines</span>
</span><span id="Redlines-256"><a href="#Redlines-256"><span class="linenos">256</span></a>
</span><span id="Redlines-257"><a href="#Redlines-257"><span class="linenos">257</span></a><span class="sd">        test = Redlines(</span>
</span><span id="Redlines-258"><a href="#Redlines-258"><span class="linenos">258</span></a><span class="sd">            &quot;The quick brown fox jumps over the lazy dog.&quot;,</span>
</span><span id="Redlines-259"><a href="#Redlines-259"><span class="linenos">259</span></a><span class="sd">            &quot;The quick brown fox walks past the lazy dog.&quot;</span>
</span><span id="Redlines-260"><a href="#Redlines-260"><span class="linenos">260</span></a><span class="sd">        )</span>
</span><span id="Redlines-261"><a href="#Redlines-261"><span class="linenos">261</span></a>
</span><span id="Redlines-262"><a href="#Redlines-262"><span class="linenos">262</span></a><span class="sd">        # Get all changes</span>
</span><span id="Redlines-263"><a href="#Redlines-263"><span class="linenos">263</span></a><span class="sd">        all_changes = test.get_changes()</span>
</span><span id="Redlines-264"><a href="#Redlines-264"><span class="linenos">264</span></a>
</span><span id="Redlines-265"><a href="#Redlines-265"><span class="linenos">265</span></a><span class="sd">        # Get only replacements</span>
</span><span id="Redlines-266"><a href="#Redlines-266"><span class="linenos">266</span></a><span class="sd">        replacements = test.get_changes(operation=&quot;replace&quot;)</span>
</span><span id="Redlines-267"><a href="#Redlines-267"><span class="linenos">267</span></a>
</span><span id="Redlines-268"><a href="#Redlines-268"><span class="linenos">268</span></a><span class="sd">        # Get deletions</span>
</span><span id="Redlines-269"><a href="#Redlines-269"><span class="linenos">269</span></a><span class="sd">        deletions = test.get_changes(operation=&quot;delete&quot;)</span>
</span><span id="Redlines-270"><a href="#Redlines-270"><span class="linenos">270</span></a>
</span><span id="Redlines-271"><a href="#Redlines-271"><span class="linenos">271</span></a><span class="sd">        # Get insertions</span>
</span><span id="Redlines-272"><a href="#Redlines-272"><span class="linenos">272</span></a><span class="sd">        insertions = test.get_changes(operation=&quot;insert&quot;)</span>
</span><span id="Redlines-273"><a href="#Redlines-273"><span class="linenos">273</span></a><span class="sd">        ```</span>
</span><span id="Redlines-274"><a href="#Redlines-274"><span class="linenos">274</span></a>
</span><span id="Redlines-275"><a href="#Redlines-275"><span class="linenos">275</span></a><span class="sd">        :param operation: Filter by operation type: &quot;delete&quot;, &quot;insert&quot;, or &quot;replace&quot;. If None, returns all changes.</span>
</span><span id="Redlines-276"><a href="#Redlines-276"><span class="linenos">276</span></a><span class="sd">        :return: List of Redline objects matching the filter</span>
</span><span id="Redlines-277"><a href="#Redlines-277"><span class="linenos">277</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Redlines-278"><a href="#Redlines-278"><span class="linenos">278</span></a>        <span class="n">changes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">changes</span>
</span><span id="Redlines-279"><a href="#Redlines-279"><span class="linenos">279</span></a>
</span><span id="Redlines-280"><a href="#Redlines-280"><span class="linenos">280</span></a>        <span class="k">if</span> <span class="n">operation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Redlines-281"><a href="#Redlines-281"><span class="linenos">281</span></a>            <span class="k">return</span> <span class="n">changes</span>
</span><span id="Redlines-282"><a href="#Redlines-282"><span class="linenos">282</span></a>
</span><span id="Redlines-283"><a href="#Redlines-283"><span class="linenos">283</span></a>        <span class="k">if</span> <span class="n">operation</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;delete&quot;</span><span class="p">,</span> <span class="s2">&quot;insert&quot;</span><span class="p">,</span> <span class="s2">&quot;replace&quot;</span><span class="p">):</span>
</span><span id="Redlines-284"><a href="#Redlines-284"><span class="linenos">284</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="Redlines-285"><a href="#Redlines-285"><span class="linenos">285</span></a>                <span class="sa">f</span><span class="s2">&quot;Invalid operation &#39;</span><span class="si">{</span><span class="n">operation</span><span class="si">}</span><span class="s2">&#39;. Must be &#39;delete&#39;, &#39;insert&#39;, or &#39;replace&#39;.&quot;</span>
</span><span id="Redlines-286"><a href="#Redlines-286"><span class="linenos">286</span></a>            <span class="p">)</span>
</span><span id="Redlines-287"><a href="#Redlines-287"><span class="linenos">287</span></a>
</span><span id="Redlines-288"><a href="#Redlines-288"><span class="linenos">288</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">r</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">changes</span> <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">operation</span> <span class="o">==</span> <span class="n">operation</span><span class="p">]</span>
</span><span id="Redlines-289"><a href="#Redlines-289"><span class="linenos">289</span></a>
</span><span id="Redlines-290"><a href="#Redlines-290"><span class="linenos">290</span></a>    <span class="k">def</span> <span class="nf">stats</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Stats</span><span class="p">:</span>
</span><span id="Redlines-291"><a href="#Redlines-291"><span class="linenos">291</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Redlines-292"><a href="#Redlines-292"><span class="linenos">292</span></a><span class="sd">        Get statistics about the changes between source and test.</span>
</span><span id="Redlines-293"><a href="#Redlines-293"><span class="linenos">293</span></a>
</span><span id="Redlines-294"><a href="#Redlines-294"><span class="linenos">294</span></a><span class="sd">        ```python</span>
</span><span id="Redlines-295"><a href="#Redlines-295"><span class="linenos">295</span></a><span class="sd">        from redlines import Redlines</span>
</span><span id="Redlines-296"><a href="#Redlines-296"><span class="linenos">296</span></a>
</span><span id="Redlines-297"><a href="#Redlines-297"><span class="linenos">297</span></a><span class="sd">        test = Redlines(</span>
</span><span id="Redlines-298"><a href="#Redlines-298"><span class="linenos">298</span></a><span class="sd">            &quot;The quick brown fox jumps over the lazy dog.&quot;,</span>
</span><span id="Redlines-299"><a href="#Redlines-299"><span class="linenos">299</span></a><span class="sd">            &quot;The quick brown fox walks past the lazy dog.&quot;</span>
</span><span id="Redlines-300"><a href="#Redlines-300"><span class="linenos">300</span></a><span class="sd">        )</span>
</span><span id="Redlines-301"><a href="#Redlines-301"><span class="linenos">301</span></a>
</span><span id="Redlines-302"><a href="#Redlines-302"><span class="linenos">302</span></a><span class="sd">        stats = test.stats()</span>
</span><span id="Redlines-303"><a href="#Redlines-303"><span class="linenos">303</span></a><span class="sd">        print(f&quot;Total changes: {stats.total_changes}&quot;)</span>
</span><span id="Redlines-304"><a href="#Redlines-304"><span class="linenos">304</span></a><span class="sd">        print(f&quot;Deletions: {stats.deletions}&quot;)</span>
</span><span id="Redlines-305"><a href="#Redlines-305"><span class="linenos">305</span></a><span class="sd">        print(f&quot;Insertions: {stats.insertions}&quot;)</span>
</span><span id="Redlines-306"><a href="#Redlines-306"><span class="linenos">306</span></a><span class="sd">        print(f&quot;Replacements: {stats.replacements}&quot;)</span>
</span><span id="Redlines-307"><a href="#Redlines-307"><span class="linenos">307</span></a><span class="sd">        ```</span>
</span><span id="Redlines-308"><a href="#Redlines-308"><span class="linenos">308</span></a>
</span><span id="Redlines-309"><a href="#Redlines-309"><span class="linenos">309</span></a><span class="sd">        :return: Stats object with change counts</span>
</span><span id="Redlines-310"><a href="#Redlines-310"><span class="linenos">310</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Redlines-311"><a href="#Redlines-311"><span class="linenos">311</span></a>        <span class="n">changes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">changes</span>
</span><span id="Redlines-312"><a href="#Redlines-312"><span class="linenos">312</span></a>
</span><span id="Redlines-313"><a href="#Redlines-313"><span class="linenos">313</span></a>        <span class="n">deletions</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">changes</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">operation</span> <span class="o">==</span> <span class="s2">&quot;delete&quot;</span><span class="p">)</span>
</span><span id="Redlines-314"><a href="#Redlines-314"><span class="linenos">314</span></a>        <span class="n">insertions</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">changes</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">operation</span> <span class="o">==</span> <span class="s2">&quot;insert&quot;</span><span class="p">)</span>
</span><span id="Redlines-315"><a href="#Redlines-315"><span class="linenos">315</span></a>        <span class="n">replacements</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">changes</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">operation</span> <span class="o">==</span> <span class="s2">&quot;replace&quot;</span><span class="p">)</span>
</span><span id="Redlines-316"><a href="#Redlines-316"><span class="linenos">316</span></a>
</span><span id="Redlines-317"><a href="#Redlines-317"><span class="linenos">317</span></a>        <span class="k">return</span> <span class="n">Stats</span><span class="p">(</span>
</span><span id="Redlines-318"><a href="#Redlines-318"><span class="linenos">318</span></a>            <span class="n">total_changes</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">changes</span><span class="p">),</span>
</span><span id="Redlines-319"><a href="#Redlines-319"><span class="linenos">319</span></a>            <span class="n">deletions</span><span class="o">=</span><span class="n">deletions</span><span class="p">,</span>
</span><span id="Redlines-320"><a href="#Redlines-320"><span class="linenos">320</span></a>            <span class="n">insertions</span><span class="o">=</span><span class="n">insertions</span><span class="p">,</span>
</span><span id="Redlines-321"><a href="#Redlines-321"><span class="linenos">321</span></a>            <span class="n">replacements</span><span class="o">=</span><span class="n">replacements</span><span class="p">,</span>
</span><span id="Redlines-322"><a href="#Redlines-322"><span class="linenos">322</span></a>        <span class="p">)</span>
</span><span id="Redlines-323"><a href="#Redlines-323"><span class="linenos">323</span></a>
</span><span id="Redlines-324"><a href="#Redlines-324"><span class="linenos">324</span></a>    <span class="nd">@property</span>
</span><span id="Redlines-325"><a href="#Redlines-325"><span class="linenos">325</span></a>    <span class="k">def</span> <span class="nf">output_markdown</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Redlines-326"><a href="#Redlines-326"><span class="linenos">326</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Redlines-327"><a href="#Redlines-327"><span class="linenos">327</span></a><span class="sd">        Returns the delta in Markdown format.</span>
</span><span id="Redlines-328"><a href="#Redlines-328"><span class="linenos">328</span></a>
</span><span id="Redlines-329"><a href="#Redlines-329"><span class="linenos">329</span></a><span class="sd">        ## Styling Markdown</span>
</span><span id="Redlines-330"><a href="#Redlines-330"><span class="linenos">330</span></a><span class="sd">        To output markdown in a particular manner, you must pass a `markdown_style` option when the `Redlines` object</span>
</span><span id="Redlines-331"><a href="#Redlines-331"><span class="linenos">331</span></a><span class="sd">        is created or when `Redlines.compare` is called.</span>
</span><span id="Redlines-332"><a href="#Redlines-332"><span class="linenos">332</span></a>
</span><span id="Redlines-333"><a href="#Redlines-333"><span class="linenos">333</span></a><span class="sd">        ```python</span>
</span><span id="Redlines-334"><a href="#Redlines-334"><span class="linenos">334</span></a><span class="sd">        from redlines import Redlines</span>
</span><span id="Redlines-335"><a href="#Redlines-335"><span class="linenos">335</span></a>
</span><span id="Redlines-336"><a href="#Redlines-336"><span class="linenos">336</span></a><span class="sd">        test = Redlines(</span>
</span><span id="Redlines-337"><a href="#Redlines-337"><span class="linenos">337</span></a><span class="sd">            &quot;The quick brown fox jumps over the lazy dog.&quot;,</span>
</span><span id="Redlines-338"><a href="#Redlines-338"><span class="linenos">338</span></a><span class="sd">            &quot;The quick brown fox walks past the lazy dog.&quot;,</span>
</span><span id="Redlines-339"><a href="#Redlines-339"><span class="linenos">339</span></a><span class="sd">            markdown_style=&quot;red&quot;  # This option specifies the style as red</span>
</span><span id="Redlines-340"><a href="#Redlines-340"><span class="linenos">340</span></a><span class="sd">        )</span>
</span><span id="Redlines-341"><a href="#Redlines-341"><span class="linenos">341</span></a>
</span><span id="Redlines-342"><a href="#Redlines-342"><span class="linenos">342</span></a><span class="sd">        test.compare(markdown_style=&quot;none&quot;) # This option specifies the style as none</span>
</span><span id="Redlines-343"><a href="#Redlines-343"><span class="linenos">343</span></a><span class="sd">        ```</span>
</span><span id="Redlines-344"><a href="#Redlines-344"><span class="linenos">344</span></a>
</span><span id="Redlines-345"><a href="#Redlines-345"><span class="linenos">345</span></a><span class="sd">        ### Available styles</span>
</span><span id="Redlines-346"><a href="#Redlines-346"><span class="linenos">346</span></a>
</span><span id="Redlines-347"><a href="#Redlines-347"><span class="linenos">347</span></a><span class="sd">        | Style | Preview |</span>
</span><span id="Redlines-348"><a href="#Redlines-348"><span class="linenos">348</span></a><span class="sd">        |-------| -------|</span>
</span><span id="Redlines-349"><a href="#Redlines-349"><span class="linenos">349</span></a><span class="sd">        |red-green (**default**) | &quot;The quick brown fox &lt;span style=&#39;color:red;font-weight:700;text-decoration:line-through;&#39;&gt;jumps over &lt;/span&gt;&lt;span style=&#39;color:green;font-weight:700;&#39;&gt;walks past &lt;/span&gt;the lazy dog.&quot;|</span>
</span><span id="Redlines-350"><a href="#Redlines-350"><span class="linenos">350</span></a><span class="sd">        |none | &#39;The quick brown fox &lt;del&gt;jumps over &lt;/del&gt;&lt;ins&gt;walks past &lt;/ins&gt;the lazy dog.&#39;|</span>
</span><span id="Redlines-351"><a href="#Redlines-351"><span class="linenos">351</span></a><span class="sd">        |red | &quot;The quick brown fox &lt;span style=&#39;color:red;font-weight:700;text-decoration:line-through;&#39;&gt;jumps over &lt;/span&gt;&lt;span style=&#39;color:red;font-weight:700;&#39;&gt;walks past &lt;/span&gt;the lazy dog.&quot;|</span>
</span><span id="Redlines-352"><a href="#Redlines-352"><span class="linenos">352</span></a><span class="sd">        |ghfm (GitHub Flavored Markdown)| &#39;The quick brown fox ~~jumps over ~~**walks past **the lazy dog.&#39; |</span>
</span><span id="Redlines-353"><a href="#Redlines-353"><span class="linenos">353</span></a><span class="sd">        |bbcode (BBCode) | &#39;The quick brown fox [s][color=red]jumps over [/color][/s][b][color=green]walks past [/color][/b]the lazy dog.&#39; |</span>
</span><span id="Redlines-354"><a href="#Redlines-354"><span class="linenos">354</span></a><span class="sd">        |streamlit | &#39;The quick brown fox ~~:red[jumps over ]~~ **:green[walks past ]** the lazy dog.&#39; |</span>
</span><span id="Redlines-355"><a href="#Redlines-355"><span class="linenos">355</span></a>
</span><span id="Redlines-356"><a href="#Redlines-356"><span class="linenos">356</span></a><span class="sd">        ### Custom styling</span>
</span><span id="Redlines-357"><a href="#Redlines-357"><span class="linenos">357</span></a>
</span><span id="Redlines-358"><a href="#Redlines-358"><span class="linenos">358</span></a><span class="sd">        You can also use css classes to provide custom styling by setting `markdown_style` as &quot;custom_css&quot;.</span>
</span><span id="Redlines-359"><a href="#Redlines-359"><span class="linenos">359</span></a><span class="sd">        Insertions and deletions are now styled using the &quot;redline-inserted&quot; and &quot;redline-deleted&quot; CSS classes.</span>
</span><span id="Redlines-360"><a href="#Redlines-360"><span class="linenos">360</span></a><span class="sd">        You can also set your own CSS classes by specifying the name of the CSS class in the options `ins_class`</span>
</span><span id="Redlines-361"><a href="#Redlines-361"><span class="linenos">361</span></a><span class="sd">        and `del_class` respectively in the constructor or compare function.</span>
</span><span id="Redlines-362"><a href="#Redlines-362"><span class="linenos">362</span></a>
</span><span id="Redlines-363"><a href="#Redlines-363"><span class="linenos">363</span></a><span class="sd">        ## Markdown output in specific environments</span>
</span><span id="Redlines-364"><a href="#Redlines-364"><span class="linenos">364</span></a>
</span><span id="Redlines-365"><a href="#Redlines-365"><span class="linenos">365</span></a><span class="sd">        Users have reported that the output doesn&#39;t display correctly in their environments.</span>
</span><span id="Redlines-366"><a href="#Redlines-366"><span class="linenos">366</span></a><span class="sd">        This is because styling may not appear in markdown environments which disallow HTML.</span>
</span><span id="Redlines-367"><a href="#Redlines-367"><span class="linenos">367</span></a><span class="sd">        There is no consistent support for strikethroughs and colors in the markdown standard,</span>
</span><span id="Redlines-368"><a href="#Redlines-368"><span class="linenos">368</span></a><span class="sd">        and styling is largely accomplished through raw HTML. If you are using GitHub or Streamlit, you may not get</span>
</span><span id="Redlines-369"><a href="#Redlines-369"><span class="linenos">369</span></a><span class="sd">        the formatting you expect or see any change at all.</span>
</span><span id="Redlines-370"><a href="#Redlines-370"><span class="linenos">370</span></a>
</span><span id="Redlines-371"><a href="#Redlines-371"><span class="linenos">371</span></a><span class="sd">        If you are facing this kind of difficulty, here are some recommendations. If your experience doesn&#39;t match</span>
</span><span id="Redlines-372"><a href="#Redlines-372"><span class="linenos">372</span></a><span class="sd">        the hints or description below, or you continue to face problems, please raise an issue.</span>
</span><span id="Redlines-373"><a href="#Redlines-373"><span class="linenos">373</span></a>
</span><span id="Redlines-374"><a href="#Redlines-374"><span class="linenos">374</span></a><span class="sd">        ### Jupyter Notebooks</span>
</span><span id="Redlines-375"><a href="#Redlines-375"><span class="linenos">375</span></a><span class="sd">        This library was first written for the Jupyter notebook environment, so all the available styles, including</span>
</span><span id="Redlines-376"><a href="#Redlines-376"><span class="linenos">376</span></a><span class="sd">        the default (`red-green`), `red` and `none` work.</span>
</span><span id="Redlines-377"><a href="#Redlines-377"><span class="linenos">377</span></a>
</span><span id="Redlines-378"><a href="#Redlines-378"><span class="linenos">378</span></a><span class="sd">        ### Streamlit</span>
</span><span id="Redlines-379"><a href="#Redlines-379"><span class="linenos">379</span></a>
</span><span id="Redlines-380"><a href="#Redlines-380"><span class="linenos">380</span></a><span class="sd">        Try this:</span>
</span><span id="Redlines-381"><a href="#Redlines-381"><span class="linenos">381</span></a>
</span><span id="Redlines-382"><a href="#Redlines-382"><span class="linenos">382</span></a><span class="sd">        * If streamlit version is &gt;= 1.16.0, consider the markdown style &quot;streamlit&quot;</span>
</span><span id="Redlines-383"><a href="#Redlines-383"><span class="linenos">383</span></a><span class="sd">        * If streamlit version is &lt; 1.16.0, consider the markdown style `ghfm`</span>
</span><span id="Redlines-384"><a href="#Redlines-384"><span class="linenos">384</span></a><span class="sd">        * Enable parsing of HTML. In Streamlit, you need to set the `unsafe_allow_html` argument in `st.write` or</span>
</span><span id="Redlines-385"><a href="#Redlines-385"><span class="linenos">385</span></a><span class="sd">        `st.markdown` to `True`.</span>
</span><span id="Redlines-386"><a href="#Redlines-386"><span class="linenos">386</span></a>
</span><span id="Redlines-387"><a href="#Redlines-387"><span class="linenos">387</span></a><span class="sd">        ### Colab</span>
</span><span id="Redlines-388"><a href="#Redlines-388"><span class="linenos">388</span></a>
</span><span id="Redlines-389"><a href="#Redlines-389"><span class="linenos">389</span></a><span class="sd">        Try this:</span>
</span><span id="Redlines-390"><a href="#Redlines-390"><span class="linenos">390</span></a><span class="sd">        * Use the markdown style `none` or `ghfm`</span>
</span><span id="Redlines-391"><a href="#Redlines-391"><span class="linenos">391</span></a><span class="sd">        * `Redlines.output_rich` has been reported to work in Colab</span>
</span><span id="Redlines-392"><a href="#Redlines-392"><span class="linenos">392</span></a>
</span><span id="Redlines-393"><a href="#Redlines-393"><span class="linenos">393</span></a><span class="sd">        :return: The delta in Markdown format.</span>
</span><span id="Redlines-394"><a href="#Redlines-394"><span class="linenos">394</span></a><span class="sd">        :rtype: str</span>
</span><span id="Redlines-395"><a href="#Redlines-395"><span class="linenos">395</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Redlines-396"><a href="#Redlines-396"><span class="linenos">396</span></a>        <span class="n">result</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Redlines-397"><a href="#Redlines-397"><span class="linenos">397</span></a>
</span><span id="Redlines-398"><a href="#Redlines-398"><span class="linenos">398</span></a>        <span class="c1"># default_style = &quot;red_green&quot;</span>
</span><span id="Redlines-399"><a href="#Redlines-399"><span class="linenos">399</span></a>
</span><span id="Redlines-400"><a href="#Redlines-400"><span class="linenos">400</span></a>        <span class="n">md_styles</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="Redlines-401"><a href="#Redlines-401"><span class="linenos">401</span></a>            <span class="s2">&quot;ins&quot;</span><span class="p">:</span> <span class="p">(</span>
</span><span id="Redlines-402"><a href="#Redlines-402"><span class="linenos">402</span></a>                <span class="sa">f</span><span class="s2">&quot;&lt;span style=&#39;color:green;font-weight:700;&#39;&gt;&quot;</span><span class="p">,</span>
</span><span id="Redlines-403"><a href="#Redlines-403"><span class="linenos">403</span></a>                <span class="s2">&quot;&lt;/span&gt;&quot;</span><span class="p">,</span>
</span><span id="Redlines-404"><a href="#Redlines-404"><span class="linenos">404</span></a>            <span class="p">),</span>
</span><span id="Redlines-405"><a href="#Redlines-405"><span class="linenos">405</span></a>            <span class="s2">&quot;del&quot;</span><span class="p">:</span> <span class="p">(</span>
</span><span id="Redlines-406"><a href="#Redlines-406"><span class="linenos">406</span></a>                <span class="sa">f</span><span class="s2">&quot;&lt;span style=&#39;color:red;font-weight:700;text-decoration:line-through;&#39;&gt;&quot;</span><span class="p">,</span>
</span><span id="Redlines-407"><a href="#Redlines-407"><span class="linenos">407</span></a>                <span class="s2">&quot;&lt;/span&gt;&quot;</span><span class="p">,</span>
</span><span id="Redlines-408"><a href="#Redlines-408"><span class="linenos">408</span></a>            <span class="p">),</span>
</span><span id="Redlines-409"><a href="#Redlines-409"><span class="linenos">409</span></a>        <span class="p">}</span>
</span><span id="Redlines-410"><a href="#Redlines-410"><span class="linenos">410</span></a>
</span><span id="Redlines-411"><a href="#Redlines-411"><span class="linenos">411</span></a>        <span class="k">if</span> <span class="s2">&quot;markdown_style&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
</span><span id="Redlines-412"><a href="#Redlines-412"><span class="linenos">412</span></a>            <span class="n">style</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s2">&quot;markdown_style&quot;</span><span class="p">]</span>
</span><span id="Redlines-413"><a href="#Redlines-413"><span class="linenos">413</span></a>
</span><span id="Redlines-414"><a href="#Redlines-414"><span class="linenos">414</span></a>            <span class="k">if</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;none&quot;</span> <span class="ow">or</span> <span class="n">style</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Redlines-415"><a href="#Redlines-415"><span class="linenos">415</span></a>                <span class="n">md_styles</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;ins&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;&lt;ins&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/ins&gt;&quot;</span><span class="p">),</span> <span class="s2">&quot;del&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;&lt;del&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/del&gt;&quot;</span><span class="p">)}</span>
</span><span id="Redlines-416"><a href="#Redlines-416"><span class="linenos">416</span></a>            <span class="k">elif</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;red&quot;</span><span class="p">:</span>
</span><span id="Redlines-417"><a href="#Redlines-417"><span class="linenos">417</span></a>                <span class="n">md_styles</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="Redlines-418"><a href="#Redlines-418"><span class="linenos">418</span></a>                    <span class="s2">&quot;ins&quot;</span><span class="p">:</span> <span class="p">(</span>
</span><span id="Redlines-419"><a href="#Redlines-419"><span class="linenos">419</span></a>                        <span class="sa">f</span><span class="s2">&quot;&lt;span style=&#39;color:red;font-weight:700;&#39;&gt;&quot;</span><span class="p">,</span>
</span><span id="Redlines-420"><a href="#Redlines-420"><span class="linenos">420</span></a>                        <span class="s2">&quot;&lt;/span&gt;&quot;</span><span class="p">,</span>
</span><span id="Redlines-421"><a href="#Redlines-421"><span class="linenos">421</span></a>                    <span class="p">),</span>
</span><span id="Redlines-422"><a href="#Redlines-422"><span class="linenos">422</span></a>                    <span class="s2">&quot;del&quot;</span><span class="p">:</span> <span class="p">(</span>
</span><span id="Redlines-423"><a href="#Redlines-423"><span class="linenos">423</span></a>                        <span class="sa">f</span><span class="s2">&quot;&lt;span style=&#39;color:red;font-weight:700;text-decoration:line-through;&#39;&gt;&quot;</span><span class="p">,</span>
</span><span id="Redlines-424"><a href="#Redlines-424"><span class="linenos">424</span></a>                        <span class="s2">&quot;&lt;/span&gt;&quot;</span><span class="p">,</span>
</span><span id="Redlines-425"><a href="#Redlines-425"><span class="linenos">425</span></a>                    <span class="p">),</span>
</span><span id="Redlines-426"><a href="#Redlines-426"><span class="linenos">426</span></a>                <span class="p">}</span>
</span><span id="Redlines-427"><a href="#Redlines-427"><span class="linenos">427</span></a>            <span class="k">elif</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;custom_css&quot;</span><span class="p">:</span>
</span><span id="Redlines-428"><a href="#Redlines-428"><span class="linenos">428</span></a>                <span class="n">ins_class</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="Redlines-429"><a href="#Redlines-429"><span class="linenos">429</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s2">&quot;ins_class&quot;</span><span class="p">]</span>
</span><span id="Redlines-430"><a href="#Redlines-430"><span class="linenos">430</span></a>                    <span class="k">if</span> <span class="s2">&quot;ins_class&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span>
</span><span id="Redlines-431"><a href="#Redlines-431"><span class="linenos">431</span></a>                    <span class="k">else</span> <span class="s2">&quot;redline-inserted&quot;</span>
</span><span id="Redlines-432"><a href="#Redlines-432"><span class="linenos">432</span></a>                <span class="p">)</span>
</span><span id="Redlines-433"><a href="#Redlines-433"><span class="linenos">433</span></a>                <span class="n">del_class</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="Redlines-434"><a href="#Redlines-434"><span class="linenos">434</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s2">&quot;del_class&quot;</span><span class="p">]</span>
</span><span id="Redlines-435"><a href="#Redlines-435"><span class="linenos">435</span></a>                    <span class="k">if</span> <span class="s2">&quot;del_class&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span>
</span><span id="Redlines-436"><a href="#Redlines-436"><span class="linenos">436</span></a>                    <span class="k">else</span> <span class="s2">&quot;redline-deleted&quot;</span>
</span><span id="Redlines-437"><a href="#Redlines-437"><span class="linenos">437</span></a>                <span class="p">)</span>
</span><span id="Redlines-438"><a href="#Redlines-438"><span class="linenos">438</span></a>
</span><span id="Redlines-439"><a href="#Redlines-439"><span class="linenos">439</span></a>                <span class="n">elem_attributes</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="Redlines-440"><a href="#Redlines-440"><span class="linenos">440</span></a>                    <span class="s2">&quot;ins&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;class=&#39;</span><span class="si">{</span><span class="n">ins_class</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
</span><span id="Redlines-441"><a href="#Redlines-441"><span class="linenos">441</span></a>                    <span class="s2">&quot;del&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;class=&#39;</span><span class="si">{</span><span class="n">del_class</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
</span><span id="Redlines-442"><a href="#Redlines-442"><span class="linenos">442</span></a>                <span class="p">}</span>
</span><span id="Redlines-443"><a href="#Redlines-443"><span class="linenos">443</span></a>
</span><span id="Redlines-444"><a href="#Redlines-444"><span class="linenos">444</span></a>                <span class="n">md_styles</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="Redlines-445"><a href="#Redlines-445"><span class="linenos">445</span></a>                    <span class="s2">&quot;ins&quot;</span><span class="p">:</span> <span class="p">(</span>
</span><span id="Redlines-446"><a href="#Redlines-446"><span class="linenos">446</span></a>                        <span class="sa">f</span><span class="s2">&quot;&lt;span </span><span class="si">{</span><span class="n">elem_attributes</span><span class="p">[</span><span class="s1">&#39;ins&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&gt;&quot;</span><span class="p">,</span>
</span><span id="Redlines-447"><a href="#Redlines-447"><span class="linenos">447</span></a>                        <span class="s2">&quot;&lt;/span&gt;&quot;</span><span class="p">,</span>
</span><span id="Redlines-448"><a href="#Redlines-448"><span class="linenos">448</span></a>                    <span class="p">),</span>
</span><span id="Redlines-449"><a href="#Redlines-449"><span class="linenos">449</span></a>                    <span class="s2">&quot;del&quot;</span><span class="p">:</span> <span class="p">(</span>
</span><span id="Redlines-450"><a href="#Redlines-450"><span class="linenos">450</span></a>                        <span class="sa">f</span><span class="s2">&quot;&lt;span </span><span class="si">{</span><span class="n">elem_attributes</span><span class="p">[</span><span class="s1">&#39;del&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&gt;&quot;</span><span class="p">,</span>
</span><span id="Redlines-451"><a href="#Redlines-451"><span class="linenos">451</span></a>                        <span class="s2">&quot;&lt;/span&gt;&quot;</span><span class="p">,</span>
</span><span id="Redlines-452"><a href="#Redlines-452"><span class="linenos">452</span></a>                    <span class="p">),</span>
</span><span id="Redlines-453"><a href="#Redlines-453"><span class="linenos">453</span></a>                <span class="p">}</span>
</span><span id="Redlines-454"><a href="#Redlines-454"><span class="linenos">454</span></a>            <span class="k">elif</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;ghfm&quot;</span><span class="p">:</span>
</span><span id="Redlines-455"><a href="#Redlines-455"><span class="linenos">455</span></a>                <span class="n">md_styles</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;ins&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;**&quot;</span><span class="p">,</span> <span class="s2">&quot;**&quot;</span><span class="p">),</span> <span class="s2">&quot;del&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;~~&quot;</span><span class="p">,</span> <span class="s2">&quot;~~&quot;</span><span class="p">)}</span>
</span><span id="Redlines-456"><a href="#Redlines-456"><span class="linenos">456</span></a>            <span class="k">elif</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;bbcode&quot;</span><span class="p">:</span>
</span><span id="Redlines-457"><a href="#Redlines-457"><span class="linenos">457</span></a>                <span class="n">md_styles</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="Redlines-458"><a href="#Redlines-458"><span class="linenos">458</span></a>                    <span class="s2">&quot;ins&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;[b][color=green]&quot;</span><span class="p">,</span> <span class="s2">&quot;[/color][/b]&quot;</span><span class="p">),</span>
</span><span id="Redlines-459"><a href="#Redlines-459"><span class="linenos">459</span></a>                    <span class="s2">&quot;del&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;[s][color=red]&quot;</span><span class="p">,</span> <span class="s2">&quot;[/color][/s]&quot;</span><span class="p">),</span>
</span><span id="Redlines-460"><a href="#Redlines-460"><span class="linenos">460</span></a>                <span class="p">}</span>
</span><span id="Redlines-461"><a href="#Redlines-461"><span class="linenos">461</span></a>            <span class="k">elif</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;streamlit&quot;</span><span class="p">:</span>
</span><span id="Redlines-462"><a href="#Redlines-462"><span class="linenos">462</span></a>                <span class="n">md_styles</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;ins&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;**:green[&quot;</span><span class="p">,</span> <span class="s2">&quot;]** &quot;</span><span class="p">),</span> <span class="s2">&quot;del&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;~~:red[&quot;</span><span class="p">,</span> <span class="s2">&quot;]~~ &quot;</span><span class="p">)}</span>
</span><span id="Redlines-463"><a href="#Redlines-463"><span class="linenos">463</span></a>
</span><span id="Redlines-464"><a href="#Redlines-464"><span class="linenos">464</span></a>        <span class="k">for</span> <span class="n">diff_op</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_diff_ops</span><span class="p">:</span>
</span><span id="Redlines-465"><a href="#Redlines-465"><span class="linenos">465</span></a>            <span class="n">tag</span><span class="p">,</span> <span class="n">i1</span><span class="p">,</span> <span class="n">i2</span><span class="p">,</span> <span class="n">j1</span><span class="p">,</span> <span class="n">j2</span> <span class="o">=</span> <span class="n">diff_op</span><span class="o">.</span><span class="n">opcodes</span>
</span><span id="Redlines-466"><a href="#Redlines-466"><span class="linenos">466</span></a>            <span class="n">source_tokens</span> <span class="o">=</span> <span class="n">diff_op</span><span class="o">.</span><span class="n">source_chunk</span><span class="o">.</span><span class="n">text</span>
</span><span id="Redlines-467"><a href="#Redlines-467"><span class="linenos">467</span></a>            <span class="n">test_tokens</span> <span class="o">=</span> <span class="n">diff_op</span><span class="o">.</span><span class="n">test_chunk</span><span class="o">.</span><span class="n">text</span>
</span><span id="Redlines-468"><a href="#Redlines-468"><span class="linenos">468</span></a>
</span><span id="Redlines-469"><a href="#Redlines-469"><span class="linenos">469</span></a>            <span class="k">if</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;equal&quot;</span><span class="p">:</span>
</span><span id="Redlines-470"><a href="#Redlines-470"><span class="linenos">470</span></a>                <span class="n">temp_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">source_tokens</span><span class="p">[</span><span class="n">i1</span><span class="p">:</span><span class="n">i2</span><span class="p">])</span>
</span><span id="Redlines-471"><a href="#Redlines-471"><span class="linenos">471</span></a>                <span class="n">temp_str</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;¶ &quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">temp_str</span><span class="p">)</span>
</span><span id="Redlines-472"><a href="#Redlines-472"><span class="linenos">472</span></a>                <span class="c1"># here we use &#39;¶ &#39; instead of &#39; ¶ &#39;, because the leading space will be included in the previous token,</span>
</span><span id="Redlines-473"><a href="#Redlines-473"><span class="linenos">473</span></a>                <span class="c1"># according to tokenizer = re.compile(r&quot;((?:[^()\s]+|[().?!-])\s*)&quot;)</span>
</span><span id="Redlines-474"><a href="#Redlines-474"><span class="linenos">474</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp_str</span><span class="p">)</span>
</span><span id="Redlines-475"><a href="#Redlines-475"><span class="linenos">475</span></a>            <span class="k">elif</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;insert&quot;</span><span class="p">:</span>
</span><span id="Redlines-476"><a href="#Redlines-476"><span class="linenos">476</span></a>                <span class="n">temp_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">test_tokens</span><span class="p">[</span><span class="n">j1</span><span class="p">:</span><span class="n">j2</span><span class="p">])</span>
</span><span id="Redlines-477"><a href="#Redlines-477"><span class="linenos">477</span></a>                <span class="n">splits</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;¶ &quot;</span><span class="p">,</span> <span class="n">temp_str</span><span class="p">)</span>
</span><span id="Redlines-478"><a href="#Redlines-478"><span class="linenos">478</span></a>                <span class="k">for</span> <span class="n">split</span> <span class="ow">in</span> <span class="n">splits</span><span class="p">:</span>
</span><span id="Redlines-479"><a href="#Redlines-479"><span class="linenos">479</span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">md_styles</span><span class="p">[</span><span class="s1">&#39;ins&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}{</span><span class="n">split</span><span class="si">}{</span><span class="n">md_styles</span><span class="p">[</span><span class="s1">&#39;ins&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Redlines-480"><a href="#Redlines-480"><span class="linenos">480</span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Redlines-481"><a href="#Redlines-481"><span class="linenos">481</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">splits</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Redlines-482"><a href="#Redlines-482"><span class="linenos">482</span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span id="Redlines-483"><a href="#Redlines-483"><span class="linenos">483</span></a>            <span class="k">elif</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;delete&quot;</span><span class="p">:</span>
</span><span id="Redlines-484"><a href="#Redlines-484"><span class="linenos">484</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="Redlines-485"><a href="#Redlines-485"><span class="linenos">485</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">md_styles</span><span class="p">[</span><span class="s1">&#39;del&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}{</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">source_tokens</span><span class="p">[</span><span class="n">i1</span><span class="p">:</span><span class="n">i2</span><span class="p">])</span><span class="si">}{</span><span class="n">md_styles</span><span class="p">[</span><span class="s1">&#39;del&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="Redlines-486"><a href="#Redlines-486"><span class="linenos">486</span></a>                <span class="p">)</span>
</span><span id="Redlines-487"><a href="#Redlines-487"><span class="linenos">487</span></a>                <span class="c1"># for &#39;delete&#39;, we make no change, because otherwise there will be two times &#39;\n\n&#39; than the original</span>
</span><span id="Redlines-488"><a href="#Redlines-488"><span class="linenos">488</span></a>                <span class="c1"># text.</span>
</span><span id="Redlines-489"><a href="#Redlines-489"><span class="linenos">489</span></a>            <span class="k">elif</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;replace&quot;</span><span class="p">:</span>
</span><span id="Redlines-490"><a href="#Redlines-490"><span class="linenos">490</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="Redlines-491"><a href="#Redlines-491"><span class="linenos">491</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">md_styles</span><span class="p">[</span><span class="s1">&#39;del&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}{</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">source_tokens</span><span class="p">[</span><span class="n">i1</span><span class="p">:</span><span class="n">i2</span><span class="p">])</span><span class="si">}{</span><span class="n">md_styles</span><span class="p">[</span><span class="s1">&#39;del&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="Redlines-492"><a href="#Redlines-492"><span class="linenos">492</span></a>                <span class="p">)</span>
</span><span id="Redlines-493"><a href="#Redlines-493"><span class="linenos">493</span></a>                <span class="n">temp_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">test_tokens</span><span class="p">[</span><span class="n">j1</span><span class="p">:</span><span class="n">j2</span><span class="p">])</span>
</span><span id="Redlines-494"><a href="#Redlines-494"><span class="linenos">494</span></a>                <span class="n">splits</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;¶ &quot;</span><span class="p">,</span> <span class="n">temp_str</span><span class="p">)</span>
</span><span id="Redlines-495"><a href="#Redlines-495"><span class="linenos">495</span></a>                <span class="k">for</span> <span class="n">split</span> <span class="ow">in</span> <span class="n">splits</span><span class="p">:</span>
</span><span id="Redlines-496"><a href="#Redlines-496"><span class="linenos">496</span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">md_styles</span><span class="p">[</span><span class="s1">&#39;ins&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}{</span><span class="n">split</span><span class="si">}{</span><span class="n">md_styles</span><span class="p">[</span><span class="s1">&#39;ins&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Redlines-497"><a href="#Redlines-497"><span class="linenos">497</span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Redlines-498"><a href="#Redlines-498"><span class="linenos">498</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">splits</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Redlines-499"><a href="#Redlines-499"><span class="linenos">499</span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span id="Redlines-500"><a href="#Redlines-500"><span class="linenos">500</span></a>
</span><span id="Redlines-501"><a href="#Redlines-501"><span class="linenos">501</span></a>        <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span><span id="Redlines-502"><a href="#Redlines-502"><span class="linenos">502</span></a>
</span><span id="Redlines-503"><a href="#Redlines-503"><span class="linenos">503</span></a>    <span class="nd">@property</span>
</span><span id="Redlines-504"><a href="#Redlines-504"><span class="linenos">504</span></a>    <span class="k">def</span> <span class="nf">output_rich</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Text</span><span class="p">:</span>
</span><span id="Redlines-505"><a href="#Redlines-505"><span class="linenos">505</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Redlines-506"><a href="#Redlines-506"><span class="linenos">506</span></a><span class="sd">        Returns the delta in text with colors/style for the console.</span>
</span><span id="Redlines-507"><a href="#Redlines-507"><span class="linenos">507</span></a>
</span><span id="Redlines-508"><a href="#Redlines-508"><span class="linenos">508</span></a><span class="sd">        :return: The delta in text with colors/style for the console.</span>
</span><span id="Redlines-509"><a href="#Redlines-509"><span class="linenos">509</span></a><span class="sd">        :rtype: Text</span>
</span><span id="Redlines-510"><a href="#Redlines-510"><span class="linenos">510</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Redlines-511"><a href="#Redlines-511"><span class="linenos">511</span></a>        <span class="n">console_text</span> <span class="o">=</span> <span class="n">Text</span><span class="p">()</span>
</span><span id="Redlines-512"><a href="#Redlines-512"><span class="linenos">512</span></a>
</span><span id="Redlines-513"><a href="#Redlines-513"><span class="linenos">513</span></a>        <span class="k">for</span> <span class="n">diff_op</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_diff_ops</span><span class="p">:</span>
</span><span id="Redlines-514"><a href="#Redlines-514"><span class="linenos">514</span></a>            <span class="n">tag</span><span class="p">,</span> <span class="n">i1</span><span class="p">,</span> <span class="n">i2</span><span class="p">,</span> <span class="n">j1</span><span class="p">,</span> <span class="n">j2</span> <span class="o">=</span> <span class="n">diff_op</span><span class="o">.</span><span class="n">opcodes</span>
</span><span id="Redlines-515"><a href="#Redlines-515"><span class="linenos">515</span></a>            <span class="n">source_tokens</span> <span class="o">=</span> <span class="n">diff_op</span><span class="o">.</span><span class="n">source_chunk</span><span class="o">.</span><span class="n">text</span>
</span><span id="Redlines-516"><a href="#Redlines-516"><span class="linenos">516</span></a>            <span class="n">test_tokens</span> <span class="o">=</span> <span class="n">diff_op</span><span class="o">.</span><span class="n">test_chunk</span><span class="o">.</span><span class="n">text</span>
</span><span id="Redlines-517"><a href="#Redlines-517"><span class="linenos">517</span></a>
</span><span id="Redlines-518"><a href="#Redlines-518"><span class="linenos">518</span></a>            <span class="k">if</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;equal&quot;</span><span class="p">:</span>
</span><span id="Redlines-519"><a href="#Redlines-519"><span class="linenos">519</span></a>                <span class="n">temp_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">source_tokens</span><span class="p">[</span><span class="n">i1</span><span class="p">:</span><span class="n">i2</span><span class="p">])</span>
</span><span id="Redlines-520"><a href="#Redlines-520"><span class="linenos">520</span></a>                <span class="n">temp_str</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;¶ &quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">temp_str</span><span class="p">)</span>
</span><span id="Redlines-521"><a href="#Redlines-521"><span class="linenos">521</span></a>                <span class="n">console_text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp_str</span><span class="p">)</span>
</span><span id="Redlines-522"><a href="#Redlines-522"><span class="linenos">522</span></a>            <span class="k">elif</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;insert&quot;</span><span class="p">:</span>
</span><span id="Redlines-523"><a href="#Redlines-523"><span class="linenos">523</span></a>                <span class="n">temp_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">test_tokens</span><span class="p">[</span><span class="n">j1</span><span class="p">:</span><span class="n">j2</span><span class="p">])</span>
</span><span id="Redlines-524"><a href="#Redlines-524"><span class="linenos">524</span></a>                <span class="n">splits</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;¶ &quot;</span><span class="p">,</span> <span class="n">temp_str</span><span class="p">)</span>
</span><span id="Redlines-525"><a href="#Redlines-525"><span class="linenos">525</span></a>                <span class="k">for</span> <span class="n">split</span> <span class="ow">in</span> <span class="n">splits</span><span class="p">:</span>
</span><span id="Redlines-526"><a href="#Redlines-526"><span class="linenos">526</span></a>                    <span class="n">console_text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">split</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">)</span>
</span><span id="Redlines-527"><a href="#Redlines-527"><span class="linenos">527</span></a>            <span class="k">elif</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;delete&quot;</span><span class="p">:</span>
</span><span id="Redlines-528"><a href="#Redlines-528"><span class="linenos">528</span></a>                <span class="n">console_text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">source_tokens</span><span class="p">[</span><span class="n">i1</span><span class="p">:</span><span class="n">i2</span><span class="p">]),</span> <span class="s2">&quot;strike red&quot;</span><span class="p">)</span>
</span><span id="Redlines-529"><a href="#Redlines-529"><span class="linenos">529</span></a>            <span class="k">elif</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;replace&quot;</span><span class="p">:</span>
</span><span id="Redlines-530"><a href="#Redlines-530"><span class="linenos">530</span></a>                <span class="n">console_text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">source_tokens</span><span class="p">[</span><span class="n">i1</span><span class="p">:</span><span class="n">i2</span><span class="p">]),</span> <span class="s2">&quot;strike red&quot;</span><span class="p">)</span>
</span><span id="Redlines-531"><a href="#Redlines-531"><span class="linenos">531</span></a>                <span class="n">temp_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">test_tokens</span><span class="p">[</span><span class="n">j1</span><span class="p">:</span><span class="n">j2</span><span class="p">])</span>
</span><span id="Redlines-532"><a href="#Redlines-532"><span class="linenos">532</span></a>                <span class="n">splits</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;¶ &quot;</span><span class="p">,</span> <span class="n">temp_str</span><span class="p">)</span>
</span><span id="Redlines-533"><a href="#Redlines-533"><span class="linenos">533</span></a>                <span class="k">for</span> <span class="n">split</span> <span class="ow">in</span> <span class="n">splits</span><span class="p">:</span>
</span><span id="Redlines-534"><a href="#Redlines-534"><span class="linenos">534</span></a>                    <span class="n">console_text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">split</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">)</span>
</span><span id="Redlines-535"><a href="#Redlines-535"><span class="linenos">535</span></a>
</span><span id="Redlines-536"><a href="#Redlines-536"><span class="linenos">536</span></a>        <span class="k">return</span> <span class="n">console_text</span>
</span><span id="Redlines-537"><a href="#Redlines-537"><span class="linenos">537</span></a>
</span><span id="Redlines-538"><a href="#Redlines-538"><span class="linenos">538</span></a>    <span class="k">def</span> <span class="nf">compare</span><span class="p">(</span>
</span><span id="Redlines-539"><a href="#Redlines-539"><span class="linenos">539</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Redlines-540"><a href="#Redlines-540"><span class="linenos">540</span></a>        <span class="n">test</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Redlines-541"><a href="#Redlines-541"><span class="linenos">541</span></a>        <span class="n">output</span><span class="p">:</span> <span class="n">OutputTypeLike</span> <span class="o">=</span> <span class="n">OutputType</span><span class="o">.</span><span class="n">MARKDOWN</span><span class="p">,</span>
</span><span id="Redlines-542"><a href="#Redlines-542"><span class="linenos">542</span></a>        <span class="o">**</span><span class="n">options</span><span class="p">:</span> <span class="n">Unpack</span><span class="p">[</span><span class="n">RedlinesOptions</span><span class="p">],</span>
</span><span id="Redlines-543"><a href="#Redlines-543"><span class="linenos">543</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Text</span> <span class="o">|</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Redlines-544"><a href="#Redlines-544"><span class="linenos">544</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Redlines-545"><a href="#Redlines-545"><span class="linenos">545</span></a><span class="sd">        Compare `test` with `source`, and produce a delta in a format specified by `output`.</span>
</span><span id="Redlines-546"><a href="#Redlines-546"><span class="linenos">546</span></a>
</span><span id="Redlines-547"><a href="#Redlines-547"><span class="linenos">547</span></a><span class="sd">        :param test: Optional test string to compare. If None, uses the test string provided during initialisation.</span>
</span><span id="Redlines-548"><a href="#Redlines-548"><span class="linenos">548</span></a><span class="sd">        :type test: str | None</span>
</span><span id="Redlines-549"><a href="#Redlines-549"><span class="linenos">549</span></a><span class="sd">        :param output: The format which the delta should be produced. Currently, &quot;markdown&quot; and &quot;rich&quot; are supported. Defaults to &quot;markdown&quot;.</span>
</span><span id="Redlines-550"><a href="#Redlines-550"><span class="linenos">550</span></a><span class="sd">        :type output: OutputTypeLike</span>
</span><span id="Redlines-551"><a href="#Redlines-551"><span class="linenos">551</span></a><span class="sd">        :param options: Additional options for comparison and output formatting.</span>
</span><span id="Redlines-552"><a href="#Redlines-552"><span class="linenos">552</span></a><span class="sd">        :type options: RedlinesOptions</span>
</span><span id="Redlines-553"><a href="#Redlines-553"><span class="linenos">553</span></a><span class="sd">        :return: The delta in the format specified by `output`.</span>
</span><span id="Redlines-554"><a href="#Redlines-554"><span class="linenos">554</span></a><span class="sd">        :rtype: Text | str</span>
</span><span id="Redlines-555"><a href="#Redlines-555"><span class="linenos">555</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Redlines-556"><a href="#Redlines-556"><span class="linenos">556</span></a>        <span class="k">if</span> <span class="n">options</span><span class="p">:</span>
</span><span id="Redlines-557"><a href="#Redlines-557"><span class="linenos">557</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="n">options</span>
</span><span id="Redlines-558"><a href="#Redlines-558"><span class="linenos">558</span></a>
</span><span id="Redlines-559"><a href="#Redlines-559"><span class="linenos">559</span></a>        <span class="k">if</span> <span class="n">test</span><span class="p">:</span>
</span><span id="Redlines-560"><a href="#Redlines-560"><span class="linenos">560</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test</span> <span class="ow">and</span> <span class="n">test</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test</span><span class="p">:</span>
</span><span id="Redlines-561"><a href="#Redlines-561"><span class="linenos">561</span></a>                <span class="c1"># If we&#39;ve already processed this test string, no need to reprocess</span>
</span><span id="Redlines-562"><a href="#Redlines-562"><span class="linenos">562</span></a>                <span class="k">pass</span>
</span><span id="Redlines-563"><a href="#Redlines-563"><span class="linenos">563</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Redlines-564"><a href="#Redlines-564"><span class="linenos">564</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">test</span> <span class="o">=</span> <span class="n">test</span>
</span><span id="Redlines-565"><a href="#Redlines-565"><span class="linenos">565</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Redlines-566"><a href="#Redlines-566"><span class="linenos">566</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="Redlines-567"><a href="#Redlines-567"><span class="linenos">567</span></a>                <span class="s2">&quot;No test string was provided when the function was called, or during initialisation.&quot;</span>
</span><span id="Redlines-568"><a href="#Redlines-568"><span class="linenos">568</span></a>            <span class="p">)</span>
</span><span id="Redlines-569"><a href="#Redlines-569"><span class="linenos">569</span></a>
</span><span id="Redlines-570"><a href="#Redlines-570"><span class="linenos">570</span></a>        <span class="k">if</span> <span class="n">output</span> <span class="o">==</span> <span class="n">OutputType</span><span class="o">.</span><span class="n">MARKDOWN</span><span class="p">:</span>
</span><span id="Redlines-571"><a href="#Redlines-571"><span class="linenos">571</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_markdown</span>
</span><span id="Redlines-572"><a href="#Redlines-572"><span class="linenos">572</span></a>        <span class="k">elif</span> <span class="n">output</span> <span class="o">==</span> <span class="n">OutputType</span><span class="o">.</span><span class="n">RICH</span><span class="p">:</span>
</span><span id="Redlines-573"><a href="#Redlines-573"><span class="linenos">573</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_rich</span>
</span><span id="Redlines-574"><a href="#Redlines-574"><span class="linenos">574</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_markdown</span>
</span></pre></div>


    

                            <div id="Redlines.__init__" class="classattr">
                                        <input id="Redlines.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Redlines</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">source</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n"><a href="document.html#Document">redlines.document.Document</a></span>,</span><span class="param">	<span class="n">test</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n"><a href="document.html#Document">redlines.document.Document</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="o">**</span><span class="n">options</span><span class="p">:</span> <span class="n">Unpack</span><span class="p">[</span><span class="n"><a href="#RedlinesOptions">RedlinesOptions</a></span><span class="p">]</span></span>)</span>

                <label class="view-source-button" for="Redlines.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Redlines.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Redlines.__init__-107"><a href="#Redlines.__init__-107"><span class="linenos">107</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="Redlines.__init__-108"><a href="#Redlines.__init__-108"><span class="linenos">108</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Redlines.__init__-109"><a href="#Redlines.__init__-109"><span class="linenos">109</span></a>        <span class="n">source</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Document</span><span class="p">,</span>
</span><span id="Redlines.__init__-110"><a href="#Redlines.__init__-110"><span class="linenos">110</span></a>        <span class="n">test</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Document</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Redlines.__init__-111"><a href="#Redlines.__init__-111"><span class="linenos">111</span></a>        <span class="o">**</span><span class="n">options</span><span class="p">:</span> <span class="n">Unpack</span><span class="p">[</span><span class="n">RedlinesOptions</span><span class="p">],</span>
</span><span id="Redlines.__init__-112"><a href="#Redlines.__init__-112"><span class="linenos">112</span></a>    <span class="p">):</span>
</span><span id="Redlines.__init__-113"><a href="#Redlines.__init__-113"><span class="linenos">113</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Redlines.__init__-114"><a href="#Redlines.__init__-114"><span class="linenos">114</span></a><span class="sd">        Redline is a class used to compare text, and producing human-readable differences or deltas</span>
</span><span id="Redlines.__init__-115"><a href="#Redlines.__init__-115"><span class="linenos">115</span></a><span class="sd">        which look like track changes in Microsoft Word.</span>
</span><span id="Redlines.__init__-116"><a href="#Redlines.__init__-116"><span class="linenos">116</span></a>
</span><span id="Redlines.__init__-117"><a href="#Redlines.__init__-117"><span class="linenos">117</span></a><span class="sd">        ```python</span>
</span><span id="Redlines.__init__-118"><a href="#Redlines.__init__-118"><span class="linenos">118</span></a><span class="sd">        # import the class</span>
</span><span id="Redlines.__init__-119"><a href="#Redlines.__init__-119"><span class="linenos">119</span></a><span class="sd">        from redlines import Redlines</span>
</span><span id="Redlines.__init__-120"><a href="#Redlines.__init__-120"><span class="linenos">120</span></a>
</span><span id="Redlines.__init__-121"><a href="#Redlines.__init__-121"><span class="linenos">121</span></a><span class="sd">        # Create a Redlines object using the two strings to compare</span>
</span><span id="Redlines.__init__-122"><a href="#Redlines.__init__-122"><span class="linenos">122</span></a><span class="sd">        test = Redlines(</span>
</span><span id="Redlines.__init__-123"><a href="#Redlines.__init__-123"><span class="linenos">123</span></a><span class="sd">            &quot;The quick brown fox jumps over the lazy dog.&quot;,</span>
</span><span id="Redlines.__init__-124"><a href="#Redlines.__init__-124"><span class="linenos">124</span></a><span class="sd">            &quot;The quick brown fox walks past the lazy dog.&quot;,</span>
</span><span id="Redlines.__init__-125"><a href="#Redlines.__init__-125"><span class="linenos">125</span></a><span class="sd">        )</span>
</span><span id="Redlines.__init__-126"><a href="#Redlines.__init__-126"><span class="linenos">126</span></a>
</span><span id="Redlines.__init__-127"><a href="#Redlines.__init__-127"><span class="linenos">127</span></a><span class="sd">        # This produces an output in Markdown format</span>
</span><span id="Redlines.__init__-128"><a href="#Redlines.__init__-128"><span class="linenos">128</span></a><span class="sd">        test.output_markdown</span>
</span><span id="Redlines.__init__-129"><a href="#Redlines.__init__-129"><span class="linenos">129</span></a><span class="sd">        ```</span>
</span><span id="Redlines.__init__-130"><a href="#Redlines.__init__-130"><span class="linenos">130</span></a>
</span><span id="Redlines.__init__-131"><a href="#Redlines.__init__-131"><span class="linenos">131</span></a><span class="sd">        Besides strings, Redlines can also receive an input in another format if it is supported by the Document class</span>
</span><span id="Redlines.__init__-132"><a href="#Redlines.__init__-132"><span class="linenos">132</span></a>
</span><span id="Redlines.__init__-133"><a href="#Redlines.__init__-133"><span class="linenos">133</span></a><span class="sd">        ```python</span>
</span><span id="Redlines.__init__-134"><a href="#Redlines.__init__-134"><span class="linenos">134</span></a><span class="sd">        from redlines import PlainTextFile</span>
</span><span id="Redlines.__init__-135"><a href="#Redlines.__init__-135"><span class="linenos">135</span></a>
</span><span id="Redlines.__init__-136"><a href="#Redlines.__init__-136"><span class="linenos">136</span></a><span class="sd">        source = PlainTextFile(&quot;tests/documents/PlainTextFile/source.txt&quot;)</span>
</span><span id="Redlines.__init__-137"><a href="#Redlines.__init__-137"><span class="linenos">137</span></a><span class="sd">        test = PlainTextFile(&quot;tests/documents/PlainTextFile/test.txt&quot;)</span>
</span><span id="Redlines.__init__-138"><a href="#Redlines.__init__-138"><span class="linenos">138</span></a>
</span><span id="Redlines.__init__-139"><a href="#Redlines.__init__-139"><span class="linenos">139</span></a><span class="sd">        redline = Redlines(source, test)</span>
</span><span id="Redlines.__init__-140"><a href="#Redlines.__init__-140"><span class="linenos">140</span></a><span class="sd">        assert (</span>
</span><span id="Redlines.__init__-141"><a href="#Redlines.__init__-141"><span class="linenos">141</span></a><span class="sd">            redline.output_markdown</span>
</span><span id="Redlines.__init__-142"><a href="#Redlines.__init__-142"><span class="linenos">142</span></a><span class="sd">            == &quot;The quick brown fox &lt;span style=&#39;color:red;font-weight:700;text-decoration:line-through;&#39;&gt;jumps over &lt;/span&gt;&lt;span style=&#39;color:green;font-weight:700;&#39;&gt;walks past &lt;/span&gt;the lazy dog.&quot;</span>
</span><span id="Redlines.__init__-143"><a href="#Redlines.__init__-143"><span class="linenos">143</span></a><span class="sd">        )</span>
</span><span id="Redlines.__init__-144"><a href="#Redlines.__init__-144"><span class="linenos">144</span></a>
</span><span id="Redlines.__init__-145"><a href="#Redlines.__init__-145"><span class="linenos">145</span></a><span class="sd">        ```</span>
</span><span id="Redlines.__init__-146"><a href="#Redlines.__init__-146"><span class="linenos">146</span></a>
</span><span id="Redlines.__init__-147"><a href="#Redlines.__init__-147"><span class="linenos">147</span></a><span class="sd">        :param source: The source text to be used as a basis for comparison.</span>
</span><span id="Redlines.__init__-148"><a href="#Redlines.__init__-148"><span class="linenos">148</span></a><span class="sd">        :type source: str | Document</span>
</span><span id="Redlines.__init__-149"><a href="#Redlines.__init__-149"><span class="linenos">149</span></a><span class="sd">        :param test: Optional test text to compare with the source.</span>
</span><span id="Redlines.__init__-150"><a href="#Redlines.__init__-150"><span class="linenos">150</span></a><span class="sd">        :type test: str | Document | None</span>
</span><span id="Redlines.__init__-151"><a href="#Redlines.__init__-151"><span class="linenos">151</span></a><span class="sd">        :param options: Additional options for comparison and output formatting.</span>
</span><span id="Redlines.__init__-152"><a href="#Redlines.__init__-152"><span class="linenos">152</span></a><span class="sd">        :type options: RedlinesOptions</span>
</span><span id="Redlines.__init__-153"><a href="#Redlines.__init__-153"><span class="linenos">153</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Redlines.__init__-154"><a href="#Redlines.__init__-154"><span class="linenos">154</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">processor</span> <span class="o">=</span> <span class="n">WholeDocumentProcessor</span><span class="p">()</span>
</span><span id="Redlines.__init__-155"><a href="#Redlines.__init__-155"><span class="linenos">155</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">text</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">Document</span><span class="p">)</span> <span class="k">else</span> <span class="n">source</span>
</span><span id="Redlines.__init__-156"><a href="#Redlines.__init__-156"><span class="linenos">156</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="n">options</span>
</span><span id="Redlines.__init__-157"><a href="#Redlines.__init__-157"><span class="linenos">157</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_diff_operations</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Redlines.__init__-158"><a href="#Redlines.__init__-158"><span class="linenos">158</span></a>        <span class="k">if</span> <span class="n">test</span><span class="p">:</span>
</span><span id="Redlines.__init__-159"><a href="#Redlines.__init__-159"><span class="linenos">159</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">test</span> <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="n">text</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">Document</span><span class="p">)</span> <span class="k">else</span> <span class="n">test</span>
</span><span id="Redlines.__init__-160"><a href="#Redlines.__init__-160"><span class="linenos">160</span></a>            <span class="c1"># self.compare()</span>
</span></pre></div>


            <div class="docstring"><p>Redline is a class used to compare text, and producing human-readable differences or deltas
which look like track changes in Microsoft Word.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="c1"># import the class</span>
<span class="kn">from</span> <span class="nn">redlines</span> <span class="kn">import</span> <span class="n">Redlines</span>

<span class="c1"># Create a Redlines object using the two strings to compare</span>
<span class="n">test</span> <span class="o">=</span> <span class="n">Redlines</span><span class="p">(</span>
    <span class="s2">&quot;The quick brown fox jumps over the lazy dog.&quot;</span><span class="p">,</span>
    <span class="s2">&quot;The quick brown fox walks past the lazy dog.&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># This produces an output in Markdown format</span>
<span class="n">test</span><span class="o">.</span><span class="n">output_markdown</span>
</code></pre>
</div>

<p>Besides strings, Redlines can also receive an input in another format if it is supported by the Document class</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="kn">from</span> <span class="nn">redlines</span> <span class="kn">import</span> <span class="n">PlainTextFile</span>

<span class="n">source</span> <span class="o">=</span> <span class="n">PlainTextFile</span><span class="p">(</span><span class="s2">&quot;tests/documents/PlainTextFile/source.txt&quot;</span><span class="p">)</span>
<span class="n">test</span> <span class="o">=</span> <span class="n">PlainTextFile</span><span class="p">(</span><span class="s2">&quot;tests/documents/PlainTextFile/test.txt&quot;</span><span class="p">)</span>

<span class="n">redline</span> <span class="o">=</span> <span class="n">Redlines</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">test</span><span class="p">)</span>
<span class="k">assert</span> <span class="p">(</span>
    <span class="n">redline</span><span class="o">.</span><span class="n">output_markdown</span>
    <span class="o">==</span> <span class="s2">&quot;The quick brown fox &lt;span style=&#39;color:red;font-weight:700;text-decoration:line-through;&#39;&gt;jumps over &lt;/span&gt;&lt;span style=&#39;color:green;font-weight:700;&#39;&gt;walks past &lt;/span&gt;the lazy dog.&quot;</span>
<span class="p">)</span>
</code></pre>
</div>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>source</strong>:  The source text to be used as a basis for comparison.</li>
<li><strong>test</strong>:  Optional test text to compare with the source.</li>
<li><strong>options</strong>:  Additional options for comparison and output formatting.</li>
</ul>
</div>


                            </div>
                            <div id="Redlines.source" class="classattr">
                                        <input id="Redlines.source-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">source</span><span class="annotation">: str</span>

                <label class="view-source-button" for="Redlines.source-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Redlines.source"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Redlines.source-40"><a href="#Redlines.source-40"><span class="linenos">40</span></a>    <span class="nd">@property</span>
</span><span id="Redlines.source-41"><a href="#Redlines.source-41"><span class="linenos">41</span></a>    <span class="k">def</span> <span class="nf">source</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Redlines.source-42"><a href="#Redlines.source-42"><span class="linenos">42</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Redlines.source-43"><a href="#Redlines.source-43"><span class="linenos">43</span></a><span class="sd">        Get the source text to be used as a basis for comparison.</span>
</span><span id="Redlines.source-44"><a href="#Redlines.source-44"><span class="linenos">44</span></a>
</span><span id="Redlines.source-45"><a href="#Redlines.source-45"><span class="linenos">45</span></a><span class="sd">        :return: The source text to be used as a basis for comparison.</span>
</span><span id="Redlines.source-46"><a href="#Redlines.source-46"><span class="linenos">46</span></a><span class="sd">        :rtype: str</span>
</span><span id="Redlines.source-47"><a href="#Redlines.source-47"><span class="linenos">47</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Redlines.source-48"><a href="#Redlines.source-48"><span class="linenos">48</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_source</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Redlines.source-49"><a href="#Redlines.source-49"><span class="linenos">49</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No source string was provided.&quot;</span><span class="p">)</span>
</span><span id="Redlines.source-50"><a href="#Redlines.source-50"><span class="linenos">50</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_source</span>
</span></pre></div>


            <div class="docstring"><p>Get the source text to be used as a basis for comparison.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The source text to be used as a basis for comparison.</p>
</blockquote>
</div>


                            </div>
                            <div id="Redlines.test" class="classattr">
                                        <input id="Redlines.test-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">test</span><span class="annotation">: str</span>

                <label class="view-source-button" for="Redlines.test-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Redlines.test"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Redlines.test-60"><a href="#Redlines.test-60"><span class="linenos">60</span></a>    <span class="nd">@property</span>
</span><span id="Redlines.test-61"><a href="#Redlines.test-61"><span class="linenos">61</span></a>    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Redlines.test-62"><a href="#Redlines.test-62"><span class="linenos">62</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Redlines.test-63"><a href="#Redlines.test-63"><span class="linenos">63</span></a><span class="sd">        Get the text to be compared with the source.</span>
</span><span id="Redlines.test-64"><a href="#Redlines.test-64"><span class="linenos">64</span></a>
</span><span id="Redlines.test-65"><a href="#Redlines.test-65"><span class="linenos">65</span></a><span class="sd">        :return: The text to be compared with the source.</span>
</span><span id="Redlines.test-66"><a href="#Redlines.test-66"><span class="linenos">66</span></a><span class="sd">        :rtype: str</span>
</span><span id="Redlines.test-67"><a href="#Redlines.test-67"><span class="linenos">67</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Redlines.test-68"><a href="#Redlines.test-68"><span class="linenos">68</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Redlines.test-69"><a href="#Redlines.test-69"><span class="linenos">69</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No test string was provided.&quot;</span><span class="p">)</span>
</span><span id="Redlines.test-70"><a href="#Redlines.test-70"><span class="linenos">70</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test</span>
</span></pre></div>


            <div class="docstring"><p>Get the text to be compared with the source.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The text to be compared with the source.</p>
</blockquote>
</div>


                            </div>
                            <div id="Redlines.redlines" class="classattr">
                                        <input id="Redlines.redlines-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">redlines</span><span class="annotation">: list[<a href="processor.html#Redline">redlines.processor.Redline</a>]</span>

                <label class="view-source-button" for="Redlines.redlines-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Redlines.redlines"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Redlines.redlines-94"><a href="#Redlines.redlines-94"><span class="linenos"> 94</span></a>    <span class="nd">@property</span>
</span><span id="Redlines.redlines-95"><a href="#Redlines.redlines-95"><span class="linenos"> 95</span></a>    <span class="k">def</span> <span class="nf">redlines</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Redline</span><span class="p">]:</span>
</span><span id="Redlines.redlines-96"><a href="#Redlines.redlines-96"><span class="linenos"> 96</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Redlines.redlines-97"><a href="#Redlines.redlines-97"><span class="linenos"> 97</span></a><span class="sd">        Return the list of Redline objects representing actual changes between source and test.</span>
</span><span id="Redlines.redlines-98"><a href="#Redlines.redlines-98"><span class="linenos"> 98</span></a>
</span><span id="Redlines.redlines-99"><a href="#Redlines.redlines-99"><span class="linenos"> 99</span></a><span class="sd">        This is an alias for the `changes` property and provides the same functionality.</span>
</span><span id="Redlines.redlines-100"><a href="#Redlines.redlines-100"><span class="linenos">100</span></a><span class="sd">        Only actual changes are returned (equal operations are excluded).</span>
</span><span id="Redlines.redlines-101"><a href="#Redlines.redlines-101"><span class="linenos">101</span></a>
</span><span id="Redlines.redlines-102"><a href="#Redlines.redlines-102"><span class="linenos">102</span></a><span class="sd">        :return: List of Redline objects</span>
</span><span id="Redlines.redlines-103"><a href="#Redlines.redlines-103"><span class="linenos">103</span></a><span class="sd">        :rtype: list[Redline]</span>
</span><span id="Redlines.redlines-104"><a href="#Redlines.redlines-104"><span class="linenos">104</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Redlines.redlines-105"><a href="#Redlines.redlines-105"><span class="linenos">105</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">changes</span>
</span></pre></div>


            <div class="docstring"><p>Return the list of Redline objects representing actual changes between source and test.</p>

<p>This is an alias for the <code><a href="#Redlines.changes">changes</a></code> property and provides the same functionality.
Only actual changes are returned (equal operations are excluded).</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>List of Redline objects</p>
</blockquote>
</div>


                            </div>
                            <div id="Redlines.processor" class="classattr">
                                <div class="attr variable">
            <span class="name">processor</span>

        
    </div>
    <a class="headerlink" href="#Redlines.processor"></a>
    
    

                            </div>
                            <div id="Redlines.options" class="classattr">
                                <div class="attr variable">
            <span class="name">options</span>

        
    </div>
    <a class="headerlink" href="#Redlines.options"></a>
    
    

                            </div>
                            <div id="Redlines.opcodes" class="classattr">
                                        <input id="Redlines.opcodes-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">opcodes</span><span class="annotation">: list[tuple[str, int, int, int, int]]</span>

                <label class="view-source-button" for="Redlines.opcodes-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Redlines.opcodes"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Redlines.opcodes-162"><a href="#Redlines.opcodes-162"><span class="linenos">162</span></a>    <span class="nd">@property</span>
</span><span id="Redlines.opcodes-163"><a href="#Redlines.opcodes-163"><span class="linenos">163</span></a>    <span class="k">def</span> <span class="nf">opcodes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]:</span>
</span><span id="Redlines.opcodes-164"><a href="#Redlines.opcodes-164"><span class="linenos">164</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Redlines.opcodes-165"><a href="#Redlines.opcodes-165"><span class="linenos">165</span></a><span class="sd">        Return list of 5-tuples describing how to turn `source` into `test`.</span>
</span><span id="Redlines.opcodes-166"><a href="#Redlines.opcodes-166"><span class="linenos">166</span></a><span class="sd">        Similar to [`SequenceMatcher.get_opcodes`](https://docs.python.org/3/library/difflib.html#difflib.SequenceMatcher.get_opcodes).</span>
</span><span id="Redlines.opcodes-167"><a href="#Redlines.opcodes-167"><span class="linenos">167</span></a>
</span><span id="Redlines.opcodes-168"><a href="#Redlines.opcodes-168"><span class="linenos">168</span></a><span class="sd">        ```pycon</span>
</span><span id="Redlines.opcodes-169"><a href="#Redlines.opcodes-169"><span class="linenos">169</span></a><span class="sd">        &gt;&gt;&gt; test_string_1 = &#39;The quick brown fox jumps over the lazy dog.&#39;</span>
</span><span id="Redlines.opcodes-170"><a href="#Redlines.opcodes-170"><span class="linenos">170</span></a><span class="sd">        ... test_string_2 = &#39;The quick brown fox walks past the lazy dog.&#39;</span>
</span><span id="Redlines.opcodes-171"><a href="#Redlines.opcodes-171"><span class="linenos">171</span></a><span class="sd">        ... s = Redlines(test_string_1, test_string_2)</span>
</span><span id="Redlines.opcodes-172"><a href="#Redlines.opcodes-172"><span class="linenos">172</span></a><span class="sd">        ... s.opcodes</span>
</span><span id="Redlines.opcodes-173"><a href="#Redlines.opcodes-173"><span class="linenos">173</span></a><span class="sd">        [(&#39;equal&#39;, 0, 4, 0, 4), (&#39;replace&#39;, 4, 6, 4, 6), (&#39;equal&#39;, 6, 9, 6, 9)]</span>
</span><span id="Redlines.opcodes-174"><a href="#Redlines.opcodes-174"><span class="linenos">174</span></a><span class="sd">        ```</span>
</span><span id="Redlines.opcodes-175"><a href="#Redlines.opcodes-175"><span class="linenos">175</span></a>
</span><span id="Redlines.opcodes-176"><a href="#Redlines.opcodes-176"><span class="linenos">176</span></a><span class="sd">        :return: List of 5-tuples describing how to turn `source` into `test`.</span>
</span><span id="Redlines.opcodes-177"><a href="#Redlines.opcodes-177"><span class="linenos">177</span></a><span class="sd">        :rtype: list[tuple[str, int, int, int, int]]</span>
</span><span id="Redlines.opcodes-178"><a href="#Redlines.opcodes-178"><span class="linenos">178</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Redlines.opcodes-179"><a href="#Redlines.opcodes-179"><span class="linenos">179</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">diff_op</span><span class="o">.</span><span class="n">opcodes</span> <span class="k">for</span> <span class="n">diff_op</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_diff_ops</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Return list of 5-tuples describing how to turn <code><a href="#Redlines.source">source</a></code> into <code><a href="#Redlines.test">test</a></code>.
Similar to <a href="https://docs.python.org/3/library/difflib.html#difflib.SequenceMatcher.get_opcodes"><code>SequenceMatcher.get_opcodes</code></a>.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">test_string_1</span> <span class="o">=</span> <span class="s1">&#39;The quick brown fox jumps over the lazy dog.&#39;</span>
<span class="gp">... </span><span class="n">test_string_2</span> <span class="o">=</span> <span class="s1">&#39;The quick brown fox walks past the lazy dog.&#39;</span>
<span class="gp">... </span><span class="n">s</span> <span class="o">=</span> <span class="n">Redlines</span><span class="p">(</span><span class="n">test_string_1</span><span class="p">,</span> <span class="n">test_string_2</span><span class="p">)</span>
<span class="gp">... </span><span class="n">s</span><span class="o">.</span><span class="n">opcodes</span>
<span class="go">[(&#39;equal&#39;, 0, 4, 0, 4), (&#39;replace&#39;, 4, 6, 4, 6), (&#39;equal&#39;, 6, 9, 6, 9)]</span>
</code></pre>
</div>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>List of 5-tuples describing how to turn <code><a href="#Redlines.source">source</a></code> into <code><a href="#Redlines.test">test</a></code>.</p>
</blockquote>
</div>


                            </div>
                            <div id="Redlines.changes" class="classattr">
                                        <input id="Redlines.changes-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">changes</span><span class="annotation">: list[<a href="processor.html#Redline">redlines.processor.Redline</a>]</span>

                <label class="view-source-button" for="Redlines.changes-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Redlines.changes"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Redlines.changes-181"><a href="#Redlines.changes-181"><span class="linenos">181</span></a>    <span class="nd">@property</span>
</span><span id="Redlines.changes-182"><a href="#Redlines.changes-182"><span class="linenos">182</span></a>    <span class="k">def</span> <span class="nf">changes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Redline</span><span class="p">]:</span>
</span><span id="Redlines.changes-183"><a href="#Redlines.changes-183"><span class="linenos">183</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Redlines.changes-184"><a href="#Redlines.changes-184"><span class="linenos">184</span></a><span class="sd">        Return list of Redline objects representing the differences between source and test.</span>
</span><span id="Redlines.changes-185"><a href="#Redlines.changes-185"><span class="linenos">185</span></a>
</span><span id="Redlines.changes-186"><a href="#Redlines.changes-186"><span class="linenos">186</span></a><span class="sd">        This provides a user-friendly interface for programmatically accessing changes,</span>
</span><span id="Redlines.changes-187"><a href="#Redlines.changes-187"><span class="linenos">187</span></a><span class="sd">        with direct access to the changed text and position information. Only actual</span>
</span><span id="Redlines.changes-188"><a href="#Redlines.changes-188"><span class="linenos">188</span></a><span class="sd">        changes are returned (equal operations are excluded).</span>
</span><span id="Redlines.changes-189"><a href="#Redlines.changes-189"><span class="linenos">189</span></a>
</span><span id="Redlines.changes-190"><a href="#Redlines.changes-190"><span class="linenos">190</span></a><span class="sd">        ```python</span>
</span><span id="Redlines.changes-191"><a href="#Redlines.changes-191"><span class="linenos">191</span></a><span class="sd">        from redlines import Redlines</span>
</span><span id="Redlines.changes-192"><a href="#Redlines.changes-192"><span class="linenos">192</span></a>
</span><span id="Redlines.changes-193"><a href="#Redlines.changes-193"><span class="linenos">193</span></a><span class="sd">        test = Redlines(</span>
</span><span id="Redlines.changes-194"><a href="#Redlines.changes-194"><span class="linenos">194</span></a><span class="sd">            &quot;The quick brown fox jumps over the lazy dog.&quot;,</span>
</span><span id="Redlines.changes-195"><a href="#Redlines.changes-195"><span class="linenos">195</span></a><span class="sd">            &quot;The quick brown fox walks past the lazy dog.&quot;</span>
</span><span id="Redlines.changes-196"><a href="#Redlines.changes-196"><span class="linenos">196</span></a><span class="sd">        )</span>
</span><span id="Redlines.changes-197"><a href="#Redlines.changes-197"><span class="linenos">197</span></a>
</span><span id="Redlines.changes-198"><a href="#Redlines.changes-198"><span class="linenos">198</span></a><span class="sd">        for redline in test.changes:</span>
</span><span id="Redlines.changes-199"><a href="#Redlines.changes-199"><span class="linenos">199</span></a><span class="sd">            print(f&quot;{redline.operation}: {redline.source_text} -&gt; {redline.test_text}&quot;)</span>
</span><span id="Redlines.changes-200"><a href="#Redlines.changes-200"><span class="linenos">200</span></a><span class="sd">        # Output: replace: jumps over  -&gt; walks past</span>
</span><span id="Redlines.changes-201"><a href="#Redlines.changes-201"><span class="linenos">201</span></a><span class="sd">        ```</span>
</span><span id="Redlines.changes-202"><a href="#Redlines.changes-202"><span class="linenos">202</span></a>
</span><span id="Redlines.changes-203"><a href="#Redlines.changes-203"><span class="linenos">203</span></a><span class="sd">        :return: List of Redline objects (only actual changes, no &#39;equal&#39; operations)</span>
</span><span id="Redlines.changes-204"><a href="#Redlines.changes-204"><span class="linenos">204</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Redlines.changes-205"><a href="#Redlines.changes-205"><span class="linenos">205</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Redlines.changes-206"><a href="#Redlines.changes-206"><span class="linenos">206</span></a>        <span class="k">for</span> <span class="n">diff_op</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_diff_ops</span><span class="p">:</span>
</span><span id="Redlines.changes-207"><a href="#Redlines.changes-207"><span class="linenos">207</span></a>            <span class="n">tag</span><span class="p">,</span> <span class="n">i1</span><span class="p">,</span> <span class="n">i2</span><span class="p">,</span> <span class="n">j1</span><span class="p">,</span> <span class="n">j2</span> <span class="o">=</span> <span class="n">diff_op</span><span class="o">.</span><span class="n">opcodes</span>
</span><span id="Redlines.changes-208"><a href="#Redlines.changes-208"><span class="linenos">208</span></a>
</span><span id="Redlines.changes-209"><a href="#Redlines.changes-209"><span class="linenos">209</span></a>            <span class="c1"># Skip equal operations - only return actual changes</span>
</span><span id="Redlines.changes-210"><a href="#Redlines.changes-210"><span class="linenos">210</span></a>            <span class="k">if</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;equal&quot;</span><span class="p">:</span>
</span><span id="Redlines.changes-211"><a href="#Redlines.changes-211"><span class="linenos">211</span></a>                <span class="k">continue</span>
</span><span id="Redlines.changes-212"><a href="#Redlines.changes-212"><span class="linenos">212</span></a>
</span><span id="Redlines.changes-213"><a href="#Redlines.changes-213"><span class="linenos">213</span></a>            <span class="n">source_tokens</span> <span class="o">=</span> <span class="n">diff_op</span><span class="o">.</span><span class="n">source_chunk</span><span class="o">.</span><span class="n">text</span>
</span><span id="Redlines.changes-214"><a href="#Redlines.changes-214"><span class="linenos">214</span></a>            <span class="n">test_tokens</span> <span class="o">=</span> <span class="n">diff_op</span><span class="o">.</span><span class="n">test_chunk</span><span class="o">.</span><span class="n">text</span>
</span><span id="Redlines.changes-215"><a href="#Redlines.changes-215"><span class="linenos">215</span></a>
</span><span id="Redlines.changes-216"><a href="#Redlines.changes-216"><span class="linenos">216</span></a>            <span class="c1"># Extract text and positions based on operation type</span>
</span><span id="Redlines.changes-217"><a href="#Redlines.changes-217"><span class="linenos">217</span></a>            <span class="k">if</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;delete&quot;</span><span class="p">:</span>
</span><span id="Redlines.changes-218"><a href="#Redlines.changes-218"><span class="linenos">218</span></a>                <span class="n">redline</span> <span class="o">=</span> <span class="n">Redline</span><span class="p">(</span>
</span><span id="Redlines.changes-219"><a href="#Redlines.changes-219"><span class="linenos">219</span></a>                    <span class="n">operation</span><span class="o">=</span><span class="s2">&quot;delete&quot;</span><span class="p">,</span>
</span><span id="Redlines.changes-220"><a href="#Redlines.changes-220"><span class="linenos">220</span></a>                    <span class="n">source_text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">source_tokens</span><span class="p">[</span><span class="n">i1</span><span class="p">:</span><span class="n">i2</span><span class="p">]),</span>
</span><span id="Redlines.changes-221"><a href="#Redlines.changes-221"><span class="linenos">221</span></a>                    <span class="n">test_text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="Redlines.changes-222"><a href="#Redlines.changes-222"><span class="linenos">222</span></a>                    <span class="n">source_position</span><span class="o">=</span><span class="p">(</span><span class="n">i1</span><span class="p">,</span> <span class="n">i2</span><span class="p">),</span>
</span><span id="Redlines.changes-223"><a href="#Redlines.changes-223"><span class="linenos">223</span></a>                    <span class="n">test_position</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="Redlines.changes-224"><a href="#Redlines.changes-224"><span class="linenos">224</span></a>                <span class="p">)</span>
</span><span id="Redlines.changes-225"><a href="#Redlines.changes-225"><span class="linenos">225</span></a>            <span class="k">elif</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;insert&quot;</span><span class="p">:</span>
</span><span id="Redlines.changes-226"><a href="#Redlines.changes-226"><span class="linenos">226</span></a>                <span class="n">redline</span> <span class="o">=</span> <span class="n">Redline</span><span class="p">(</span>
</span><span id="Redlines.changes-227"><a href="#Redlines.changes-227"><span class="linenos">227</span></a>                    <span class="n">operation</span><span class="o">=</span><span class="s2">&quot;insert&quot;</span><span class="p">,</span>
</span><span id="Redlines.changes-228"><a href="#Redlines.changes-228"><span class="linenos">228</span></a>                    <span class="n">source_text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="Redlines.changes-229"><a href="#Redlines.changes-229"><span class="linenos">229</span></a>                    <span class="n">test_text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">test_tokens</span><span class="p">[</span><span class="n">j1</span><span class="p">:</span><span class="n">j2</span><span class="p">]),</span>
</span><span id="Redlines.changes-230"><a href="#Redlines.changes-230"><span class="linenos">230</span></a>                    <span class="n">source_position</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="Redlines.changes-231"><a href="#Redlines.changes-231"><span class="linenos">231</span></a>                    <span class="n">test_position</span><span class="o">=</span><span class="p">(</span><span class="n">j1</span><span class="p">,</span> <span class="n">j2</span><span class="p">),</span>
</span><span id="Redlines.changes-232"><a href="#Redlines.changes-232"><span class="linenos">232</span></a>                <span class="p">)</span>
</span><span id="Redlines.changes-233"><a href="#Redlines.changes-233"><span class="linenos">233</span></a>            <span class="k">elif</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;replace&quot;</span><span class="p">:</span>
</span><span id="Redlines.changes-234"><a href="#Redlines.changes-234"><span class="linenos">234</span></a>                <span class="n">redline</span> <span class="o">=</span> <span class="n">Redline</span><span class="p">(</span>
</span><span id="Redlines.changes-235"><a href="#Redlines.changes-235"><span class="linenos">235</span></a>                    <span class="n">operation</span><span class="o">=</span><span class="s2">&quot;replace&quot;</span><span class="p">,</span>
</span><span id="Redlines.changes-236"><a href="#Redlines.changes-236"><span class="linenos">236</span></a>                    <span class="n">source_text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">source_tokens</span><span class="p">[</span><span class="n">i1</span><span class="p">:</span><span class="n">i2</span><span class="p">]),</span>
</span><span id="Redlines.changes-237"><a href="#Redlines.changes-237"><span class="linenos">237</span></a>                    <span class="n">test_text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">test_tokens</span><span class="p">[</span><span class="n">j1</span><span class="p">:</span><span class="n">j2</span><span class="p">]),</span>
</span><span id="Redlines.changes-238"><a href="#Redlines.changes-238"><span class="linenos">238</span></a>                    <span class="n">source_position</span><span class="o">=</span><span class="p">(</span><span class="n">i1</span><span class="p">,</span> <span class="n">i2</span><span class="p">),</span>
</span><span id="Redlines.changes-239"><a href="#Redlines.changes-239"><span class="linenos">239</span></a>                    <span class="n">test_position</span><span class="o">=</span><span class="p">(</span><span class="n">j1</span><span class="p">,</span> <span class="n">j2</span><span class="p">),</span>
</span><span id="Redlines.changes-240"><a href="#Redlines.changes-240"><span class="linenos">240</span></a>                <span class="p">)</span>
</span><span id="Redlines.changes-241"><a href="#Redlines.changes-241"><span class="linenos">241</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Redlines.changes-242"><a href="#Redlines.changes-242"><span class="linenos">242</span></a>                <span class="k">continue</span>
</span><span id="Redlines.changes-243"><a href="#Redlines.changes-243"><span class="linenos">243</span></a>
</span><span id="Redlines.changes-244"><a href="#Redlines.changes-244"><span class="linenos">244</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">redline</span><span class="p">)</span>
</span><span id="Redlines.changes-245"><a href="#Redlines.changes-245"><span class="linenos">245</span></a>
</span><span id="Redlines.changes-246"><a href="#Redlines.changes-246"><span class="linenos">246</span></a>        <span class="k">return</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>Return list of Redline objects representing the differences between source and test.</p>

<p>This provides a user-friendly interface for programmatically accessing changes,
with direct access to the changed text and position information. Only actual
changes are returned (equal operations are excluded).</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="kn">from</span> <span class="nn">redlines</span> <span class="kn">import</span> <span class="n">Redlines</span>

<span class="n">test</span> <span class="o">=</span> <span class="n">Redlines</span><span class="p">(</span>
    <span class="s2">&quot;The quick brown fox jumps over the lazy dog.&quot;</span><span class="p">,</span>
    <span class="s2">&quot;The quick brown fox walks past the lazy dog.&quot;</span>
<span class="p">)</span>

<span class="k">for</span> <span class="n">redline</span> <span class="ow">in</span> <span class="n">test</span><span class="o">.</span><span class="n">changes</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">redline</span><span class="o">.</span><span class="n">operation</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">redline</span><span class="o">.</span><span class="n">source_text</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="n">redline</span><span class="o">.</span><span class="n">test_text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="c1"># Output: replace: jumps over  -&gt; walks past</span>
</code></pre>
</div>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>List of Redline objects (only actual changes, no 'equal' operations)</p>
</blockquote>
</div>


                            </div>
                            <div id="Redlines.get_changes" class="classattr">
                                        <input id="Redlines.get_changes-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_changes</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">operation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">list</span><span class="p">[</span><span class="n"><a href="processor.html#Redline">redlines.processor.Redline</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Redlines.get_changes-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Redlines.get_changes"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Redlines.get_changes-248"><a href="#Redlines.get_changes-248"><span class="linenos">248</span></a>    <span class="k">def</span> <span class="nf">get_changes</span><span class="p">(</span>
</span><span id="Redlines.get_changes-249"><a href="#Redlines.get_changes-249"><span class="linenos">249</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">operation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Redlines.get_changes-250"><a href="#Redlines.get_changes-250"><span class="linenos">250</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Redline</span><span class="p">]:</span>
</span><span id="Redlines.get_changes-251"><a href="#Redlines.get_changes-251"><span class="linenos">251</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Redlines.get_changes-252"><a href="#Redlines.get_changes-252"><span class="linenos">252</span></a><span class="sd">        Get changes (redlines), optionally filtered by operation type.</span>
</span><span id="Redlines.get_changes-253"><a href="#Redlines.get_changes-253"><span class="linenos">253</span></a>
</span><span id="Redlines.get_changes-254"><a href="#Redlines.get_changes-254"><span class="linenos">254</span></a><span class="sd">        ```python</span>
</span><span id="Redlines.get_changes-255"><a href="#Redlines.get_changes-255"><span class="linenos">255</span></a><span class="sd">        from redlines import Redlines</span>
</span><span id="Redlines.get_changes-256"><a href="#Redlines.get_changes-256"><span class="linenos">256</span></a>
</span><span id="Redlines.get_changes-257"><a href="#Redlines.get_changes-257"><span class="linenos">257</span></a><span class="sd">        test = Redlines(</span>
</span><span id="Redlines.get_changes-258"><a href="#Redlines.get_changes-258"><span class="linenos">258</span></a><span class="sd">            &quot;The quick brown fox jumps over the lazy dog.&quot;,</span>
</span><span id="Redlines.get_changes-259"><a href="#Redlines.get_changes-259"><span class="linenos">259</span></a><span class="sd">            &quot;The quick brown fox walks past the lazy dog.&quot;</span>
</span><span id="Redlines.get_changes-260"><a href="#Redlines.get_changes-260"><span class="linenos">260</span></a><span class="sd">        )</span>
</span><span id="Redlines.get_changes-261"><a href="#Redlines.get_changes-261"><span class="linenos">261</span></a>
</span><span id="Redlines.get_changes-262"><a href="#Redlines.get_changes-262"><span class="linenos">262</span></a><span class="sd">        # Get all changes</span>
</span><span id="Redlines.get_changes-263"><a href="#Redlines.get_changes-263"><span class="linenos">263</span></a><span class="sd">        all_changes = test.get_changes()</span>
</span><span id="Redlines.get_changes-264"><a href="#Redlines.get_changes-264"><span class="linenos">264</span></a>
</span><span id="Redlines.get_changes-265"><a href="#Redlines.get_changes-265"><span class="linenos">265</span></a><span class="sd">        # Get only replacements</span>
</span><span id="Redlines.get_changes-266"><a href="#Redlines.get_changes-266"><span class="linenos">266</span></a><span class="sd">        replacements = test.get_changes(operation=&quot;replace&quot;)</span>
</span><span id="Redlines.get_changes-267"><a href="#Redlines.get_changes-267"><span class="linenos">267</span></a>
</span><span id="Redlines.get_changes-268"><a href="#Redlines.get_changes-268"><span class="linenos">268</span></a><span class="sd">        # Get deletions</span>
</span><span id="Redlines.get_changes-269"><a href="#Redlines.get_changes-269"><span class="linenos">269</span></a><span class="sd">        deletions = test.get_changes(operation=&quot;delete&quot;)</span>
</span><span id="Redlines.get_changes-270"><a href="#Redlines.get_changes-270"><span class="linenos">270</span></a>
</span><span id="Redlines.get_changes-271"><a href="#Redlines.get_changes-271"><span class="linenos">271</span></a><span class="sd">        # Get insertions</span>
</span><span id="Redlines.get_changes-272"><a href="#Redlines.get_changes-272"><span class="linenos">272</span></a><span class="sd">        insertions = test.get_changes(operation=&quot;insert&quot;)</span>
</span><span id="Redlines.get_changes-273"><a href="#Redlines.get_changes-273"><span class="linenos">273</span></a><span class="sd">        ```</span>
</span><span id="Redlines.get_changes-274"><a href="#Redlines.get_changes-274"><span class="linenos">274</span></a>
</span><span id="Redlines.get_changes-275"><a href="#Redlines.get_changes-275"><span class="linenos">275</span></a><span class="sd">        :param operation: Filter by operation type: &quot;delete&quot;, &quot;insert&quot;, or &quot;replace&quot;. If None, returns all changes.</span>
</span><span id="Redlines.get_changes-276"><a href="#Redlines.get_changes-276"><span class="linenos">276</span></a><span class="sd">        :return: List of Redline objects matching the filter</span>
</span><span id="Redlines.get_changes-277"><a href="#Redlines.get_changes-277"><span class="linenos">277</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Redlines.get_changes-278"><a href="#Redlines.get_changes-278"><span class="linenos">278</span></a>        <span class="n">changes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">changes</span>
</span><span id="Redlines.get_changes-279"><a href="#Redlines.get_changes-279"><span class="linenos">279</span></a>
</span><span id="Redlines.get_changes-280"><a href="#Redlines.get_changes-280"><span class="linenos">280</span></a>        <span class="k">if</span> <span class="n">operation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Redlines.get_changes-281"><a href="#Redlines.get_changes-281"><span class="linenos">281</span></a>            <span class="k">return</span> <span class="n">changes</span>
</span><span id="Redlines.get_changes-282"><a href="#Redlines.get_changes-282"><span class="linenos">282</span></a>
</span><span id="Redlines.get_changes-283"><a href="#Redlines.get_changes-283"><span class="linenos">283</span></a>        <span class="k">if</span> <span class="n">operation</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;delete&quot;</span><span class="p">,</span> <span class="s2">&quot;insert&quot;</span><span class="p">,</span> <span class="s2">&quot;replace&quot;</span><span class="p">):</span>
</span><span id="Redlines.get_changes-284"><a href="#Redlines.get_changes-284"><span class="linenos">284</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="Redlines.get_changes-285"><a href="#Redlines.get_changes-285"><span class="linenos">285</span></a>                <span class="sa">f</span><span class="s2">&quot;Invalid operation &#39;</span><span class="si">{</span><span class="n">operation</span><span class="si">}</span><span class="s2">&#39;. Must be &#39;delete&#39;, &#39;insert&#39;, or &#39;replace&#39;.&quot;</span>
</span><span id="Redlines.get_changes-286"><a href="#Redlines.get_changes-286"><span class="linenos">286</span></a>            <span class="p">)</span>
</span><span id="Redlines.get_changes-287"><a href="#Redlines.get_changes-287"><span class="linenos">287</span></a>
</span><span id="Redlines.get_changes-288"><a href="#Redlines.get_changes-288"><span class="linenos">288</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">r</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">changes</span> <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">operation</span> <span class="o">==</span> <span class="n">operation</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Get changes (redlines), optionally filtered by operation type.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="kn">from</span> <span class="nn">redlines</span> <span class="kn">import</span> <span class="n">Redlines</span>

<span class="n">test</span> <span class="o">=</span> <span class="n">Redlines</span><span class="p">(</span>
    <span class="s2">&quot;The quick brown fox jumps over the lazy dog.&quot;</span><span class="p">,</span>
    <span class="s2">&quot;The quick brown fox walks past the lazy dog.&quot;</span>
<span class="p">)</span>

<span class="c1"># Get all changes</span>
<span class="n">all_changes</span> <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="n">get_changes</span><span class="p">()</span>

<span class="c1"># Get only replacements</span>
<span class="n">replacements</span> <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="n">get_changes</span><span class="p">(</span><span class="n">operation</span><span class="o">=</span><span class="s2">&quot;replace&quot;</span><span class="p">)</span>

<span class="c1"># Get deletions</span>
<span class="n">deletions</span> <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="n">get_changes</span><span class="p">(</span><span class="n">operation</span><span class="o">=</span><span class="s2">&quot;delete&quot;</span><span class="p">)</span>

<span class="c1"># Get insertions</span>
<span class="n">insertions</span> <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="n">get_changes</span><span class="p">(</span><span class="n">operation</span><span class="o">=</span><span class="s2">&quot;insert&quot;</span><span class="p">)</span>
</code></pre>
</div>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>operation: Filter by operation type</strong>:  "delete", "insert", or "replace". If None, returns all changes.</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>List of Redline objects matching the filter</p>
</blockquote>
</div>


                            </div>
                            <div id="Redlines.stats" class="classattr">
                                        <input id="Redlines.stats-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">stats</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="processor.html#Stats">redlines.processor.Stats</a></span>:</span></span>

                <label class="view-source-button" for="Redlines.stats-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Redlines.stats"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Redlines.stats-290"><a href="#Redlines.stats-290"><span class="linenos">290</span></a>    <span class="k">def</span> <span class="nf">stats</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Stats</span><span class="p">:</span>
</span><span id="Redlines.stats-291"><a href="#Redlines.stats-291"><span class="linenos">291</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Redlines.stats-292"><a href="#Redlines.stats-292"><span class="linenos">292</span></a><span class="sd">        Get statistics about the changes between source and test.</span>
</span><span id="Redlines.stats-293"><a href="#Redlines.stats-293"><span class="linenos">293</span></a>
</span><span id="Redlines.stats-294"><a href="#Redlines.stats-294"><span class="linenos">294</span></a><span class="sd">        ```python</span>
</span><span id="Redlines.stats-295"><a href="#Redlines.stats-295"><span class="linenos">295</span></a><span class="sd">        from redlines import Redlines</span>
</span><span id="Redlines.stats-296"><a href="#Redlines.stats-296"><span class="linenos">296</span></a>
</span><span id="Redlines.stats-297"><a href="#Redlines.stats-297"><span class="linenos">297</span></a><span class="sd">        test = Redlines(</span>
</span><span id="Redlines.stats-298"><a href="#Redlines.stats-298"><span class="linenos">298</span></a><span class="sd">            &quot;The quick brown fox jumps over the lazy dog.&quot;,</span>
</span><span id="Redlines.stats-299"><a href="#Redlines.stats-299"><span class="linenos">299</span></a><span class="sd">            &quot;The quick brown fox walks past the lazy dog.&quot;</span>
</span><span id="Redlines.stats-300"><a href="#Redlines.stats-300"><span class="linenos">300</span></a><span class="sd">        )</span>
</span><span id="Redlines.stats-301"><a href="#Redlines.stats-301"><span class="linenos">301</span></a>
</span><span id="Redlines.stats-302"><a href="#Redlines.stats-302"><span class="linenos">302</span></a><span class="sd">        stats = test.stats()</span>
</span><span id="Redlines.stats-303"><a href="#Redlines.stats-303"><span class="linenos">303</span></a><span class="sd">        print(f&quot;Total changes: {stats.total_changes}&quot;)</span>
</span><span id="Redlines.stats-304"><a href="#Redlines.stats-304"><span class="linenos">304</span></a><span class="sd">        print(f&quot;Deletions: {stats.deletions}&quot;)</span>
</span><span id="Redlines.stats-305"><a href="#Redlines.stats-305"><span class="linenos">305</span></a><span class="sd">        print(f&quot;Insertions: {stats.insertions}&quot;)</span>
</span><span id="Redlines.stats-306"><a href="#Redlines.stats-306"><span class="linenos">306</span></a><span class="sd">        print(f&quot;Replacements: {stats.replacements}&quot;)</span>
</span><span id="Redlines.stats-307"><a href="#Redlines.stats-307"><span class="linenos">307</span></a><span class="sd">        ```</span>
</span><span id="Redlines.stats-308"><a href="#Redlines.stats-308"><span class="linenos">308</span></a>
</span><span id="Redlines.stats-309"><a href="#Redlines.stats-309"><span class="linenos">309</span></a><span class="sd">        :return: Stats object with change counts</span>
</span><span id="Redlines.stats-310"><a href="#Redlines.stats-310"><span class="linenos">310</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Redlines.stats-311"><a href="#Redlines.stats-311"><span class="linenos">311</span></a>        <span class="n">changes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">changes</span>
</span><span id="Redlines.stats-312"><a href="#Redlines.stats-312"><span class="linenos">312</span></a>
</span><span id="Redlines.stats-313"><a href="#Redlines.stats-313"><span class="linenos">313</span></a>        <span class="n">deletions</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">changes</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">operation</span> <span class="o">==</span> <span class="s2">&quot;delete&quot;</span><span class="p">)</span>
</span><span id="Redlines.stats-314"><a href="#Redlines.stats-314"><span class="linenos">314</span></a>        <span class="n">insertions</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">changes</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">operation</span> <span class="o">==</span> <span class="s2">&quot;insert&quot;</span><span class="p">)</span>
</span><span id="Redlines.stats-315"><a href="#Redlines.stats-315"><span class="linenos">315</span></a>        <span class="n">replacements</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">changes</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">operation</span> <span class="o">==</span> <span class="s2">&quot;replace&quot;</span><span class="p">)</span>
</span><span id="Redlines.stats-316"><a href="#Redlines.stats-316"><span class="linenos">316</span></a>
</span><span id="Redlines.stats-317"><a href="#Redlines.stats-317"><span class="linenos">317</span></a>        <span class="k">return</span> <span class="n">Stats</span><span class="p">(</span>
</span><span id="Redlines.stats-318"><a href="#Redlines.stats-318"><span class="linenos">318</span></a>            <span class="n">total_changes</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">changes</span><span class="p">),</span>
</span><span id="Redlines.stats-319"><a href="#Redlines.stats-319"><span class="linenos">319</span></a>            <span class="n">deletions</span><span class="o">=</span><span class="n">deletions</span><span class="p">,</span>
</span><span id="Redlines.stats-320"><a href="#Redlines.stats-320"><span class="linenos">320</span></a>            <span class="n">insertions</span><span class="o">=</span><span class="n">insertions</span><span class="p">,</span>
</span><span id="Redlines.stats-321"><a href="#Redlines.stats-321"><span class="linenos">321</span></a>            <span class="n">replacements</span><span class="o">=</span><span class="n">replacements</span><span class="p">,</span>
</span><span id="Redlines.stats-322"><a href="#Redlines.stats-322"><span class="linenos">322</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Get statistics about the changes between source and test.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="kn">from</span> <span class="nn">redlines</span> <span class="kn">import</span> <span class="n">Redlines</span>

<span class="n">test</span> <span class="o">=</span> <span class="n">Redlines</span><span class="p">(</span>
    <span class="s2">&quot;The quick brown fox jumps over the lazy dog.&quot;</span><span class="p">,</span>
    <span class="s2">&quot;The quick brown fox walks past the lazy dog.&quot;</span>
<span class="p">)</span>

<span class="n">stats</span> <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="n">stats</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total changes: </span><span class="si">{</span><span class="n">stats</span><span class="o">.</span><span class="n">total_changes</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Deletions: </span><span class="si">{</span><span class="n">stats</span><span class="o">.</span><span class="n">deletions</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Insertions: </span><span class="si">{</span><span class="n">stats</span><span class="o">.</span><span class="n">insertions</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Replacements: </span><span class="si">{</span><span class="n">stats</span><span class="o">.</span><span class="n">replacements</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre>
</div>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>Stats object with change counts</p>
</blockquote>
</div>


                            </div>
                            <div id="Redlines.output_markdown" class="classattr">
                                        <input id="Redlines.output_markdown-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">output_markdown</span><span class="annotation">: str</span>

                <label class="view-source-button" for="Redlines.output_markdown-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Redlines.output_markdown"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Redlines.output_markdown-324"><a href="#Redlines.output_markdown-324"><span class="linenos">324</span></a>    <span class="nd">@property</span>
</span><span id="Redlines.output_markdown-325"><a href="#Redlines.output_markdown-325"><span class="linenos">325</span></a>    <span class="k">def</span> <span class="nf">output_markdown</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Redlines.output_markdown-326"><a href="#Redlines.output_markdown-326"><span class="linenos">326</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Redlines.output_markdown-327"><a href="#Redlines.output_markdown-327"><span class="linenos">327</span></a><span class="sd">        Returns the delta in Markdown format.</span>
</span><span id="Redlines.output_markdown-328"><a href="#Redlines.output_markdown-328"><span class="linenos">328</span></a>
</span><span id="Redlines.output_markdown-329"><a href="#Redlines.output_markdown-329"><span class="linenos">329</span></a><span class="sd">        ## Styling Markdown</span>
</span><span id="Redlines.output_markdown-330"><a href="#Redlines.output_markdown-330"><span class="linenos">330</span></a><span class="sd">        To output markdown in a particular manner, you must pass a `markdown_style` option when the `Redlines` object</span>
</span><span id="Redlines.output_markdown-331"><a href="#Redlines.output_markdown-331"><span class="linenos">331</span></a><span class="sd">        is created or when `Redlines.compare` is called.</span>
</span><span id="Redlines.output_markdown-332"><a href="#Redlines.output_markdown-332"><span class="linenos">332</span></a>
</span><span id="Redlines.output_markdown-333"><a href="#Redlines.output_markdown-333"><span class="linenos">333</span></a><span class="sd">        ```python</span>
</span><span id="Redlines.output_markdown-334"><a href="#Redlines.output_markdown-334"><span class="linenos">334</span></a><span class="sd">        from redlines import Redlines</span>
</span><span id="Redlines.output_markdown-335"><a href="#Redlines.output_markdown-335"><span class="linenos">335</span></a>
</span><span id="Redlines.output_markdown-336"><a href="#Redlines.output_markdown-336"><span class="linenos">336</span></a><span class="sd">        test = Redlines(</span>
</span><span id="Redlines.output_markdown-337"><a href="#Redlines.output_markdown-337"><span class="linenos">337</span></a><span class="sd">            &quot;The quick brown fox jumps over the lazy dog.&quot;,</span>
</span><span id="Redlines.output_markdown-338"><a href="#Redlines.output_markdown-338"><span class="linenos">338</span></a><span class="sd">            &quot;The quick brown fox walks past the lazy dog.&quot;,</span>
</span><span id="Redlines.output_markdown-339"><a href="#Redlines.output_markdown-339"><span class="linenos">339</span></a><span class="sd">            markdown_style=&quot;red&quot;  # This option specifies the style as red</span>
</span><span id="Redlines.output_markdown-340"><a href="#Redlines.output_markdown-340"><span class="linenos">340</span></a><span class="sd">        )</span>
</span><span id="Redlines.output_markdown-341"><a href="#Redlines.output_markdown-341"><span class="linenos">341</span></a>
</span><span id="Redlines.output_markdown-342"><a href="#Redlines.output_markdown-342"><span class="linenos">342</span></a><span class="sd">        test.compare(markdown_style=&quot;none&quot;) # This option specifies the style as none</span>
</span><span id="Redlines.output_markdown-343"><a href="#Redlines.output_markdown-343"><span class="linenos">343</span></a><span class="sd">        ```</span>
</span><span id="Redlines.output_markdown-344"><a href="#Redlines.output_markdown-344"><span class="linenos">344</span></a>
</span><span id="Redlines.output_markdown-345"><a href="#Redlines.output_markdown-345"><span class="linenos">345</span></a><span class="sd">        ### Available styles</span>
</span><span id="Redlines.output_markdown-346"><a href="#Redlines.output_markdown-346"><span class="linenos">346</span></a>
</span><span id="Redlines.output_markdown-347"><a href="#Redlines.output_markdown-347"><span class="linenos">347</span></a><span class="sd">        | Style | Preview |</span>
</span><span id="Redlines.output_markdown-348"><a href="#Redlines.output_markdown-348"><span class="linenos">348</span></a><span class="sd">        |-------| -------|</span>
</span><span id="Redlines.output_markdown-349"><a href="#Redlines.output_markdown-349"><span class="linenos">349</span></a><span class="sd">        |red-green (**default**) | &quot;The quick brown fox &lt;span style=&#39;color:red;font-weight:700;text-decoration:line-through;&#39;&gt;jumps over &lt;/span&gt;&lt;span style=&#39;color:green;font-weight:700;&#39;&gt;walks past &lt;/span&gt;the lazy dog.&quot;|</span>
</span><span id="Redlines.output_markdown-350"><a href="#Redlines.output_markdown-350"><span class="linenos">350</span></a><span class="sd">        |none | &#39;The quick brown fox &lt;del&gt;jumps over &lt;/del&gt;&lt;ins&gt;walks past &lt;/ins&gt;the lazy dog.&#39;|</span>
</span><span id="Redlines.output_markdown-351"><a href="#Redlines.output_markdown-351"><span class="linenos">351</span></a><span class="sd">        |red | &quot;The quick brown fox &lt;span style=&#39;color:red;font-weight:700;text-decoration:line-through;&#39;&gt;jumps over &lt;/span&gt;&lt;span style=&#39;color:red;font-weight:700;&#39;&gt;walks past &lt;/span&gt;the lazy dog.&quot;|</span>
</span><span id="Redlines.output_markdown-352"><a href="#Redlines.output_markdown-352"><span class="linenos">352</span></a><span class="sd">        |ghfm (GitHub Flavored Markdown)| &#39;The quick brown fox ~~jumps over ~~**walks past **the lazy dog.&#39; |</span>
</span><span id="Redlines.output_markdown-353"><a href="#Redlines.output_markdown-353"><span class="linenos">353</span></a><span class="sd">        |bbcode (BBCode) | &#39;The quick brown fox [s][color=red]jumps over [/color][/s][b][color=green]walks past [/color][/b]the lazy dog.&#39; |</span>
</span><span id="Redlines.output_markdown-354"><a href="#Redlines.output_markdown-354"><span class="linenos">354</span></a><span class="sd">        |streamlit | &#39;The quick brown fox ~~:red[jumps over ]~~ **:green[walks past ]** the lazy dog.&#39; |</span>
</span><span id="Redlines.output_markdown-355"><a href="#Redlines.output_markdown-355"><span class="linenos">355</span></a>
</span><span id="Redlines.output_markdown-356"><a href="#Redlines.output_markdown-356"><span class="linenos">356</span></a><span class="sd">        ### Custom styling</span>
</span><span id="Redlines.output_markdown-357"><a href="#Redlines.output_markdown-357"><span class="linenos">357</span></a>
</span><span id="Redlines.output_markdown-358"><a href="#Redlines.output_markdown-358"><span class="linenos">358</span></a><span class="sd">        You can also use css classes to provide custom styling by setting `markdown_style` as &quot;custom_css&quot;.</span>
</span><span id="Redlines.output_markdown-359"><a href="#Redlines.output_markdown-359"><span class="linenos">359</span></a><span class="sd">        Insertions and deletions are now styled using the &quot;redline-inserted&quot; and &quot;redline-deleted&quot; CSS classes.</span>
</span><span id="Redlines.output_markdown-360"><a href="#Redlines.output_markdown-360"><span class="linenos">360</span></a><span class="sd">        You can also set your own CSS classes by specifying the name of the CSS class in the options `ins_class`</span>
</span><span id="Redlines.output_markdown-361"><a href="#Redlines.output_markdown-361"><span class="linenos">361</span></a><span class="sd">        and `del_class` respectively in the constructor or compare function.</span>
</span><span id="Redlines.output_markdown-362"><a href="#Redlines.output_markdown-362"><span class="linenos">362</span></a>
</span><span id="Redlines.output_markdown-363"><a href="#Redlines.output_markdown-363"><span class="linenos">363</span></a><span class="sd">        ## Markdown output in specific environments</span>
</span><span id="Redlines.output_markdown-364"><a href="#Redlines.output_markdown-364"><span class="linenos">364</span></a>
</span><span id="Redlines.output_markdown-365"><a href="#Redlines.output_markdown-365"><span class="linenos">365</span></a><span class="sd">        Users have reported that the output doesn&#39;t display correctly in their environments.</span>
</span><span id="Redlines.output_markdown-366"><a href="#Redlines.output_markdown-366"><span class="linenos">366</span></a><span class="sd">        This is because styling may not appear in markdown environments which disallow HTML.</span>
</span><span id="Redlines.output_markdown-367"><a href="#Redlines.output_markdown-367"><span class="linenos">367</span></a><span class="sd">        There is no consistent support for strikethroughs and colors in the markdown standard,</span>
</span><span id="Redlines.output_markdown-368"><a href="#Redlines.output_markdown-368"><span class="linenos">368</span></a><span class="sd">        and styling is largely accomplished through raw HTML. If you are using GitHub or Streamlit, you may not get</span>
</span><span id="Redlines.output_markdown-369"><a href="#Redlines.output_markdown-369"><span class="linenos">369</span></a><span class="sd">        the formatting you expect or see any change at all.</span>
</span><span id="Redlines.output_markdown-370"><a href="#Redlines.output_markdown-370"><span class="linenos">370</span></a>
</span><span id="Redlines.output_markdown-371"><a href="#Redlines.output_markdown-371"><span class="linenos">371</span></a><span class="sd">        If you are facing this kind of difficulty, here are some recommendations. If your experience doesn&#39;t match</span>
</span><span id="Redlines.output_markdown-372"><a href="#Redlines.output_markdown-372"><span class="linenos">372</span></a><span class="sd">        the hints or description below, or you continue to face problems, please raise an issue.</span>
</span><span id="Redlines.output_markdown-373"><a href="#Redlines.output_markdown-373"><span class="linenos">373</span></a>
</span><span id="Redlines.output_markdown-374"><a href="#Redlines.output_markdown-374"><span class="linenos">374</span></a><span class="sd">        ### Jupyter Notebooks</span>
</span><span id="Redlines.output_markdown-375"><a href="#Redlines.output_markdown-375"><span class="linenos">375</span></a><span class="sd">        This library was first written for the Jupyter notebook environment, so all the available styles, including</span>
</span><span id="Redlines.output_markdown-376"><a href="#Redlines.output_markdown-376"><span class="linenos">376</span></a><span class="sd">        the default (`red-green`), `red` and `none` work.</span>
</span><span id="Redlines.output_markdown-377"><a href="#Redlines.output_markdown-377"><span class="linenos">377</span></a>
</span><span id="Redlines.output_markdown-378"><a href="#Redlines.output_markdown-378"><span class="linenos">378</span></a><span class="sd">        ### Streamlit</span>
</span><span id="Redlines.output_markdown-379"><a href="#Redlines.output_markdown-379"><span class="linenos">379</span></a>
</span><span id="Redlines.output_markdown-380"><a href="#Redlines.output_markdown-380"><span class="linenos">380</span></a><span class="sd">        Try this:</span>
</span><span id="Redlines.output_markdown-381"><a href="#Redlines.output_markdown-381"><span class="linenos">381</span></a>
</span><span id="Redlines.output_markdown-382"><a href="#Redlines.output_markdown-382"><span class="linenos">382</span></a><span class="sd">        * If streamlit version is &gt;= 1.16.0, consider the markdown style &quot;streamlit&quot;</span>
</span><span id="Redlines.output_markdown-383"><a href="#Redlines.output_markdown-383"><span class="linenos">383</span></a><span class="sd">        * If streamlit version is &lt; 1.16.0, consider the markdown style `ghfm`</span>
</span><span id="Redlines.output_markdown-384"><a href="#Redlines.output_markdown-384"><span class="linenos">384</span></a><span class="sd">        * Enable parsing of HTML. In Streamlit, you need to set the `unsafe_allow_html` argument in `st.write` or</span>
</span><span id="Redlines.output_markdown-385"><a href="#Redlines.output_markdown-385"><span class="linenos">385</span></a><span class="sd">        `st.markdown` to `True`.</span>
</span><span id="Redlines.output_markdown-386"><a href="#Redlines.output_markdown-386"><span class="linenos">386</span></a>
</span><span id="Redlines.output_markdown-387"><a href="#Redlines.output_markdown-387"><span class="linenos">387</span></a><span class="sd">        ### Colab</span>
</span><span id="Redlines.output_markdown-388"><a href="#Redlines.output_markdown-388"><span class="linenos">388</span></a>
</span><span id="Redlines.output_markdown-389"><a href="#Redlines.output_markdown-389"><span class="linenos">389</span></a><span class="sd">        Try this:</span>
</span><span id="Redlines.output_markdown-390"><a href="#Redlines.output_markdown-390"><span class="linenos">390</span></a><span class="sd">        * Use the markdown style `none` or `ghfm`</span>
</span><span id="Redlines.output_markdown-391"><a href="#Redlines.output_markdown-391"><span class="linenos">391</span></a><span class="sd">        * `Redlines.output_rich` has been reported to work in Colab</span>
</span><span id="Redlines.output_markdown-392"><a href="#Redlines.output_markdown-392"><span class="linenos">392</span></a>
</span><span id="Redlines.output_markdown-393"><a href="#Redlines.output_markdown-393"><span class="linenos">393</span></a><span class="sd">        :return: The delta in Markdown format.</span>
</span><span id="Redlines.output_markdown-394"><a href="#Redlines.output_markdown-394"><span class="linenos">394</span></a><span class="sd">        :rtype: str</span>
</span><span id="Redlines.output_markdown-395"><a href="#Redlines.output_markdown-395"><span class="linenos">395</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Redlines.output_markdown-396"><a href="#Redlines.output_markdown-396"><span class="linenos">396</span></a>        <span class="n">result</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Redlines.output_markdown-397"><a href="#Redlines.output_markdown-397"><span class="linenos">397</span></a>
</span><span id="Redlines.output_markdown-398"><a href="#Redlines.output_markdown-398"><span class="linenos">398</span></a>        <span class="c1"># default_style = &quot;red_green&quot;</span>
</span><span id="Redlines.output_markdown-399"><a href="#Redlines.output_markdown-399"><span class="linenos">399</span></a>
</span><span id="Redlines.output_markdown-400"><a href="#Redlines.output_markdown-400"><span class="linenos">400</span></a>        <span class="n">md_styles</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="Redlines.output_markdown-401"><a href="#Redlines.output_markdown-401"><span class="linenos">401</span></a>            <span class="s2">&quot;ins&quot;</span><span class="p">:</span> <span class="p">(</span>
</span><span id="Redlines.output_markdown-402"><a href="#Redlines.output_markdown-402"><span class="linenos">402</span></a>                <span class="sa">f</span><span class="s2">&quot;&lt;span style=&#39;color:green;font-weight:700;&#39;&gt;&quot;</span><span class="p">,</span>
</span><span id="Redlines.output_markdown-403"><a href="#Redlines.output_markdown-403"><span class="linenos">403</span></a>                <span class="s2">&quot;&lt;/span&gt;&quot;</span><span class="p">,</span>
</span><span id="Redlines.output_markdown-404"><a href="#Redlines.output_markdown-404"><span class="linenos">404</span></a>            <span class="p">),</span>
</span><span id="Redlines.output_markdown-405"><a href="#Redlines.output_markdown-405"><span class="linenos">405</span></a>            <span class="s2">&quot;del&quot;</span><span class="p">:</span> <span class="p">(</span>
</span><span id="Redlines.output_markdown-406"><a href="#Redlines.output_markdown-406"><span class="linenos">406</span></a>                <span class="sa">f</span><span class="s2">&quot;&lt;span style=&#39;color:red;font-weight:700;text-decoration:line-through;&#39;&gt;&quot;</span><span class="p">,</span>
</span><span id="Redlines.output_markdown-407"><a href="#Redlines.output_markdown-407"><span class="linenos">407</span></a>                <span class="s2">&quot;&lt;/span&gt;&quot;</span><span class="p">,</span>
</span><span id="Redlines.output_markdown-408"><a href="#Redlines.output_markdown-408"><span class="linenos">408</span></a>            <span class="p">),</span>
</span><span id="Redlines.output_markdown-409"><a href="#Redlines.output_markdown-409"><span class="linenos">409</span></a>        <span class="p">}</span>
</span><span id="Redlines.output_markdown-410"><a href="#Redlines.output_markdown-410"><span class="linenos">410</span></a>
</span><span id="Redlines.output_markdown-411"><a href="#Redlines.output_markdown-411"><span class="linenos">411</span></a>        <span class="k">if</span> <span class="s2">&quot;markdown_style&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
</span><span id="Redlines.output_markdown-412"><a href="#Redlines.output_markdown-412"><span class="linenos">412</span></a>            <span class="n">style</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s2">&quot;markdown_style&quot;</span><span class="p">]</span>
</span><span id="Redlines.output_markdown-413"><a href="#Redlines.output_markdown-413"><span class="linenos">413</span></a>
</span><span id="Redlines.output_markdown-414"><a href="#Redlines.output_markdown-414"><span class="linenos">414</span></a>            <span class="k">if</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;none&quot;</span> <span class="ow">or</span> <span class="n">style</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Redlines.output_markdown-415"><a href="#Redlines.output_markdown-415"><span class="linenos">415</span></a>                <span class="n">md_styles</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;ins&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;&lt;ins&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/ins&gt;&quot;</span><span class="p">),</span> <span class="s2">&quot;del&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;&lt;del&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/del&gt;&quot;</span><span class="p">)}</span>
</span><span id="Redlines.output_markdown-416"><a href="#Redlines.output_markdown-416"><span class="linenos">416</span></a>            <span class="k">elif</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;red&quot;</span><span class="p">:</span>
</span><span id="Redlines.output_markdown-417"><a href="#Redlines.output_markdown-417"><span class="linenos">417</span></a>                <span class="n">md_styles</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="Redlines.output_markdown-418"><a href="#Redlines.output_markdown-418"><span class="linenos">418</span></a>                    <span class="s2">&quot;ins&quot;</span><span class="p">:</span> <span class="p">(</span>
</span><span id="Redlines.output_markdown-419"><a href="#Redlines.output_markdown-419"><span class="linenos">419</span></a>                        <span class="sa">f</span><span class="s2">&quot;&lt;span style=&#39;color:red;font-weight:700;&#39;&gt;&quot;</span><span class="p">,</span>
</span><span id="Redlines.output_markdown-420"><a href="#Redlines.output_markdown-420"><span class="linenos">420</span></a>                        <span class="s2">&quot;&lt;/span&gt;&quot;</span><span class="p">,</span>
</span><span id="Redlines.output_markdown-421"><a href="#Redlines.output_markdown-421"><span class="linenos">421</span></a>                    <span class="p">),</span>
</span><span id="Redlines.output_markdown-422"><a href="#Redlines.output_markdown-422"><span class="linenos">422</span></a>                    <span class="s2">&quot;del&quot;</span><span class="p">:</span> <span class="p">(</span>
</span><span id="Redlines.output_markdown-423"><a href="#Redlines.output_markdown-423"><span class="linenos">423</span></a>                        <span class="sa">f</span><span class="s2">&quot;&lt;span style=&#39;color:red;font-weight:700;text-decoration:line-through;&#39;&gt;&quot;</span><span class="p">,</span>
</span><span id="Redlines.output_markdown-424"><a href="#Redlines.output_markdown-424"><span class="linenos">424</span></a>                        <span class="s2">&quot;&lt;/span&gt;&quot;</span><span class="p">,</span>
</span><span id="Redlines.output_markdown-425"><a href="#Redlines.output_markdown-425"><span class="linenos">425</span></a>                    <span class="p">),</span>
</span><span id="Redlines.output_markdown-426"><a href="#Redlines.output_markdown-426"><span class="linenos">426</span></a>                <span class="p">}</span>
</span><span id="Redlines.output_markdown-427"><a href="#Redlines.output_markdown-427"><span class="linenos">427</span></a>            <span class="k">elif</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;custom_css&quot;</span><span class="p">:</span>
</span><span id="Redlines.output_markdown-428"><a href="#Redlines.output_markdown-428"><span class="linenos">428</span></a>                <span class="n">ins_class</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="Redlines.output_markdown-429"><a href="#Redlines.output_markdown-429"><span class="linenos">429</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s2">&quot;ins_class&quot;</span><span class="p">]</span>
</span><span id="Redlines.output_markdown-430"><a href="#Redlines.output_markdown-430"><span class="linenos">430</span></a>                    <span class="k">if</span> <span class="s2">&quot;ins_class&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span>
</span><span id="Redlines.output_markdown-431"><a href="#Redlines.output_markdown-431"><span class="linenos">431</span></a>                    <span class="k">else</span> <span class="s2">&quot;redline-inserted&quot;</span>
</span><span id="Redlines.output_markdown-432"><a href="#Redlines.output_markdown-432"><span class="linenos">432</span></a>                <span class="p">)</span>
</span><span id="Redlines.output_markdown-433"><a href="#Redlines.output_markdown-433"><span class="linenos">433</span></a>                <span class="n">del_class</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="Redlines.output_markdown-434"><a href="#Redlines.output_markdown-434"><span class="linenos">434</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s2">&quot;del_class&quot;</span><span class="p">]</span>
</span><span id="Redlines.output_markdown-435"><a href="#Redlines.output_markdown-435"><span class="linenos">435</span></a>                    <span class="k">if</span> <span class="s2">&quot;del_class&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span>
</span><span id="Redlines.output_markdown-436"><a href="#Redlines.output_markdown-436"><span class="linenos">436</span></a>                    <span class="k">else</span> <span class="s2">&quot;redline-deleted&quot;</span>
</span><span id="Redlines.output_markdown-437"><a href="#Redlines.output_markdown-437"><span class="linenos">437</span></a>                <span class="p">)</span>
</span><span id="Redlines.output_markdown-438"><a href="#Redlines.output_markdown-438"><span class="linenos">438</span></a>
</span><span id="Redlines.output_markdown-439"><a href="#Redlines.output_markdown-439"><span class="linenos">439</span></a>                <span class="n">elem_attributes</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="Redlines.output_markdown-440"><a href="#Redlines.output_markdown-440"><span class="linenos">440</span></a>                    <span class="s2">&quot;ins&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;class=&#39;</span><span class="si">{</span><span class="n">ins_class</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
</span><span id="Redlines.output_markdown-441"><a href="#Redlines.output_markdown-441"><span class="linenos">441</span></a>                    <span class="s2">&quot;del&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;class=&#39;</span><span class="si">{</span><span class="n">del_class</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
</span><span id="Redlines.output_markdown-442"><a href="#Redlines.output_markdown-442"><span class="linenos">442</span></a>                <span class="p">}</span>
</span><span id="Redlines.output_markdown-443"><a href="#Redlines.output_markdown-443"><span class="linenos">443</span></a>
</span><span id="Redlines.output_markdown-444"><a href="#Redlines.output_markdown-444"><span class="linenos">444</span></a>                <span class="n">md_styles</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="Redlines.output_markdown-445"><a href="#Redlines.output_markdown-445"><span class="linenos">445</span></a>                    <span class="s2">&quot;ins&quot;</span><span class="p">:</span> <span class="p">(</span>
</span><span id="Redlines.output_markdown-446"><a href="#Redlines.output_markdown-446"><span class="linenos">446</span></a>                        <span class="sa">f</span><span class="s2">&quot;&lt;span </span><span class="si">{</span><span class="n">elem_attributes</span><span class="p">[</span><span class="s1">&#39;ins&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&gt;&quot;</span><span class="p">,</span>
</span><span id="Redlines.output_markdown-447"><a href="#Redlines.output_markdown-447"><span class="linenos">447</span></a>                        <span class="s2">&quot;&lt;/span&gt;&quot;</span><span class="p">,</span>
</span><span id="Redlines.output_markdown-448"><a href="#Redlines.output_markdown-448"><span class="linenos">448</span></a>                    <span class="p">),</span>
</span><span id="Redlines.output_markdown-449"><a href="#Redlines.output_markdown-449"><span class="linenos">449</span></a>                    <span class="s2">&quot;del&quot;</span><span class="p">:</span> <span class="p">(</span>
</span><span id="Redlines.output_markdown-450"><a href="#Redlines.output_markdown-450"><span class="linenos">450</span></a>                        <span class="sa">f</span><span class="s2">&quot;&lt;span </span><span class="si">{</span><span class="n">elem_attributes</span><span class="p">[</span><span class="s1">&#39;del&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&gt;&quot;</span><span class="p">,</span>
</span><span id="Redlines.output_markdown-451"><a href="#Redlines.output_markdown-451"><span class="linenos">451</span></a>                        <span class="s2">&quot;&lt;/span&gt;&quot;</span><span class="p">,</span>
</span><span id="Redlines.output_markdown-452"><a href="#Redlines.output_markdown-452"><span class="linenos">452</span></a>                    <span class="p">),</span>
</span><span id="Redlines.output_markdown-453"><a href="#Redlines.output_markdown-453"><span class="linenos">453</span></a>                <span class="p">}</span>
</span><span id="Redlines.output_markdown-454"><a href="#Redlines.output_markdown-454"><span class="linenos">454</span></a>            <span class="k">elif</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;ghfm&quot;</span><span class="p">:</span>
</span><span id="Redlines.output_markdown-455"><a href="#Redlines.output_markdown-455"><span class="linenos">455</span></a>                <span class="n">md_styles</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;ins&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;**&quot;</span><span class="p">,</span> <span class="s2">&quot;**&quot;</span><span class="p">),</span> <span class="s2">&quot;del&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;~~&quot;</span><span class="p">,</span> <span class="s2">&quot;~~&quot;</span><span class="p">)}</span>
</span><span id="Redlines.output_markdown-456"><a href="#Redlines.output_markdown-456"><span class="linenos">456</span></a>            <span class="k">elif</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;bbcode&quot;</span><span class="p">:</span>
</span><span id="Redlines.output_markdown-457"><a href="#Redlines.output_markdown-457"><span class="linenos">457</span></a>                <span class="n">md_styles</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="Redlines.output_markdown-458"><a href="#Redlines.output_markdown-458"><span class="linenos">458</span></a>                    <span class="s2">&quot;ins&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;[b][color=green]&quot;</span><span class="p">,</span> <span class="s2">&quot;[/color][/b]&quot;</span><span class="p">),</span>
</span><span id="Redlines.output_markdown-459"><a href="#Redlines.output_markdown-459"><span class="linenos">459</span></a>                    <span class="s2">&quot;del&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;[s][color=red]&quot;</span><span class="p">,</span> <span class="s2">&quot;[/color][/s]&quot;</span><span class="p">),</span>
</span><span id="Redlines.output_markdown-460"><a href="#Redlines.output_markdown-460"><span class="linenos">460</span></a>                <span class="p">}</span>
</span><span id="Redlines.output_markdown-461"><a href="#Redlines.output_markdown-461"><span class="linenos">461</span></a>            <span class="k">elif</span> <span class="n">style</span> <span class="o">==</span> <span class="s2">&quot;streamlit&quot;</span><span class="p">:</span>
</span><span id="Redlines.output_markdown-462"><a href="#Redlines.output_markdown-462"><span class="linenos">462</span></a>                <span class="n">md_styles</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;ins&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;**:green[&quot;</span><span class="p">,</span> <span class="s2">&quot;]** &quot;</span><span class="p">),</span> <span class="s2">&quot;del&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;~~:red[&quot;</span><span class="p">,</span> <span class="s2">&quot;]~~ &quot;</span><span class="p">)}</span>
</span><span id="Redlines.output_markdown-463"><a href="#Redlines.output_markdown-463"><span class="linenos">463</span></a>
</span><span id="Redlines.output_markdown-464"><a href="#Redlines.output_markdown-464"><span class="linenos">464</span></a>        <span class="k">for</span> <span class="n">diff_op</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_diff_ops</span><span class="p">:</span>
</span><span id="Redlines.output_markdown-465"><a href="#Redlines.output_markdown-465"><span class="linenos">465</span></a>            <span class="n">tag</span><span class="p">,</span> <span class="n">i1</span><span class="p">,</span> <span class="n">i2</span><span class="p">,</span> <span class="n">j1</span><span class="p">,</span> <span class="n">j2</span> <span class="o">=</span> <span class="n">diff_op</span><span class="o">.</span><span class="n">opcodes</span>
</span><span id="Redlines.output_markdown-466"><a href="#Redlines.output_markdown-466"><span class="linenos">466</span></a>            <span class="n">source_tokens</span> <span class="o">=</span> <span class="n">diff_op</span><span class="o">.</span><span class="n">source_chunk</span><span class="o">.</span><span class="n">text</span>
</span><span id="Redlines.output_markdown-467"><a href="#Redlines.output_markdown-467"><span class="linenos">467</span></a>            <span class="n">test_tokens</span> <span class="o">=</span> <span class="n">diff_op</span><span class="o">.</span><span class="n">test_chunk</span><span class="o">.</span><span class="n">text</span>
</span><span id="Redlines.output_markdown-468"><a href="#Redlines.output_markdown-468"><span class="linenos">468</span></a>
</span><span id="Redlines.output_markdown-469"><a href="#Redlines.output_markdown-469"><span class="linenos">469</span></a>            <span class="k">if</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;equal&quot;</span><span class="p">:</span>
</span><span id="Redlines.output_markdown-470"><a href="#Redlines.output_markdown-470"><span class="linenos">470</span></a>                <span class="n">temp_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">source_tokens</span><span class="p">[</span><span class="n">i1</span><span class="p">:</span><span class="n">i2</span><span class="p">])</span>
</span><span id="Redlines.output_markdown-471"><a href="#Redlines.output_markdown-471"><span class="linenos">471</span></a>                <span class="n">temp_str</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;¶ &quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">temp_str</span><span class="p">)</span>
</span><span id="Redlines.output_markdown-472"><a href="#Redlines.output_markdown-472"><span class="linenos">472</span></a>                <span class="c1"># here we use &#39;¶ &#39; instead of &#39; ¶ &#39;, because the leading space will be included in the previous token,</span>
</span><span id="Redlines.output_markdown-473"><a href="#Redlines.output_markdown-473"><span class="linenos">473</span></a>                <span class="c1"># according to tokenizer = re.compile(r&quot;((?:[^()\s]+|[().?!-])\s*)&quot;)</span>
</span><span id="Redlines.output_markdown-474"><a href="#Redlines.output_markdown-474"><span class="linenos">474</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp_str</span><span class="p">)</span>
</span><span id="Redlines.output_markdown-475"><a href="#Redlines.output_markdown-475"><span class="linenos">475</span></a>            <span class="k">elif</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;insert&quot;</span><span class="p">:</span>
</span><span id="Redlines.output_markdown-476"><a href="#Redlines.output_markdown-476"><span class="linenos">476</span></a>                <span class="n">temp_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">test_tokens</span><span class="p">[</span><span class="n">j1</span><span class="p">:</span><span class="n">j2</span><span class="p">])</span>
</span><span id="Redlines.output_markdown-477"><a href="#Redlines.output_markdown-477"><span class="linenos">477</span></a>                <span class="n">splits</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;¶ &quot;</span><span class="p">,</span> <span class="n">temp_str</span><span class="p">)</span>
</span><span id="Redlines.output_markdown-478"><a href="#Redlines.output_markdown-478"><span class="linenos">478</span></a>                <span class="k">for</span> <span class="n">split</span> <span class="ow">in</span> <span class="n">splits</span><span class="p">:</span>
</span><span id="Redlines.output_markdown-479"><a href="#Redlines.output_markdown-479"><span class="linenos">479</span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">md_styles</span><span class="p">[</span><span class="s1">&#39;ins&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}{</span><span class="n">split</span><span class="si">}{</span><span class="n">md_styles</span><span class="p">[</span><span class="s1">&#39;ins&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Redlines.output_markdown-480"><a href="#Redlines.output_markdown-480"><span class="linenos">480</span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Redlines.output_markdown-481"><a href="#Redlines.output_markdown-481"><span class="linenos">481</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">splits</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Redlines.output_markdown-482"><a href="#Redlines.output_markdown-482"><span class="linenos">482</span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span id="Redlines.output_markdown-483"><a href="#Redlines.output_markdown-483"><span class="linenos">483</span></a>            <span class="k">elif</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;delete&quot;</span><span class="p">:</span>
</span><span id="Redlines.output_markdown-484"><a href="#Redlines.output_markdown-484"><span class="linenos">484</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="Redlines.output_markdown-485"><a href="#Redlines.output_markdown-485"><span class="linenos">485</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">md_styles</span><span class="p">[</span><span class="s1">&#39;del&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}{</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">source_tokens</span><span class="p">[</span><span class="n">i1</span><span class="p">:</span><span class="n">i2</span><span class="p">])</span><span class="si">}{</span><span class="n">md_styles</span><span class="p">[</span><span class="s1">&#39;del&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="Redlines.output_markdown-486"><a href="#Redlines.output_markdown-486"><span class="linenos">486</span></a>                <span class="p">)</span>
</span><span id="Redlines.output_markdown-487"><a href="#Redlines.output_markdown-487"><span class="linenos">487</span></a>                <span class="c1"># for &#39;delete&#39;, we make no change, because otherwise there will be two times &#39;\n\n&#39; than the original</span>
</span><span id="Redlines.output_markdown-488"><a href="#Redlines.output_markdown-488"><span class="linenos">488</span></a>                <span class="c1"># text.</span>
</span><span id="Redlines.output_markdown-489"><a href="#Redlines.output_markdown-489"><span class="linenos">489</span></a>            <span class="k">elif</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;replace&quot;</span><span class="p">:</span>
</span><span id="Redlines.output_markdown-490"><a href="#Redlines.output_markdown-490"><span class="linenos">490</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="Redlines.output_markdown-491"><a href="#Redlines.output_markdown-491"><span class="linenos">491</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">md_styles</span><span class="p">[</span><span class="s1">&#39;del&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}{</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">source_tokens</span><span class="p">[</span><span class="n">i1</span><span class="p">:</span><span class="n">i2</span><span class="p">])</span><span class="si">}{</span><span class="n">md_styles</span><span class="p">[</span><span class="s1">&#39;del&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="Redlines.output_markdown-492"><a href="#Redlines.output_markdown-492"><span class="linenos">492</span></a>                <span class="p">)</span>
</span><span id="Redlines.output_markdown-493"><a href="#Redlines.output_markdown-493"><span class="linenos">493</span></a>                <span class="n">temp_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">test_tokens</span><span class="p">[</span><span class="n">j1</span><span class="p">:</span><span class="n">j2</span><span class="p">])</span>
</span><span id="Redlines.output_markdown-494"><a href="#Redlines.output_markdown-494"><span class="linenos">494</span></a>                <span class="n">splits</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;¶ &quot;</span><span class="p">,</span> <span class="n">temp_str</span><span class="p">)</span>
</span><span id="Redlines.output_markdown-495"><a href="#Redlines.output_markdown-495"><span class="linenos">495</span></a>                <span class="k">for</span> <span class="n">split</span> <span class="ow">in</span> <span class="n">splits</span><span class="p">:</span>
</span><span id="Redlines.output_markdown-496"><a href="#Redlines.output_markdown-496"><span class="linenos">496</span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">md_styles</span><span class="p">[</span><span class="s1">&#39;ins&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}{</span><span class="n">split</span><span class="si">}{</span><span class="n">md_styles</span><span class="p">[</span><span class="s1">&#39;ins&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Redlines.output_markdown-497"><a href="#Redlines.output_markdown-497"><span class="linenos">497</span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Redlines.output_markdown-498"><a href="#Redlines.output_markdown-498"><span class="linenos">498</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">splits</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Redlines.output_markdown-499"><a href="#Redlines.output_markdown-499"><span class="linenos">499</span></a>                    <span class="n">result</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span id="Redlines.output_markdown-500"><a href="#Redlines.output_markdown-500"><span class="linenos">500</span></a>
</span><span id="Redlines.output_markdown-501"><a href="#Redlines.output_markdown-501"><span class="linenos">501</span></a>        <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns the delta in Markdown format.</p>

<h2 id="styling-markdown">Styling Markdown</h2>

<p>To output markdown in a particular manner, you must pass a <code>markdown_style</code> option when the <code><a href="#Redlines">Redlines</a></code> object
is created or when <code><a href="#Redlines.compare">Redlines.compare</a></code> is called.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="kn">from</span> <span class="nn">redlines</span> <span class="kn">import</span> <span class="n">Redlines</span>

<span class="n">test</span> <span class="o">=</span> <span class="n">Redlines</span><span class="p">(</span>
    <span class="s2">&quot;The quick brown fox jumps over the lazy dog.&quot;</span><span class="p">,</span>
    <span class="s2">&quot;The quick brown fox walks past the lazy dog.&quot;</span><span class="p">,</span>
    <span class="n">markdown_style</span><span class="o">=</span><span class="s2">&quot;red&quot;</span>  <span class="c1"># This option specifies the style as red</span>
<span class="p">)</span>

<span class="n">test</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="n">markdown_style</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">)</span> <span class="c1"># This option specifies the style as none</span>
</code></pre>
</div>

<h3 id="available-styles">Available styles</h3>

<table>
<thead>
<tr>
  <th>Style</th>
  <th>Preview</th>
</tr>
</thead>
<tbody>
<tr>
  <td>red-green (<strong>default</strong>)</td>
  <td>"The quick brown fox <span style='color:red;font-weight:700;text-decoration:line-through;'>jumps over </span><span style='color:green;font-weight:700;'>walks past </span>the lazy dog."</td>
</tr>
<tr>
  <td>none</td>
  <td>'The quick brown fox <del>jumps over </del><ins>walks past </ins>the lazy dog.'</td>
</tr>
<tr>
  <td>red</td>
  <td>"The quick brown fox <span style='color:red;font-weight:700;text-decoration:line-through;'>jumps over </span><span style='color:red;font-weight:700;'>walks past </span>the lazy dog."</td>
</tr>
<tr>
  <td>ghfm (GitHub Flavored Markdown)</td>
  <td>'The quick brown fox ~~jumps over ~~<em>*walks past *</em>the lazy dog.'</td>
</tr>
<tr>
  <td>bbcode (BBCode)</td>
  <td>'The quick brown fox [s][color=red]jumps over [/color][/s][b][color=green]walks past [/color][/b]the lazy dog.'</td>
</tr>
<tr>
  <td>streamlit</td>
  <td>'The quick brown fox <s>:red[jumps over ]</s> <strong>:green[walks past ]</strong> the lazy dog.'</td>
</tr>
</tbody>
</table>

<h3 id="custom-styling">Custom styling</h3>

<p>You can also use css classes to provide custom styling by setting <code>markdown_style</code> as "custom_css".
Insertions and deletions are now styled using the "redline-inserted" and "redline-deleted" CSS classes.
You can also set your own CSS classes by specifying the name of the CSS class in the options <code>ins_class</code>
and <code>del_class</code> respectively in the constructor or compare function.</p>

<h2 id="markdown-output-in-specific-environments">Markdown output in specific environments</h2>

<p>Users have reported that the output doesn't display correctly in their environments.
This is because styling may not appear in markdown environments which disallow HTML.
There is no consistent support for strikethroughs and colors in the markdown standard,
and styling is largely accomplished through raw HTML. If you are using GitHub or Streamlit, you may not get
the formatting you expect or see any change at all.</p>

<p>If you are facing this kind of difficulty, here are some recommendations. If your experience doesn't match
the hints or description below, or you continue to face problems, please raise an issue.</p>

<h3 id="jupyter-notebooks">Jupyter Notebooks</h3>

<p>This library was first written for the Jupyter notebook environment, so all the available styles, including
the default (<code>red-green</code>), <code>red</code> and <code>none</code> work.</p>

<h3 id="streamlit">Streamlit</h3>

<p>Try this:</p>

<ul>
<li>If streamlit version is &gt;= 1.16.0, consider the markdown style "streamlit"</li>
<li>If streamlit version is &lt; 1.16.0, consider the markdown style <code>ghfm</code></li>
<li>Enable parsing of HTML. In Streamlit, you need to set the <code>unsafe_allow_html</code> argument in <code>st.write</code> or
<code>st.markdown</code> to <code>True</code>.</li>
</ul>

<h3 id="colab">Colab</h3>

<p>Try this:</p>

<ul>
<li>Use the markdown style <code>none</code> or <code>ghfm</code></li>
<li><code><a href="#Redlines.output_rich">Redlines.output_rich</a></code> has been reported to work in Colab</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The delta in Markdown format.</p>
</blockquote>
</div>


                            </div>
                            <div id="Redlines.output_rich" class="classattr">
                                        <input id="Redlines.output_rich-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">output_rich</span><span class="annotation">: rich.text.Text</span>

                <label class="view-source-button" for="Redlines.output_rich-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Redlines.output_rich"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Redlines.output_rich-503"><a href="#Redlines.output_rich-503"><span class="linenos">503</span></a>    <span class="nd">@property</span>
</span><span id="Redlines.output_rich-504"><a href="#Redlines.output_rich-504"><span class="linenos">504</span></a>    <span class="k">def</span> <span class="nf">output_rich</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Text</span><span class="p">:</span>
</span><span id="Redlines.output_rich-505"><a href="#Redlines.output_rich-505"><span class="linenos">505</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Redlines.output_rich-506"><a href="#Redlines.output_rich-506"><span class="linenos">506</span></a><span class="sd">        Returns the delta in text with colors/style for the console.</span>
</span><span id="Redlines.output_rich-507"><a href="#Redlines.output_rich-507"><span class="linenos">507</span></a>
</span><span id="Redlines.output_rich-508"><a href="#Redlines.output_rich-508"><span class="linenos">508</span></a><span class="sd">        :return: The delta in text with colors/style for the console.</span>
</span><span id="Redlines.output_rich-509"><a href="#Redlines.output_rich-509"><span class="linenos">509</span></a><span class="sd">        :rtype: Text</span>
</span><span id="Redlines.output_rich-510"><a href="#Redlines.output_rich-510"><span class="linenos">510</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Redlines.output_rich-511"><a href="#Redlines.output_rich-511"><span class="linenos">511</span></a>        <span class="n">console_text</span> <span class="o">=</span> <span class="n">Text</span><span class="p">()</span>
</span><span id="Redlines.output_rich-512"><a href="#Redlines.output_rich-512"><span class="linenos">512</span></a>
</span><span id="Redlines.output_rich-513"><a href="#Redlines.output_rich-513"><span class="linenos">513</span></a>        <span class="k">for</span> <span class="n">diff_op</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_diff_ops</span><span class="p">:</span>
</span><span id="Redlines.output_rich-514"><a href="#Redlines.output_rich-514"><span class="linenos">514</span></a>            <span class="n">tag</span><span class="p">,</span> <span class="n">i1</span><span class="p">,</span> <span class="n">i2</span><span class="p">,</span> <span class="n">j1</span><span class="p">,</span> <span class="n">j2</span> <span class="o">=</span> <span class="n">diff_op</span><span class="o">.</span><span class="n">opcodes</span>
</span><span id="Redlines.output_rich-515"><a href="#Redlines.output_rich-515"><span class="linenos">515</span></a>            <span class="n">source_tokens</span> <span class="o">=</span> <span class="n">diff_op</span><span class="o">.</span><span class="n">source_chunk</span><span class="o">.</span><span class="n">text</span>
</span><span id="Redlines.output_rich-516"><a href="#Redlines.output_rich-516"><span class="linenos">516</span></a>            <span class="n">test_tokens</span> <span class="o">=</span> <span class="n">diff_op</span><span class="o">.</span><span class="n">test_chunk</span><span class="o">.</span><span class="n">text</span>
</span><span id="Redlines.output_rich-517"><a href="#Redlines.output_rich-517"><span class="linenos">517</span></a>
</span><span id="Redlines.output_rich-518"><a href="#Redlines.output_rich-518"><span class="linenos">518</span></a>            <span class="k">if</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;equal&quot;</span><span class="p">:</span>
</span><span id="Redlines.output_rich-519"><a href="#Redlines.output_rich-519"><span class="linenos">519</span></a>                <span class="n">temp_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">source_tokens</span><span class="p">[</span><span class="n">i1</span><span class="p">:</span><span class="n">i2</span><span class="p">])</span>
</span><span id="Redlines.output_rich-520"><a href="#Redlines.output_rich-520"><span class="linenos">520</span></a>                <span class="n">temp_str</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;¶ &quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">temp_str</span><span class="p">)</span>
</span><span id="Redlines.output_rich-521"><a href="#Redlines.output_rich-521"><span class="linenos">521</span></a>                <span class="n">console_text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp_str</span><span class="p">)</span>
</span><span id="Redlines.output_rich-522"><a href="#Redlines.output_rich-522"><span class="linenos">522</span></a>            <span class="k">elif</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;insert&quot;</span><span class="p">:</span>
</span><span id="Redlines.output_rich-523"><a href="#Redlines.output_rich-523"><span class="linenos">523</span></a>                <span class="n">temp_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">test_tokens</span><span class="p">[</span><span class="n">j1</span><span class="p">:</span><span class="n">j2</span><span class="p">])</span>
</span><span id="Redlines.output_rich-524"><a href="#Redlines.output_rich-524"><span class="linenos">524</span></a>                <span class="n">splits</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;¶ &quot;</span><span class="p">,</span> <span class="n">temp_str</span><span class="p">)</span>
</span><span id="Redlines.output_rich-525"><a href="#Redlines.output_rich-525"><span class="linenos">525</span></a>                <span class="k">for</span> <span class="n">split</span> <span class="ow">in</span> <span class="n">splits</span><span class="p">:</span>
</span><span id="Redlines.output_rich-526"><a href="#Redlines.output_rich-526"><span class="linenos">526</span></a>                    <span class="n">console_text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">split</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">)</span>
</span><span id="Redlines.output_rich-527"><a href="#Redlines.output_rich-527"><span class="linenos">527</span></a>            <span class="k">elif</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;delete&quot;</span><span class="p">:</span>
</span><span id="Redlines.output_rich-528"><a href="#Redlines.output_rich-528"><span class="linenos">528</span></a>                <span class="n">console_text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">source_tokens</span><span class="p">[</span><span class="n">i1</span><span class="p">:</span><span class="n">i2</span><span class="p">]),</span> <span class="s2">&quot;strike red&quot;</span><span class="p">)</span>
</span><span id="Redlines.output_rich-529"><a href="#Redlines.output_rich-529"><span class="linenos">529</span></a>            <span class="k">elif</span> <span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;replace&quot;</span><span class="p">:</span>
</span><span id="Redlines.output_rich-530"><a href="#Redlines.output_rich-530"><span class="linenos">530</span></a>                <span class="n">console_text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">source_tokens</span><span class="p">[</span><span class="n">i1</span><span class="p">:</span><span class="n">i2</span><span class="p">]),</span> <span class="s2">&quot;strike red&quot;</span><span class="p">)</span>
</span><span id="Redlines.output_rich-531"><a href="#Redlines.output_rich-531"><span class="linenos">531</span></a>                <span class="n">temp_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">test_tokens</span><span class="p">[</span><span class="n">j1</span><span class="p">:</span><span class="n">j2</span><span class="p">])</span>
</span><span id="Redlines.output_rich-532"><a href="#Redlines.output_rich-532"><span class="linenos">532</span></a>                <span class="n">splits</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;¶ &quot;</span><span class="p">,</span> <span class="n">temp_str</span><span class="p">)</span>
</span><span id="Redlines.output_rich-533"><a href="#Redlines.output_rich-533"><span class="linenos">533</span></a>                <span class="k">for</span> <span class="n">split</span> <span class="ow">in</span> <span class="n">splits</span><span class="p">:</span>
</span><span id="Redlines.output_rich-534"><a href="#Redlines.output_rich-534"><span class="linenos">534</span></a>                    <span class="n">console_text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">split</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">)</span>
</span><span id="Redlines.output_rich-535"><a href="#Redlines.output_rich-535"><span class="linenos">535</span></a>
</span><span id="Redlines.output_rich-536"><a href="#Redlines.output_rich-536"><span class="linenos">536</span></a>        <span class="k">return</span> <span class="n">console_text</span>
</span></pre></div>


            <div class="docstring"><p>Returns the delta in text with colors/style for the console.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The delta in text with colors/style for the console.</p>
</blockquote>
</div>


                            </div>
                            <div id="Redlines.compare" class="classattr">
                                        <input id="Redlines.compare-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">compare</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">test</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">output</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n"><a href="enums.html#OutputType">redlines.enums.OutputType</a></span><span class="p">,</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;markdown&#39;</span><span class="p">,</span> <span class="s1">&#39;rich&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">OutputType</span><span class="o">.</span><span class="n">MARKDOWN</span><span class="p">:</span> <span class="s1">&#39;markdown&#39;</span><span class="o">&gt;</span>,</span><span class="param">	<span class="o">**</span><span class="n">options</span><span class="p">:</span> <span class="n">Unpack</span><span class="p">[</span><span class="n"><a href="#RedlinesOptions">RedlinesOptions</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n">rich</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">Text</span> <span class="o">|</span> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="Redlines.compare-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Redlines.compare"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Redlines.compare-538"><a href="#Redlines.compare-538"><span class="linenos">538</span></a>    <span class="k">def</span> <span class="nf">compare</span><span class="p">(</span>
</span><span id="Redlines.compare-539"><a href="#Redlines.compare-539"><span class="linenos">539</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Redlines.compare-540"><a href="#Redlines.compare-540"><span class="linenos">540</span></a>        <span class="n">test</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Redlines.compare-541"><a href="#Redlines.compare-541"><span class="linenos">541</span></a>        <span class="n">output</span><span class="p">:</span> <span class="n">OutputTypeLike</span> <span class="o">=</span> <span class="n">OutputType</span><span class="o">.</span><span class="n">MARKDOWN</span><span class="p">,</span>
</span><span id="Redlines.compare-542"><a href="#Redlines.compare-542"><span class="linenos">542</span></a>        <span class="o">**</span><span class="n">options</span><span class="p">:</span> <span class="n">Unpack</span><span class="p">[</span><span class="n">RedlinesOptions</span><span class="p">],</span>
</span><span id="Redlines.compare-543"><a href="#Redlines.compare-543"><span class="linenos">543</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Text</span> <span class="o">|</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Redlines.compare-544"><a href="#Redlines.compare-544"><span class="linenos">544</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Redlines.compare-545"><a href="#Redlines.compare-545"><span class="linenos">545</span></a><span class="sd">        Compare `test` with `source`, and produce a delta in a format specified by `output`.</span>
</span><span id="Redlines.compare-546"><a href="#Redlines.compare-546"><span class="linenos">546</span></a>
</span><span id="Redlines.compare-547"><a href="#Redlines.compare-547"><span class="linenos">547</span></a><span class="sd">        :param test: Optional test string to compare. If None, uses the test string provided during initialisation.</span>
</span><span id="Redlines.compare-548"><a href="#Redlines.compare-548"><span class="linenos">548</span></a><span class="sd">        :type test: str | None</span>
</span><span id="Redlines.compare-549"><a href="#Redlines.compare-549"><span class="linenos">549</span></a><span class="sd">        :param output: The format which the delta should be produced. Currently, &quot;markdown&quot; and &quot;rich&quot; are supported. Defaults to &quot;markdown&quot;.</span>
</span><span id="Redlines.compare-550"><a href="#Redlines.compare-550"><span class="linenos">550</span></a><span class="sd">        :type output: OutputTypeLike</span>
</span><span id="Redlines.compare-551"><a href="#Redlines.compare-551"><span class="linenos">551</span></a><span class="sd">        :param options: Additional options for comparison and output formatting.</span>
</span><span id="Redlines.compare-552"><a href="#Redlines.compare-552"><span class="linenos">552</span></a><span class="sd">        :type options: RedlinesOptions</span>
</span><span id="Redlines.compare-553"><a href="#Redlines.compare-553"><span class="linenos">553</span></a><span class="sd">        :return: The delta in the format specified by `output`.</span>
</span><span id="Redlines.compare-554"><a href="#Redlines.compare-554"><span class="linenos">554</span></a><span class="sd">        :rtype: Text | str</span>
</span><span id="Redlines.compare-555"><a href="#Redlines.compare-555"><span class="linenos">555</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Redlines.compare-556"><a href="#Redlines.compare-556"><span class="linenos">556</span></a>        <span class="k">if</span> <span class="n">options</span><span class="p">:</span>
</span><span id="Redlines.compare-557"><a href="#Redlines.compare-557"><span class="linenos">557</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="n">options</span>
</span><span id="Redlines.compare-558"><a href="#Redlines.compare-558"><span class="linenos">558</span></a>
</span><span id="Redlines.compare-559"><a href="#Redlines.compare-559"><span class="linenos">559</span></a>        <span class="k">if</span> <span class="n">test</span><span class="p">:</span>
</span><span id="Redlines.compare-560"><a href="#Redlines.compare-560"><span class="linenos">560</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test</span> <span class="ow">and</span> <span class="n">test</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test</span><span class="p">:</span>
</span><span id="Redlines.compare-561"><a href="#Redlines.compare-561"><span class="linenos">561</span></a>                <span class="c1"># If we&#39;ve already processed this test string, no need to reprocess</span>
</span><span id="Redlines.compare-562"><a href="#Redlines.compare-562"><span class="linenos">562</span></a>                <span class="k">pass</span>
</span><span id="Redlines.compare-563"><a href="#Redlines.compare-563"><span class="linenos">563</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Redlines.compare-564"><a href="#Redlines.compare-564"><span class="linenos">564</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">test</span> <span class="o">=</span> <span class="n">test</span>
</span><span id="Redlines.compare-565"><a href="#Redlines.compare-565"><span class="linenos">565</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Redlines.compare-566"><a href="#Redlines.compare-566"><span class="linenos">566</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="Redlines.compare-567"><a href="#Redlines.compare-567"><span class="linenos">567</span></a>                <span class="s2">&quot;No test string was provided when the function was called, or during initialisation.&quot;</span>
</span><span id="Redlines.compare-568"><a href="#Redlines.compare-568"><span class="linenos">568</span></a>            <span class="p">)</span>
</span><span id="Redlines.compare-569"><a href="#Redlines.compare-569"><span class="linenos">569</span></a>
</span><span id="Redlines.compare-570"><a href="#Redlines.compare-570"><span class="linenos">570</span></a>        <span class="k">if</span> <span class="n">output</span> <span class="o">==</span> <span class="n">OutputType</span><span class="o">.</span><span class="n">MARKDOWN</span><span class="p">:</span>
</span><span id="Redlines.compare-571"><a href="#Redlines.compare-571"><span class="linenos">571</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_markdown</span>
</span><span id="Redlines.compare-572"><a href="#Redlines.compare-572"><span class="linenos">572</span></a>        <span class="k">elif</span> <span class="n">output</span> <span class="o">==</span> <span class="n">OutputType</span><span class="o">.</span><span class="n">RICH</span><span class="p">:</span>
</span><span id="Redlines.compare-573"><a href="#Redlines.compare-573"><span class="linenos">573</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_rich</span>
</span><span id="Redlines.compare-574"><a href="#Redlines.compare-574"><span class="linenos">574</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_markdown</span>
</span></pre></div>


            <div class="docstring"><p>Compare <code><a href="#Redlines.test">test</a></code> with <code><a href="#Redlines.source">source</a></code>, and produce a delta in a format specified by <code>output</code>.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>test</strong>:  Optional test string to compare. If None, uses the test string provided during initialisation.</li>
<li><strong>output</strong>:  The format which the delta should be produced. Currently, "markdown" and "rich" are supported. Defaults to "markdown".</li>
<li><strong>options</strong>:  Additional options for comparison and output formatting.</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The delta in the format specified by <code>output</code>.</p>
</blockquote>
</div>


                            </div>
                </section>
                <section id="RedlinesOptions">
                            <input id="RedlinesOptions-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">RedlinesOptions</span><wbr>(<span class="base">typing.TypedDict</span>):

                <label class="view-source-button" for="RedlinesOptions-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RedlinesOptions"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RedlinesOptions-24"><a href="#RedlinesOptions-24"><span class="linenos">24</span></a><span class="k">class</span> <span class="nc">RedlinesOptions</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">TypedDict</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="RedlinesOptions-25"><a href="#RedlinesOptions-25"><span class="linenos">25</span></a>    <span class="n">markdown_style</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">MarkdownStyle</span> <span class="o">|</span> <span class="kc">None</span>
</span><span id="RedlinesOptions-26"><a href="#RedlinesOptions-26"><span class="linenos">26</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The style to use for markdown output. See `Redlines.output_markdown` for more information.&quot;&quot;&quot;</span>
</span><span id="RedlinesOptions-27"><a href="#RedlinesOptions-27"><span class="linenos">27</span></a>    <span class="n">ins_class</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="RedlinesOptions-28"><a href="#RedlinesOptions-28"><span class="linenos">28</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The CSS class to use for insertions when `markdown_style` is set to `custom_css`. Defaults to &#39;redline-inserted&#39;.&quot;&quot;&quot;</span>
</span><span id="RedlinesOptions-29"><a href="#RedlinesOptions-29"><span class="linenos">29</span></a>    <span class="n">del_class</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="RedlinesOptions-30"><a href="#RedlinesOptions-30"><span class="linenos">30</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The CSS class to use for deletions when `markdown_style` is set to `custom_css`. Defaults to &#39;redline-deleted&#39;.&quot;&quot;&quot;</span>
</span></pre></div>


    

                            <div id="RedlinesOptions.markdown_style" class="classattr">
                                <div class="attr variable">
            <span class="name">markdown_style</span><span class="annotation">: str | <a href="enums.html#MarkdownStyle">redlines.enums.MarkdownStyle</a> | None</span>

        
    </div>
    <a class="headerlink" href="#RedlinesOptions.markdown_style"></a>
    
            <div class="docstring"><p>The style to use for markdown output. See <code><a href="#Redlines.output_markdown">Redlines.output_markdown</a></code> for more information.</p>
</div>


                            </div>
                            <div id="RedlinesOptions.ins_class" class="classattr">
                                <div class="attr variable">
            <span class="name">ins_class</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#RedlinesOptions.ins_class"></a>
    
            <div class="docstring"><p>The CSS class to use for insertions when <code><a href="#RedlinesOptions.markdown_style">markdown_style</a></code> is set to <code>custom_css</code>. Defaults to 'redline-inserted'.</p>
</div>


                            </div>
                            <div id="RedlinesOptions.del_class" class="classattr">
                                <div class="attr variable">
            <span class="name">del_class</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#RedlinesOptions.del_class"></a>
    
            <div class="docstring"><p>The CSS class to use for deletions when <code><a href="#RedlinesOptions.markdown_style">markdown_style</a></code> is set to <code>custom_css</code>. Defaults to 'redline-deleted'.</p>
</div>


                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>